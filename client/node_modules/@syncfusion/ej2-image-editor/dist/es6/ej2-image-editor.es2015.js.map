{"version":3,"file":"ej2-image-editor.es2015.js","sources":["../src/es6/image-editor/image-editor.js","../src/es6/image-editor/index.js","../src/es6/index.js"],"sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar ImageEditor_1;\nimport { NotifyPropertyChanges, Property, addClass, removeClass, extend } from '@syncfusion/ej2-base';\nimport { Event, EventHandler, getComponent, getInstance, isNullOrUndefined, L10n, getUniqueID } from '@syncfusion/ej2-base';\nimport { SignatureBase } from '@syncfusion/ej2-inputs';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Uploader } from '@syncfusion/ej2-inputs';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { compile, compile as templateCompiler, Browser } from '@syncfusion/ej2-base';\n/**\n * Image Editor is a graphical user interface that helps to edit an image by performing actions like selection,\n * cropping, rotating, inserting text and shapes (rectangles, ellipses, lines), and drawing free hand on top of an image.\n *\n ```html\n * <div id='imageeditor'></div>\n * ```\n * ```typescript\n * <script>\n * var imageObj = new ImageEditor({});\n * imageObj.appendTo(\"#imageeditor\");\n * </script>\n * ```\n */\nlet ImageEditor = ImageEditor_1 = class ImageEditor extends SignatureBase {\n    /**\n     *\n     * Constructor for creating the widget\n     *\n     * @param  {ImageEditorModel} options - Specifies the image editor model\n     * @param  {string|HTMLDivElement} element - Specifies the target element\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.degree = 0; // current rotated state\n        this.isUndoRedo = false;\n        this.dragCanvas = false;\n        this.dragElement = '';\n        this.keyHistory = ''; // text history\n        this.flipState = ''; // current flip state whether horizontal or vertical or none\n        this.mouseDownPoint = { x: 0, y: 0 };\n        this.previousPoint = { x: 0, y: 0 }; // updates prev x and y points in mouseMove\n        this.dragPoint = { startX: 0, startY: 0, endX: 0, endY: 0 }; // updates drag start and end points in mousedown and mousemove\n        this.diffPoint = { x: 0, y: 0 }; // updates resize points\n        this.oldPoint = {};\n        this.objColl = []; // shapes, text obj collection\n        this.undoRedoColl = [];\n        this.imgDataColl = []; // collection of Image Data mainly used for reset state\n        this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        this.textSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, bold: false, italic: false, underline: false };\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        this.tempTextSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, bold: false, italic: false, underline: false };\n        this.toolbarHeight = 46;\n        this.pannStart = {};\n        this.pannEnd = {};\n        this.togglePan = false;\n        this.lastX = 0;\n        this.lastY = 0;\n        this.dragStart = { x: 0, y: 0 };\n        this.dragged = false;\n        this.factor = 1; // current zoomed state\n        this.currFlipState = '';\n        this.touchEndPoint = {};\n        this.flipMethod = false;\n        this.flipDirection = '';\n        this.prevX = 0;\n        this.currX = 0;\n        this.prevY = 0;\n        this.currY = 0;\n        this.togglePen = false;\n        this.rotateMethod = false;\n        this.isBoldbtn = false;\n        this.isItalicbtn = false;\n        this.lastAction = '';\n        this.currentToolbar = 'main';\n        this.textStartPoints = { x: 0, y: 0 };\n        this.fontSizeColl = [];\n        this.tempKeyHistory = '';\n        this.penDrawColl = [];\n        this.allowDrag = false;\n        this.textRow = 1;\n        this.activeObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [] };\n        this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false,\n            isInitialLine: false, isCustomCrop: false, isZoomed: false };\n        this.defToolbarItems = [];\n        this.baseImgSrc = '';\n        this.isTimer = false;\n        this.isScreenOriented = false;\n    }\n    preRender() {\n        // pre render code snippets\n        this.element.id = this.element.id || getUniqueID('ej2-image-editor');\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        this.themeColl = {\n            Bootstrap5: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Bootstrap5Dark: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Tailwind: { primaryColor: '#4f46e5', secondaryColor: '#fff' },\n            TailwindDark: { primaryColor: '#22d3ee', secondaryColor: '#fff' },\n            Fluent: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            FluentDark: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            Bootstrap4: { primaryColor: '#007bff', secondaryColor: '#fff' },\n            Bootstrap: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            BootstrapDark: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            Material: { primaryColor: '#e3165b', secondaryColor: '#fff' },\n            MaterialDark: { primaryColor: '#00b0ff', secondaryColor: '#fff' },\n            Fabric: { primaryColor: '#0078d6', secondaryColor: '#fff' },\n            FabricDark: { primaryColor: '#0074cc', secondaryColor: '#fff' },\n            Highcontrast: { primaryColor: '#000000', secondaryColor: '#fff' }\n        };\n        this.defaultLocale = {\n            Crop: 'Crop',\n            ZoomIn: 'Zoom In',\n            ZoomOut: 'Zoom Out',\n            Transform: 'Transform',\n            Annotation: 'Annotation',\n            Text: 'Add Text',\n            Pen: 'Pen',\n            Reset: 'Reset',\n            Save: 'Save',\n            Select: 'Select',\n            RotateLeft: 'Rotate Left',\n            RotateRight: 'Rotate Right',\n            HorizontalFlip: 'Horizontal Flip',\n            VerticalFlip: 'Vertical Flip',\n            OK: 'OK',\n            Cancel: 'Cancel',\n            FillColor: 'Fill Color',\n            StrokeColor: 'Stroke Color',\n            StrokeWidth: 'Stroke Width',\n            FontFamily: 'Font Family',\n            FontStyle: 'Font Style',\n            FontSize: 'Font Size',\n            FontColor: 'Font Color',\n            Pan: 'Pan',\n            Move: 'Move',\n            Load: 'Load',\n            Custom: 'Custom',\n            Square: 'Square',\n            Circle: 'Circle',\n            Ellipse: 'Ellipse',\n            Rectangle: 'Rectangle',\n            Line: 'Line',\n            Default: 'Default',\n            Bold: 'Bold',\n            Italic: 'Italic',\n            BoldItalic: 'Bold Italic',\n            XSmall: 'X-Small',\n            Small: 'Small',\n            Medium: 'Medium',\n            Large: 'Large',\n            XLarge: 'X-Large',\n            ABC: 'ABC'\n        };\n        this.l10n = new L10n('image-editor', this.defaultLocale, this.locale);\n    }\n    /**\n     *\n     * To Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    render() {\n        this.initialize();\n    }\n    /**\n     * To get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    getModuleName() {\n        return 'image-editor';\n    }\n    /**\n     *\n     * To get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     * @private\n     */\n    getPersistData() {\n        return this.addOnPersist([]);\n    }\n    /**\n     *\n     * Called internally if any of the property value changed.\n     *\n     * @param  {ImageEditorModel} newProperties - Specifies new properties\n     * @param  {ImageEditorModel} oldProperties - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProperties, oldProperties) {\n        for (const prop of Object.keys(newProperties)) {\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProperties.cssClass) {\n                        removeClass([this.element], oldProperties.cssClass.split(' '));\n                    }\n                    if (newProperties.cssClass) {\n                        addClass([this.element], newProperties.cssClass.split(' '));\n                    }\n                    break;\n                case 'disabled':\n                    if (newProperties.disabled) {\n                        this.element.classList.add('e-disabled');\n                        this.unwireEvent();\n                    }\n                    else {\n                        this.element.classList.remove('e-disabled');\n                        this.wireEvent();\n                    }\n                    break;\n                case 'height':\n                    this.element.style.height = newProperties.height;\n                    break;\n                case 'width':\n                    this.element.style.width = newProperties.width;\n                    break;\n                case 'theme':\n                    if (newProperties.theme) {\n                        this.updateTheme();\n                        this.upperContext.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n                        this.upperContext.fillStyle = this.themeColl[this.theme]['secondaryColor'];\n                    }\n                    break;\n            }\n        }\n    }\n    destroy() {\n        let classList = [];\n        this.element.removeAttribute('tabindex');\n        if (this.cssClass) {\n            classList = classList.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], classList);\n        if (!this.element.getAttribute('class')) {\n            this.element.removeAttribute('class');\n        }\n        this.unwireEvent();\n        super.destroy();\n        this.element.innerHTML = '';\n        this.trigger('destroyed');\n    }\n    initialize() {\n        this.createToolbar();\n        this.createCanvas();\n        this.wireEvent();\n        this.updateContext(this.lowerContext);\n        this.updateContext(this.upperContext);\n        this.pannStart = { startX: 0, startY: 0, width: 0, height: 0 };\n        this.pannEnd = { startX: 0, startY: 0, width: 0, height: 0 };\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.split(' '));\n        }\n        if (this.element) {\n            createSpinner({\n                target: this.element\n            });\n        }\n    }\n    /**\n     *\n     * This Method will add events to component (element, event, method, current reference)\n     *\n     * @returns {void}.\n     */\n    wireEvent() {\n        EventHandler.add(document, 'keydown', this.keyDownEventHandler, this);\n        EventHandler.add(document, 'keypress', this.keyUpEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousedown', this.mouseDownEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(document, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler, this);\n        EventHandler.add(document, 'mouseup', this.canvasMouseUpHandler, this);\n        EventHandler.add(this.upperCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.lowerCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.upperCanvas, 'dblclick', this.findTextPoint, this);\n        EventHandler.add(this.textBox, 'mousedown', this.findTextPoint, this);\n        window.addEventListener('resize', this.windowResizeHandler.bind(this));\n        if ((!Browser.isIos && Browser.info.name !== 'safari')) {\n            screen.orientation.addEventListener('change', this.screenOrientation.bind(this));\n        }\n    }\n    /**\n     *\n     * This Method will remove events from component\n     *\n     * @returns {void}.\n     */\n    unwireEvent() {\n        EventHandler.remove(document, 'keydown', this.keyDownEventHandler);\n        EventHandler.remove(document, 'keypress', this.keyUpEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousedown', this.mouseDownEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(document, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler);\n        EventHandler.remove(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler);\n        EventHandler.remove(document, 'mouseup', this.canvasMouseUpHandler);\n    }\n    updateTheme() {\n        if (this.theme !== '') {\n            this.theme = this.toPascalCase(this.theme);\n        }\n    }\n    toPascalCase(str) {\n        const strArr = str.toLowerCase().split('-');\n        for (let i = 0; i < strArr.length; i++) {\n            strArr[i] = strArr[i].charAt(0).toUpperCase() + strArr[i].slice(1);\n        }\n        return strArr.join('');\n    }\n    createCanvas() {\n        const height = this.toolbarHeight;\n        this.element.style.width = this.width;\n        this.element.style.height = this.height;\n        const canvasWrapper = this.element.appendChild(this.createElement('div', { id: this.element.id + '_canvasWrapper',\n            className: 'e-canvas-wrapper', attrs: { style: 'height:' + (this.element.offsetHeight - height) + 'px; width:' +\n                    (this.element.offsetWidth)\n                    + 'px; position: relative; overflow: hidden; margin: 0 auto;' }\n        }));\n        this.lowerCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_lowerCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.upperCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_upperCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.inMemoryCanvas = this.createElement('canvas', {\n            id: this.element.id + '_inMemoryCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.textBox = canvasWrapper.appendChild(this.createElement('textarea', {\n            id: this.element.id + '_textBox', attrs: { name: 'textBox' }\n        }));\n        this.textBox.setAttribute('spellcheck', 'false');\n        this.upperCanvas.width = this.lowerCanvas.width = this.inMemoryCanvas.width = this.element.offsetWidth;\n        this.upperCanvas.height = this.lowerCanvas.height = this.inMemoryCanvas.height = (this.element.offsetHeight - this.toolbarHeight);\n        this.upperCanvas.style.position = this.lowerCanvas.style.position = this.textBox.style.position = 'absolute';\n        this.textBox.style.backgroundColor = 'transparent';\n        this.textBox.style.display = 'none';\n        this.textBox.style.resize = 'none';\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.baseImg = this.createElement('img', {\n            id: this.element.id + '_orgImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n        });\n        this.upperCanvas.style.cursor = 'default';\n        this.upperCanvas.style.display = 'none';\n        this.upperContext = this.upperCanvas.getContext('2d');\n        this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n    }\n    createToolbar() {\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.length > 0)) {\n            this.element.appendChild(this.createElement('div', {\n                id: this.element.id + '_toolbarArea', className: 'e-toolbar-area'\n            }));\n            if (this.toolbarTemplate) {\n                this.toolbarTemplateFn();\n            }\n            else {\n                const toolbarItems = { cssClass: 'e-image-upload', align: 'Left', type: 'Input', template: new Uploader({}) };\n                if (isNullOrUndefined(this.defToolbarItems)) {\n                    this.defToolbarItems = [];\n                }\n                this.defToolbarItems.push(toolbarItems);\n                const toolbarArea = document.getElementById(this.element.id + '_toolbarArea');\n                const toolbar = this.createElement('div', {\n                    id: this.element.id + '_toolbar'\n                });\n                toolbarArea.appendChild(toolbar);\n                const uploadItems = [\n                    {\n                        cssClass: 'e-image-upload',\n                        align: 'Left', type: 'Input',\n                        template: new Uploader({\n                            selected: () => {\n                                if (Browser.isDevice) {\n                                    if (this.defToolbarItems.length > 0 &&\n                                        (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                                        getComponent(document.getElementById(this.element.id + '_toolbar'), 'toolbar').destroy();\n                                    }\n                                    if (!isNullOrUndefined(document.getElementById(this.element.id + '_bottomToolbar'))) {\n                                        getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                                    }\n                                    this.initToolbarItem(false, Browser.isDevice);\n                                    this.createBottomToolbar();\n                                }\n                                else {\n                                    if (this.defToolbarItems.length > 0 &&\n                                        (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                                        getComponent(document.getElementById(this.element.id + '_toolbar'), 'toolbar').destroy();\n                                    }\n                                    this.initToolbarItem(false, false);\n                                }\n                            }\n                        })\n                    }\n                ];\n                new Toolbar({ items: uploadItems, width: '100%',\n                    created: () => {\n                        this.trigger('toolbarCreated', { toolbarType: 'main' });\n                    },\n                    clicked: this.defToolbarClicked.bind(this) }, '#' + this.element.id + '_toolbar');\n                this.createLeftToolbarControls();\n            }\n            if (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar'))) {\n                this.toolbarHeight = document.getElementById(this.element.id + '_toolbar').clientHeight;\n            }\n        }\n        else {\n            this.toolbarHeight = 0;\n        }\n    }\n    createBottomToolbar() {\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.length > 0)) {\n            this.element.appendChild(this.createElement('div', {\n                id: this.element.id + '_bottomToolbarArea', className: 'e-bottom-toolbar'\n            }));\n            if (!this.toolbarTemplate) {\n                document.getElementById(this.element.id + '_canvasWrapper').style.height = (this.element.offsetHeight\n                    - this.toolbarHeight * 2) - 3 + 'px';\n                const toolbarArea = document.getElementById(this.element.id + '_bottomToolbarArea');\n                const toolbarElem = this.createElement('div', {\n                    id: this.element.id + '_bottomToolbar'\n                });\n                toolbarArea.appendChild(toolbarElem);\n            }\n            this.initBottomToolbar();\n        }\n    }\n    initBottomToolbar() {\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.length > 0)) {\n            if (this.toolbarTemplate) {\n                this.toolbarTemplateFn();\n            }\n            else {\n                const items = this.getMainToolbarItem();\n                new Toolbar({ items: items, width: '100%',\n                    created: () => {\n                        this.renderAnnotationBtn();\n                        this.renderCropBtn();\n                        this.renderTransformBtn();\n                        this.trigger('toolbarCreated', { toolbarType: 'main' });\n                    },\n                    clicked: this.defToolbarClicked.bind(this)\n                }, '#' + this.element.id + '_bottomToolbar');\n                if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_bottomToolbar')))) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    const toolbar = getComponent(this.element.id + '_bottomToolbar', 'toolbar');\n                    toolbar.refreshOverflow();\n                }\n            }\n        }\n    }\n    toolbarTemplateFn() {\n        let template;\n        const templateID = this.element.id + '_toolbar';\n        const toolbarArea = this.element.querySelector('#' + this.element.id + '_toolbarArea');\n        if (this.toolbarTemplate) {\n            this.toolbarFn = this.templateParser(this.toolbarTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.isReact) {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            else if (this.isAngular) {\n                const templateColl = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID);\n                template = (templateColl[0].nodeType === 3) ? templateColl[1] : templateColl[0];\n            }\n            else {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n            }\n            toolbarArea.appendChild(template);\n            this.renderReactTemplates();\n        }\n    }\n    templateParser(template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return templateCompiler(template);\n            }\n        }\n        return undefined;\n    }\n    getLeftToolbarItem(isOkBtn) {\n        const toolbarItems = [];\n        if (!isOkBtn) {\n            toolbarItems.push({ cssClass: 'e-image-upload', align: 'Left', type: 'Input', template: new Uploader({}) });\n            toolbarItems.push({ visible: false, cssClass: 'e-image-position e-btn e-flat', tooltipText: 'Position', align: 'Left' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('ZoomOut') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_zoomOut', prefixIcon: 'e-icons e-zoom-out', cssClass: 'top-icon e-dec-zoom',\n                tooltipText: this.l10n.getConstant('ZoomOut'), align: 'Left' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('ZoomIn') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_zoomIn', prefixIcon: 'e-icons e-zoom-in', cssClass: 'top-icon e-inc-zoom',\n                tooltipText: this.l10n.getConstant('ZoomIn'), align: 'Left' });\n        }\n        const tempToolbarItems = this.processToolbar('left');\n        for (let i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    }\n    getRightToolbarItem(isOkBtn) {\n        const toolbarItems = [];\n        if (isOkBtn) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Reset') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_reset', prefixIcon: 'e-icons e-btn-reset', cssClass: 'top-icon e-img-reset',\n                tooltipText: this.l10n.getConstant('Reset'), align: 'Right' });\n        }\n        if (!isOkBtn) {\n            if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Save') > -1)) {\n                toolbarItems.push({ id: this.element.id + '_save', prefixIcon: 'e-icons e-btn-save', cssClass: 'top-icon e-save',\n                    tooltipText: this.l10n.getConstant('Save'), align: 'Right', template: '<button id=\"' + this.element.id + '_saveBtn\"></button>' });\n            }\n        }\n        const tempToolbarItems = this.processToolbar('right');\n        for (let i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    }\n    getMainToolbarItem(isApplyOption) {\n        const toolbarItems = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Crop') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_crop', tooltipText: this.l10n.getConstant('Crop'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_cropBtn\"></button>'\n            });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Annotate') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_annotationBtn\"></button>' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Transform') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_transform', tooltipText: this.l10n.getConstant('Transform'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_transformBtn\"></button>'\n            });\n        }\n        const tempToolbarItems = this.processToolbar('center');\n        for (let i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (isApplyOption) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    }\n    getZoomToolbarItem() {\n        let toolbarItems = [];\n        if (this.factor > 1) {\n            toolbarItems = [\n                { id: this.element.id + '_pan', prefixIcon: 'e-icons e-pan', cssClass: 'top-icon e-img-pan',\n                    tooltipText: this.l10n.getConstant('Pan'), align: 'Left' }\n            ];\n        }\n        return toolbarItems;\n    }\n    processToolbar(position) {\n        const toolbarItems = [];\n        if (this.toolbar) {\n            for (let i = 0, len = this.toolbar.length; i < len; i++) {\n                if (typeof (this.toolbar[i]) === 'object') {\n                    if (isNullOrUndefined(this.toolbar[i].align)) {\n                        if (position === 'left') {\n                            toolbarItems.push(this.toolbar[i]);\n                        }\n                    }\n                    else if (this.toolbar[i].align.toLowerCase() === position) {\n                        toolbarItems.push(this.toolbar[i]);\n                    }\n                }\n            }\n        }\n        return toolbarItems;\n    }\n    processSubToolbar(items) {\n        const toolbarItems = [];\n        if (items) {\n            for (let i = 0, len = items.length; i < len; i++) {\n                if (typeof (items[i]) === 'object') {\n                    items[i].align = 'Center';\n                    toolbarItems.push(items[i]);\n                }\n            }\n        }\n        return toolbarItems;\n    }\n    isToolbar() {\n        return (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.length > 0)\n            || !isNullOrUndefined(this.toolbarTemplate));\n    }\n    initToolbarItem(isApplyOption, isDevice, isOkBtn) {\n        if (this.isToolbar()) {\n            const leftItem = this.getLeftToolbarItem(isOkBtn);\n            const rightItem = this.getRightToolbarItem(isOkBtn);\n            const mainItem = this.getMainToolbarItem(isApplyOption);\n            const zoomItem = this.getZoomToolbarItem();\n            if (isDevice) {\n                this.defToolbarItems = [...leftItem, ...zoomItem, ...rightItem];\n            }\n            else {\n                this.defToolbarItems = [...leftItem, ...zoomItem, ...mainItem, ...rightItem];\n            }\n            new Toolbar({\n                width: '100%',\n                items: this.defToolbarItems,\n                clicked: this.defToolbarClicked.bind(this),\n                created: () => {\n                    if (!isDevice) {\n                        this.renderAnnotationBtn();\n                        this.renderCropBtn();\n                        this.renderTransformBtn();\n                    }\n                    this.renderSaveBtn();\n                    this.trigger('toolbarCreated', { toolbarType: 'main' });\n                }\n            }, '#' + this.element.id + '_toolbar');\n            this.createLeftToolbarControls();\n            const zoomIn = document.querySelector('#' + this.element.id + '_zoomIn');\n            if (!isNullOrUndefined(zoomIn) && this.factor >= 8) {\n                zoomIn.classList.add('e-disabled');\n            }\n            else if (!isNullOrUndefined(zoomIn)) {\n                zoomIn.classList.remove('e-disabled');\n            }\n            const zoomOut = document.querySelector('#' + this.element.id + '_zoomOut');\n            if (!isNullOrUndefined(zoomOut) && this.factor === 1) {\n                zoomOut.classList.add('e-disabled');\n            }\n            else if (!isNullOrUndefined(zoomOut)) {\n                zoomOut.classList.remove('e-disabled');\n            }\n            const pan = document.querySelector('#' + this.element.id + '_pan');\n            if (!isNullOrUndefined(pan) && this.factor === 1) {\n                pan.style.display = 'none';\n            }\n            else if (!isNullOrUndefined(pan)) {\n                pan.style.display = 'block';\n            }\n            if (this.isToolbar() && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                const toolbar = getComponent(this.element.id + '_toolbar', 'toolbar');\n                toolbar.refreshOverflow();\n            }\n        }\n    }\n    createLeftToolbarControls() {\n        if (this.defToolbarItems !== undefined && this.defToolbarItems.length > 0 &&\n            (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n            const uploadDiv = document.getElementById(this.element.id + '_toolbar')\n                .querySelector('.e-image-upload');\n            if (uploadDiv) {\n                const uploadElem = uploadDiv.getElementsByTagName('input')[0];\n                const uploadBtnElem = uploadDiv.getElementsByTagName('button')[0];\n                uploadBtnElem.className = 'e-tbar-btn e-tbtn-txt e-btn top-icon';\n                uploadBtnElem.innerHTML = '';\n                uploadBtnElem.appendChild(this.createElement('span', {\n                    className: 'e-btn-icon e-icons e-upload-icon e-icon-left'\n                }));\n                uploadElem.onchange = this.fileSelect.bind(this, uploadElem);\n            }\n        }\n    }\n    renderAnnotationBtn() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const proxy = this;\n        const items = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Pen') > -1)) {\n            items.push({ text: this.l10n.getConstant('Pen'), id: 'pen', iconCss: 'e-icons e-free-pen' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Line') > -1)) {\n            items.push({ text: this.l10n.getConstant('Line'), id: 'line', iconCss: 'e-icons e-line' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Rectangle') > -1)) {\n            items.push({ text: this.l10n.getConstant('Rectangle'), id: 'rectangle', iconCss: 'e-icons e-rectangle' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Ellipse') > -1)) {\n            items.push({ text: this.l10n.getConstant('Ellipse'), id: 'ellipse', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Text') > -1)) {\n            items.push({ text: this.l10n.getConstant('Text'), id: 'text', iconCss: 'e-icons e-add-text' });\n        }\n        const drpDownBtn = new DropDownButton({ items: items, iconCss: 'e-icons e-annotation',\n            cssClass: 'e-image-popup',\n            open: (args) => {\n                if (this.togglePan) {\n                    this.cancelPan();\n                }\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n            },\n            select: (args) => {\n                let isCropSelection = false;\n                let splitWords;\n                if (this.activeObj.shape !== undefined) {\n                    splitWords = this.activeObj.shape.split('-');\n                }\n                if (splitWords === undefined && this.currObjType.isCustomCrop) {\n                    isCropSelection = true;\n                }\n                else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                    isCropSelection = true;\n                }\n                this.currObjType.isCustomCrop = false;\n                if (isCropSelection || this.togglePan) {\n                    this.refreshActiveObj();\n                    this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                    this.refreshToolbar('main');\n                }\n                switch (args.item.id) {\n                    case 'pen':\n                        proxy.currentToolbar = 'pen';\n                        this.freeHandDraw(true);\n                        break;\n                    case 'text':\n                        proxy.currentToolbar = 'text';\n                        this.drawShapeText();\n                        break;\n                    default:\n                        proxy.currentToolbar = 'shapes';\n                        proxy.drawShape((args.item.id).toLowerCase());\n                        break;\n                }\n                this.updateToolbarItems(this.calcRatio());\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + this.element.id + '_annotationBtn');\n    }\n    renderCropBtn() {\n        const items = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('CustomSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Custom'), id: 'custom', iconCss: 'e-icons e-custom' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('CircleSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Circle'), id: 'ellipse', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('SquareSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Square'), id: 'square', iconCss: 'e-icons e-square' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('RatioSelection') > -1)) {\n            items.push({ text: '3:2', id: '3:2', iconCss: 'e-icons e-custom-a' });\n            items.push({ text: '4:3', id: '4:3', iconCss: 'e-icons e-custom-b' });\n            items.push({ text: '5:4', id: '5:4', iconCss: 'e-icons e-custom-c' });\n            items.push({ text: '7:5', id: '7:5', iconCss: 'e-icons e-custom-d' });\n            items.push({ text: '16:9', id: '16:9', iconCss: 'e-icons e-custom-e' });\n        }\n        const drpDownBtn = new DropDownButton({\n            open: (args) => {\n                if (this.togglePan) {\n                    this.cancelPan();\n                }\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n            },\n            items: items, select: this.cropSelect.bind(this),\n            iconCss: 'e-icons e-select', cssClass: 'e-image-popup'\n        });\n        drpDownBtn.appendTo('#' + this.element.id + '_cropBtn');\n    }\n    renderTransformBtn() {\n        const items = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('RotateLeft') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateLeft'), id: 'rotateleft', iconCss: 'e-icons e-anti-clock-wise' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('RotateRight') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateRight'), id: 'rotateright', iconCss: 'e-icons e-clock-wise' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('FlipHorizontal') > -1)) {\n            items.push({ text: this.l10n.getConstant('HorizontalFlip'), id: 'horizontalflip', iconCss: 'e-icons e-horizontal-flip' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('FlipVertical') > -1)) {\n            items.push({ text: this.l10n.getConstant('VerticalFlip'), id: 'verticalflip', iconCss: 'e-icons e-vertical-flip' });\n        }\n        const drpDownBtn = new DropDownButton({\n            open: (args) => {\n                if (this.togglePan) {\n                    this.cancelPan();\n                }\n                if (Browser.isDevice) {\n                    const ht = args.element.parentElement.offsetHeight;\n                    args.element.parentElement.style.display = 'none';\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        ht + 'px';\n                    args.element.parentElement.style.display = 'block';\n                }\n            },\n            items: items, select: this.transformSelect.bind(this),\n            iconCss: 'e-icons e-transform', cssClass: 'e-image-popup'\n        });\n        drpDownBtn.appendTo('#' + this.element.id + '_transformBtn');\n    }\n    renderSaveBtn() {\n        const imageEditorObj = getInstance(document.getElementById(this.element.id), ImageEditor_1);\n        const saveItems = [\n            { text: 'JPEG', id: 'jpeg' },\n            { text: 'PNG', id: 'png' },\n            { text: 'SVG', id: 'svg' }\n        ];\n        const ddbElem = document.getElementById(this.element.id + '_saveBtn');\n        if (ddbElem) {\n            // Initialize the DropDownButton component.\n            const saveDrpDownBtn = new DropDownButton({ items: saveItems, cssClass: 'e-caret-hide e-image-popup', iconCss: 'e-icons e-save',\n                select: (args) => {\n                    if (this.togglePan) {\n                        this.cancelPan();\n                    }\n                    imageEditorObj.export(args.item.text);\n                }\n            });\n            saveDrpDownBtn.appendTo('#' + this.element.id + '_saveBtn');\n        }\n    }\n    cropSelect(args) {\n        const text = args.item.text;\n        this.select(text);\n        this.refreshToolbar('main', true, true);\n    }\n    transformSelect(args) {\n        const text = args.item.id;\n        switch (text) {\n            case 'rotateleft':\n                this.rotate(-90);\n                break;\n            case 'rotateright':\n                this.rotate(90);\n                break;\n            case 'horizontalflip':\n                this.flip('Horizontal');\n                break;\n            case 'verticalflip':\n                this.flip('Vertical');\n                break;\n        }\n    }\n    getShapesToolbarItem(items) {\n        const toolbarItems = [];\n        if (items.indexOf('fillColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: this.element.id + '_fillcolor',\n                cssClass: 'top-icon e-fill', tooltipText: this.l10n.getConstant('FillColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + this.element.id + '_fillColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: this.element.id + '_strokecolor',\n                cssClass: 'top-icon e-stroke', tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + this.element.id + '_borderColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ id: this.element.id + '_strokeWidth', cssClass: 'top-icon e-size', tooltipText: 'Stroke Width', align: 'Center',\n                type: 'Input', template: '<button id=\"' + this.element.id + '_borderWidthBtn\"></button>' });\n        }\n        const tempToolbarItems = this.processSubToolbar(items);\n        for (let i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    }\n    initShapesToolbarItem(items) {\n        const leftItem = this.getLeftToolbarItem();\n        const rightItem = this.getRightToolbarItem();\n        const mainItem = this.getShapesToolbarItem(items);\n        const zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = [...leftItem, ...zoomItem, ...mainItem, ...rightItem];\n        }\n        const toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: () => {\n                this.createShapeColor(items);\n                this.createShapeBtn(items);\n                if (!Browser.isDevice) {\n                    this.renderSaveBtn();\n                }\n                this.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_bottomToolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    this.createLeftToolbarControls();\n                    if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + this.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + this.element.id + '_toolbar');\n        }\n    }\n    createShapeColor(items) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const proxy = this;\n        if (items.indexOf('fillColor') > -1) {\n            this.element.querySelector('.e-template.e-fill').appendChild(this.createElement('input', {\n                id: this.element.id + '_shape_fill'\n            }));\n            const fillColor = new ColorPicker({\n                modeSwitcher: false, noColor: true, value: '',\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-fill-color',\n                change: (args) => {\n                    proxy.activeObj.strokeSettings.fillColor = args.currentValue.hex;\n                    proxy.strokeSettings.fillColor = proxy.activeObj.strokeSettings.fillColor;\n                    proxy.redrawShape(this.activeObj);\n                    if (args.currentValue.rgba === '') {\n                        fillDDB.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        fillDDB.element.children[0].classList.remove('e-nocolor-item');\n                        fillDDB.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                    fillDDB.toggle();\n                }\n            }, '#' + this.element.id + '_shape_fill');\n            const fillDDB = new DropDownButton({\n                open: (args) => {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fillDDB.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = this.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-shape-fill-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + this.element.id + '_fillColorBtn');\n            fillColor.inline = true;\n            this.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview').classList.add('e-nocolor-item');\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            this.element.querySelector('.e-template.e-stroke').appendChild(this.createElement('input', {\n                id: this.element.id + '_shape_stroke'\n            }));\n            const strokeColor = new ColorPicker({\n                modeSwitcher: false, noColor: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-stroke-color',\n                change: (args) => {\n                    proxy.activeObj.strokeSettings.strokeColor = args.currentValue.hex;\n                    proxy.strokeSettings.strokeColor = proxy.activeObj.strokeSettings.strokeColor;\n                    if (!proxy.togglePen) {\n                        proxy.redrawShape(this.activeObj);\n                    }\n                    strokeDDB.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB.toggle();\n                }\n            }, '#' + this.element.id + '_shape_stroke');\n            const strokeDDB = new DropDownButton({\n                open: (args) => {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = this.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-shape-stroke-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + this.element.id + '_borderColorBtn');\n            strokeColor.inline = true;\n            this.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview').style.background = '#fff';\n        }\n    }\n    createShapeBtn(items) {\n        const strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('XSmall') },\n            { id: '2', text: this.l10n.getConstant('Small') },\n            { id: '3', text: this.l10n.getConstant('Medium') },\n            { id: '4', text: this.l10n.getConstant('Large') },\n            { id: '5', text: this.l10n.getConstant('XLarge') }\n        ];\n        const ratio = this.calcRatio();\n        if (items.indexOf('strokeWidth') > -1) {\n            const strokeWidthBtn = document.getElementById(this.element.id + '_borderWidthBtn');\n            const spanElem = document.createElement('span');\n            spanElem.innerHTML = this.l10n.getConstant('Small');\n            spanElem.className = 'e-shape-stroke-width';\n            strokeWidthBtn.appendChild(spanElem);\n            // Initialize the DropDownButton component.\n            const drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n                open: (args) => {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    const activeBtn = spanElem.innerHTML;\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: (args) => {\n                    spanElem.textContent = args.item.text;\n                    this.activeObj.strokeSettings.strokeWidth = parseInt(args.item.id, 10);\n                    if (this.lowerCanvas.width > this.lowerCanvas.height) {\n                        this.activeObj.strokeSettings.strokeWidth *= ((ratio.width + ratio.height) / this.factor);\n                    }\n                    else {\n                        this.activeObj.strokeSettings.strokeWidth *= ((ratio.height + ratio.width) / this.factor);\n                    }\n                    this.strokeSettings.strokeWidth = this.activeObj.strokeSettings.strokeWidth;\n                    this.redrawShape(this.activeObj);\n                    if (Browser.isDevice) {\n                        if (!isNullOrUndefined(document.getElementById(this.element.id + '_bottomToolbar'))) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            const toolbar = getComponent(this.element.id + '_bottomToolbar', 'toolbar');\n                            toolbar.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar'))) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            const toolbar = getComponent(this.element.id + '_toolbar', 'toolbar');\n                            toolbar.refreshOverflow();\n                        }\n                    }\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn.appendTo('#' + this.element.id + '_borderWidthBtn');\n        }\n    }\n    getTextToolbarItem(items) {\n        const toolbarItems = [];\n        if (items.indexOf('fontFamily') > -1) {\n            toolbarItems.push({ id: this.element.id + '_fontFamily', cssClass: 'top-icon e-img-font-family',\n                tooltipText: this.l10n.getConstant('FontFamily'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_fontFamilyBtn\"></button>' });\n        }\n        if (items.indexOf('fontStyle') > -1) {\n            toolbarItems.push({ id: this.element.id + '_fontStyle', cssClass: 'top-icon e-img-font-style',\n                tooltipText: this.l10n.getConstant('FontStyle'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_fontStyleBtn\"></button>' });\n        }\n        if (items.indexOf('fontSize') > -1) {\n            toolbarItems.push({ id: this.element.id + '_fontSize', cssClass: 'top-icon e-img-font-size',\n                tooltipText: this.l10n.getConstant('FontSize'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_fontSizeBtn\"></button>' });\n        }\n        if (items.indexOf('fontColor') > -1) {\n            toolbarItems.push({ cssClass: 'top-icon e-text-font-color', id: this.element.id + '_text_strokecolor',\n                tooltipText: this.l10n.getConstant('FontColor'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + this.element.id + '_fontColorBtn\"></button>' });\n        }\n        const tempToolbarItems = this.processSubToolbar(items);\n        for (let i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    }\n    getFontFamilyItems() {\n        if (Browser.isDevice) {\n            return [{ id: 'arial', text: 'ABC' }, { id: 'calibri', text: 'ABC' }, { id: 'georgia', text: 'ABC' },\n                { id: 'roboto', text: 'ABC' }, { id: 'tahoma', text: 'ABC' }];\n        }\n        return [{ id: 'arial', text: 'Arial' }, { id: 'calibri', text: 'Calibri' }, { id: 'georgia', text: 'Georgia' },\n            { id: 'roboto', text: 'Roboto' }, { id: 'tahoma', text: 'Tahoma' }];\n    }\n    getFontSizeItems() {\n        if (Browser.isDevice) {\n            return [{ id: 'default', text: this.l10n.getConstant('ABC') }, { id: 'bold', text: this.l10n.getConstant('ABC') },\n                { id: 'italic', text: this.l10n.getConstant('ABC') }, { id: 'bolditalic', text: this.l10n.getConstant('ABC') }];\n        }\n        return [{ id: 'default', text: this.l10n.getConstant('Default') }, { id: 'bold', text: this.l10n.getConstant('Bold') },\n            { id: 'italic', text: this.l10n.getConstant('Italic') }, { id: 'bolditalic', text: this.l10n.getConstant('BoldItalic') }];\n    }\n    initTextToolbarItem(items) {\n        const leftItem = this.getLeftToolbarItem();\n        const rightItem = this.getRightToolbarItem();\n        const mainItem = this.getTextToolbarItem(items);\n        const zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = [...leftItem, ...zoomItem, ...mainItem, ...rightItem];\n        }\n        const toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: () => {\n                this.createTextColor(items);\n                this.createTextBtn(items);\n                if (!Browser.isDevice) {\n                    this.renderSaveBtn();\n                }\n                this.trigger('toolbarCreated', { toolbarType: 'text' });\n                if (Browser.isDevice) {\n                    if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_bottomToolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    this.createLeftToolbarControls();\n                    if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + this.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + this.element.id + '_toolbar');\n        }\n    }\n    createTextColor(items) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const proxy = this;\n        if (items.indexOf('fontColor') > -1) {\n            this.element.querySelector('.e-template.e-text-font-color').appendChild(this.createElement('input', {\n                id: this.element.id + '_text_font'\n            }));\n            const fontColor = new ColorPicker({\n                modeSwitcher: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-text-fontt-color',\n                change: (args) => {\n                    if (proxy.textBox.style.display === 'none') {\n                        proxy.strokeSettings.strokeColor = proxy.activeObj.strokeSettings.strokeColor = args.currentValue.hex;\n                        if (!proxy.togglePen) {\n                            proxy.redrawShape(this.activeObj);\n                        }\n                    }\n                    else if (proxy.textBox.style.display === 'block') {\n                        proxy.textBox.style.color = args.currentValue.hex;\n                    }\n                    else if (!proxy.togglePen) {\n                        proxy.redrawShape(this.activeObj);\n                    }\n                    strokeDDB.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB.toggle();\n                }\n            }, '#' + this.element.id + '_text_font');\n            const strokeDDB = new DropDownButton({\n                open: (args) => {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = this.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-text-fontt-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + this.element.id + '_fontColorBtn');\n            fontColor.inline = true;\n            this.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview').style.background\n                = '#fff';\n        }\n    }\n    createTextBtn(items) {\n        const ratio = this.calcRatio();\n        if (items.indexOf('fontFamily') > -1) {\n            const fontNameBtn = document.getElementById(this.element.id + '_fontFamilyBtn');\n            const spanElem = document.createElement('span');\n            if (Browser.isDevice) {\n                spanElem.innerHTML = 'ABC';\n                spanElem.setAttribute('style', 'font-family: arial');\n            }\n            else {\n                spanElem.innerHTML = 'Arial';\n            }\n            spanElem.className = 'e-text-font-family';\n            fontNameBtn.appendChild(spanElem);\n            const fontFamilyBtn = new DropDownButton({ items: this.getFontFamilyItems(),\n                cssClass: 'e-font-family',\n                createPopupOnClick: true,\n                beforeItemRender: (args) => {\n                    args.element.setAttribute('style', 'font-family:' + args.element.id);\n                },\n                open: (args) => {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontFamilyBtn.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    let fontFamily;\n                    if (this.textBox.style.display === 'block') {\n                        fontFamily = this.textBox.style.fontFamily;\n                    }\n                    else {\n                        fontFamily = this.activeObj.textSettings.fontFamily;\n                    }\n                    args.element.querySelector('[id *= ' + '\"' + fontFamily.toLowerCase()\n                        + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: (args) => {\n                    spanElem.textContent = args.item.text;\n                    if (Browser.isDevice) {\n                        spanElem.setAttribute('style', 'font-family:' + args.item.id);\n                    }\n                    if (this.textBox.style.display === 'block') {\n                        const temp = this.activeObj.textSettings.fontFamily;\n                        this.activeObj.textSettings.fontFamily = this.toPascalCase(args.item.id);\n                        this.updateFontStyles();\n                        const width = this.upperContext.measureText(this.activeObj.keyHistory).width +\n                            this.activeObj.textSettings.fontSize * 0.5;\n                        this.textBox.style.width = Browser.isDevice ? width + 'px' : (width * ((ratio.width + ratio.height) / 2)) + 'px';\n                        this.textBox.style.fontFamily = this.toPascalCase(args.item.id);\n                        this.activeObj.textSettings.fontFamily = temp;\n                        this.updateFontStyles();\n                    }\n                    else {\n                        this.textSettings.fontFamily = this.activeObj.textSettings.fontFamily = this.toPascalCase(args.item.id);\n                        this.redrawText(ratio);\n                        this.redrawShape(this.activeObj);\n                    }\n                }\n            });\n            fontFamilyBtn.appendTo('#' + this.element.id + '_fontFamilyBtn');\n        }\n        if (items.indexOf('fontStyle') > -1) {\n            const fontStyleBtnElem = document.getElementById(this.element.id + '_fontStyleBtn');\n            const span1Elem = document.createElement('span');\n            if (Browser.isDevice) {\n                span1Elem.innerHTML = this.l10n.getConstant('ABC');\n            }\n            else {\n                span1Elem.innerHTML = this.l10n.getConstant('Default');\n            }\n            span1Elem.className = 'e-text-font-style';\n            fontStyleBtnElem.appendChild(span1Elem);\n            const fontStyleBtn = new DropDownButton({ items: this.getFontSizeItems(),\n                cssClass: 'e-font-style',\n                createPopupOnClick: true,\n                beforeItemRender: (args) => {\n                    if (Browser.isDevice) {\n                        if (args.element.id === 'bold') {\n                            args.element.setAttribute('style', 'font-weight: bold');\n                        }\n                        else if (args.element.id === 'italic') {\n                            args.element.setAttribute('style', 'font-style: italic');\n                        }\n                        else if (args.element.id === 'bolditalic') {\n                            args.element.setAttribute('style', 'font-style: italic;font-weight: bold');\n                        }\n                    }\n                },\n                open: (args) => {\n                    let fontStyle = 'default';\n                    if (this.textBox.style.display === 'block') {\n                        if (this.textBox.style.fontWeight === 'bold') {\n                            fontStyle = 'bold';\n                        }\n                        if (this.textBox.style.fontStyle === 'italic') {\n                            fontStyle = fontStyle.replace('default', '');\n                            fontStyle += 'italic';\n                        }\n                    }\n                    else {\n                        if (this.activeObj.textSettings.bold) {\n                            fontStyle = 'bold';\n                        }\n                        if (this.activeObj.textSettings.italic) {\n                            fontStyle = fontStyle.replace('default', '');\n                            fontStyle += 'italic';\n                        }\n                    }\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontStyleBtn.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    args.element.querySelector('[id *= ' + '\"' + fontStyle + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: (args) => {\n                    if (Browser.isDevice) {\n                        if (args.item.id === 'bold') {\n                            span1Elem.setAttribute('style', 'font-weight: bold');\n                        }\n                        else if (args.item.id === 'italic') {\n                            span1Elem.setAttribute('style', 'font-style: italic');\n                        }\n                        else if (args.item.id === 'bolditalic') {\n                            span1Elem.setAttribute('style', 'font-style: italic;font-weight: bold');\n                        }\n                        this.applyFontStyle(args.item.id, ratio);\n                    }\n                    else {\n                        span1Elem.textContent = args.item.text;\n                        this.applyFontStyle(args.item.id, ratio);\n                    }\n                }\n            });\n            fontStyleBtn.appendTo('#' + this.element.id + '_fontStyleBtn');\n        }\n        if (items.indexOf('fontSize') > -1) {\n            const fontSizeBtnElem = document.getElementById(this.element.id + '_fontSizeBtn');\n            const fontSizeSpanElem = document.createElement('span');\n            const fontSizes = this.getFontSizes();\n            fontSizeSpanElem.innerHTML = fontSizes[0].text;\n            fontSizeSpanElem.className = 'e-text-font-size';\n            fontSizeBtnElem.appendChild(fontSizeSpanElem);\n            const fontSizeBtn = new DropDownButton({\n                cssClass: 'e-font-size',\n                items: fontSizes,\n                open: (args) => {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontSizeBtn.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    const activeBtn = fontSizeSpanElem.innerHTML;\n                    args.element.querySelector('[aria-label *= ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: (args) => {\n                    fontSizeSpanElem.textContent = args.item.text;\n                    if (this.textBox.style.display === 'block') {\n                        const temp = this.activeObj.textSettings.fontSize;\n                        this.activeObj.textSettings.fontSize = parseInt(this.fontSizeColl[(parseInt(args.item.text, 10) - 1)].text, 10);\n                        let textStyle = '';\n                        if (this.textBox.style.fontWeight === 'bold') {\n                            textStyle = 'bold ';\n                        }\n                        if (this.textBox.style.fontStyle === 'italic') {\n                            textStyle = 'italic ';\n                        }\n                        if (this.textBox.style.fontWeight === 'bold' && this.textBox.style.fontStyle === 'italic') {\n                            textStyle = 'italic bold ';\n                        }\n                        this.upperContext.font = textStyle + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.textBox.style.fontFamily;\n                        const rows = this.textBox.value.split('\\n');\n                        const text = this.getMaxText(true);\n                        const width = this.upperContext.measureText(text).width +\n                            this.activeObj.textSettings.fontSize * 0.5;\n                        this.textBox.style.width = width + 'px';\n                        this.textBox.style.height = rows.length * (this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25) + 'px';\n                        this.activeObj.textSettings.fontSize = temp;\n                        this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n                        this.textBox.style.fontSize = parseInt(this.fontSizeColl[(parseInt(args.item.text, 10) - 1)].text, 10) + 'px';\n                        if (this.textBox.style.fontFamily === 'georgia') {\n                            this.textBox.style.width = parseFloat(this.textBox.style.width) + parseFloat(this.textBox.style.fontSize) + 'px';\n                        }\n                    }\n                    else {\n                        this.textSettings.fontSize = this.activeObj.textSettings.fontSize = parseInt(this.fontSizeColl[(parseInt(args.item.text, 10) - 1)].text, 10);\n                        this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n                        const rows = this.activeObj.keyHistory.split('\\n');\n                        const text = this.getMaxText();\n                        const width = this.upperContext.measureText(text).width +\n                            this.activeObj.textSettings.fontSize * 0.5;\n                        const height = rows.length * (this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25);\n                        this.setTextSelection(width, height);\n                        this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n                        this.redrawShape(this.activeObj);\n                        this.redrawText(ratio);\n                    }\n                }\n            });\n            fontSizeBtn.appendTo('#' + this.element.id + '_fontSizeBtn');\n        }\n    }\n    getFontSizes() {\n        const items = [];\n        this.fontSizeColl = [];\n        let fontSize;\n        if (this.degree === 0 || this.degree % 180 === 0) {\n            fontSize = this.lowerCanvas.width / 20;\n        }\n        else {\n            fontSize = this.lowerCanvas.height / 20;\n        }\n        for (let i = 1; i <= 10; i++) {\n            this.fontSizeColl.push({ text: (i * (Math.round(fontSize / 2))).toString() });\n            items.push({ text: (i.toString()) });\n        }\n        return items;\n    }\n    getTextAreaWidth(item) {\n        const tempBold = this.activeObj.textSettings.bold;\n        const tempItalic = this.activeObj.textSettings.italic;\n        switch (item) {\n            case 'default':\n                this.activeObj.textSettings.bold = false;\n                this.activeObj.textSettings.italic = false;\n                break;\n            case 'bold':\n                this.activeObj.textSettings.bold = true;\n                this.activeObj.textSettings.italic = false;\n                break;\n            case 'italic':\n                this.activeObj.textSettings.bold = false;\n                this.activeObj.textSettings.italic = true;\n                break;\n            case 'bolditalic':\n                this.activeObj.textSettings.bold = true;\n                this.activeObj.textSettings.italic = true;\n                break;\n        }\n        this.updateFontStyles();\n        const width = this.upperContext.measureText(this.activeObj.keyHistory).width +\n            this.activeObj.textSettings.fontSize * 0.5;\n        this.activeObj.textSettings.bold = tempBold;\n        this.activeObj.textSettings.italic = tempItalic;\n        return width;\n    }\n    applyFontStyle(item, ratio) {\n        switch (item) {\n            case 'default':\n                if (this.textBox.style.display === 'block') {\n                    const width = this.getTextAreaWidth(item);\n                    this.textBox.style.width = Browser.isDevice ? width + 'px' : (width * ((ratio.width + ratio.height) / 2)) + 'px';\n                    this.textBox.style.fontWeight = 'normal';\n                    this.textBox.style.fontStyle = 'normal';\n                }\n                else {\n                    this.textSettings.bold = this.activeObj.textSettings.bold = false;\n                    this.textSettings.italic = this.activeObj.textSettings.italic = false;\n                    this.redrawText(ratio);\n                }\n                break;\n            case 'bold':\n                if (this.textBox.style.display === 'block') {\n                    const width = this.getTextAreaWidth(item);\n                    this.textBox.style.width = Browser.isDevice ? width + 'px' : (width * ((ratio.width + ratio.height) / 2)) + 'px';\n                    this.textBox.style.fontWeight = 'bold';\n                    this.textBox.style.fontStyle = 'normal';\n                }\n                else {\n                    this.textSettings.bold = this.activeObj.textSettings.bold = true;\n                    this.textSettings.italic = this.activeObj.textSettings.italic = false;\n                    this.redrawText(ratio);\n                }\n                break;\n            case 'italic':\n                if (this.textBox.style.display === 'block') {\n                    const width = this.getTextAreaWidth(item);\n                    this.textBox.style.width = Browser.isDevice ? width + 'px' : (width * ((ratio.width + ratio.height) / 2)) + 'px';\n                    this.textBox.style.fontWeight = 'normal';\n                    this.textBox.style.fontStyle = 'italic';\n                }\n                else {\n                    this.textSettings.bold = this.activeObj.textSettings.bold = false;\n                    this.textSettings.italic = this.activeObj.textSettings.italic = true;\n                    this.redrawText(ratio);\n                }\n                break;\n            case 'bolditalic':\n                if (this.textBox.style.display === 'block') {\n                    const width = this.getTextAreaWidth(item);\n                    this.textBox.style.width = (width / ratio.width) + 'px';\n                    this.textBox.style.fontWeight = 'bold';\n                    this.textBox.style.fontStyle = 'italic';\n                }\n                else {\n                    this.textSettings.bold = this.activeObj.textSettings.bold = true;\n                    this.textSettings.italic = this.activeObj.textSettings.italic = true;\n                    this.redrawText(ratio);\n                }\n                break;\n        }\n    }\n    initZoomToolbarItem() {\n        const leftItem = this.getLeftToolbarItem();\n        const rightItem = this.getRightToolbarItem();\n        const zoomItem = this.getZoomToolbarItem();\n        this.defToolbarItems = [...leftItem, ...zoomItem, ...rightItem];\n        new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: () => {\n                this.renderSaveBtn();\n                this.trigger('toolbarCreated', { toolbarType: 'zoom' });\n            }\n        }, '#' + this.element.id + '_toolbar');\n        this.createLeftToolbarControls();\n        if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            const toolbar = getComponent(this.element.id + '_toolbar', 'toolbar');\n            toolbar.refreshOverflow();\n        }\n    }\n    defToolbarClicked(args) {\n        const ratio = this.calcRatio();\n        let zoomIn;\n        const type = args.item.id.replace(this.element.id + '_', '').toLowerCase();\n        const imageEditorObj = getInstance(document.getElementById(this.element.id), ImageEditor_1);\n        let isCropSelection = false;\n        let panBtn;\n        let splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && this.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (!this.disabled) {\n            switch (type) {\n                case 'zoomin':\n                    if (this.togglePen) {\n                        this.currObjType.isZoomed = true;\n                        this.freeHandDraw(false);\n                    }\n                    imageEditorObj.zoom(.1);\n                    if (!this.togglePan) {\n                        this.callMainToolbar(false, true);\n                    }\n                    if (this.factor > 0.95 && this.factor < 1.05) {\n                        this.dragCanvas = this.togglePan = false;\n                        this.callMainToolbar(false, true);\n                    }\n                    if (isNullOrUndefined(this.activeObj.activePoint) || this.activeObj.activePoint.width === 0) {\n                        this.refreshToolbar('main');\n                    }\n                    else {\n                        this.refreshToolbar('main', true, true);\n                    }\n                    panBtn = this.element.querySelector('.e-img-pan .e-btn');\n                    if (!isNullOrUndefined(panBtn) && this.togglePan) {\n                        panBtn.classList.add('e-selected-btn');\n                    }\n                    else if (!isNullOrUndefined(panBtn)) {\n                        panBtn.classList.remove('e-selected-btn');\n                    }\n                    break;\n                case 'zoomout':\n                    if (this.togglePen) {\n                        this.currObjType.isZoomed = true;\n                        this.freeHandDraw(false);\n                    }\n                    imageEditorObj.zoom(-.1);\n                    if (!this.togglePan) {\n                        this.callMainToolbar(false, true);\n                    }\n                    if (this.factor > 0.95 && this.factor < 1.05) {\n                        this.dragCanvas = this.togglePan = false;\n                        this.callMainToolbar(false, true);\n                    }\n                    if (isNullOrUndefined(this.activeObj.activePoint) || this.activeObj.activePoint.width === 0) {\n                        this.refreshToolbar('main');\n                    }\n                    else {\n                        this.refreshToolbar('main', true, true);\n                    }\n                    panBtn = this.element.querySelector('.e-img-pan .e-btn');\n                    if (!isNullOrUndefined(panBtn) && this.togglePan) {\n                        panBtn.classList.add('e-selected-btn');\n                    }\n                    else if (!isNullOrUndefined(panBtn)) {\n                        panBtn.classList.remove('e-selected-btn');\n                    }\n                    break;\n                case 'pan':\n                    this.currObjType.isCustomCrop = false;\n                    if (isCropSelection) {\n                        this.currObjType.isCustomCrop = false;\n                        this.refreshActiveObj();\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.refreshToolbar('main');\n                    }\n                    if (this.togglePan) {\n                        this.cancelPan();\n                    }\n                    else {\n                        panBtn = this.element.querySelector('.e-img-pan .e-btn');\n                        panBtn.classList.add('e-selected-btn');\n                        imageEditorObj.pan(true);\n                    }\n                    zoomIn = document.querySelector('#' + this.element.id + '_zoomIn');\n                    if (!isNullOrUndefined(zoomIn) && this.factor >= 8) {\n                        zoomIn.classList.add('e-disabled');\n                    }\n                    else if (!isNullOrUndefined(zoomIn)) {\n                        zoomIn.classList.remove('e-disabled');\n                    }\n                    break;\n                case 'cancel':\n                    if (this.textBox.style.display === 'block') {\n                        this.textBox.style.display = 'none';\n                        this.textBox.value = '';\n                        this.textBox.style.transform = '';\n                        this.activeObj.strokeSettings = this.tempStrokeSettings;\n                        this.activeObj.textSettings = this.tempTextSettings;\n                    }\n                    this.cancelItems();\n                    break;\n                case 'ok':\n                    if (isCropSelection) {\n                        this.crop();\n                    }\n                    else if (this.togglePen) {\n                        this.freeHandDraw(false);\n                    }\n                    else if (this.textBox.style.display === 'block') {\n                        this.redrawActObj();\n                    }\n                    else {\n                        this.applyActObj();\n                    }\n                    this.callMainToolbar(false);\n                    break;\n                case 'text':\n                    this.currObjType.isCustomCrop = false;\n                    imageEditorObj.drawShapeText();\n                    this.refreshToolbar(type);\n                    break;\n                case 'pen':\n                    this.currObjType.isCustomCrop = false;\n                    this.freeHandDraw(true);\n                    this.refreshToolbar(type);\n                    break;\n                case 'reset':\n                    imageEditorObj.reset();\n                    break;\n                case 'load':\n                    break;\n                case 'save':\n                    break;\n                case 'select':\n                    break;\n                case 'bold':\n                    this.currObjType.isCustomCrop = false;\n                    if (!this.isBoldbtn) {\n                        this.activeObj.textSettings.bold = true;\n                        this.isBoldbtn = true;\n                        this.redrawText(ratio);\n                    }\n                    else {\n                        this.activeObj.textSettings.bold = false;\n                        this.isBoldbtn = false;\n                        this.redrawText(ratio);\n                    }\n                    break;\n                case 'italic':\n                    this.currObjType.isCustomCrop = false;\n                    if (!this.isItalicbtn) {\n                        this.activeObj.textSettings.italic = true;\n                        if (this.activeObj.textSettings.bold) {\n                            this.upperContext.font = 'italic bold ' + this.activeObj.textSettings.fontSize + 'px' +\n                                ' ' + this.activeObj.textSettings.fontFamily;\n                        }\n                        else {\n                            this.upperContext.font = 'italic ' + this.activeObj.textSettings.fontSize + 'px' + ' ' +\n                                this.activeObj.textSettings.fontFamily;\n                        }\n                        const width = this.upperContext.measureText(this.activeObj.keyHistory).width +\n                            this.activeObj.textSettings.fontSize * 0.5;\n                        const height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n                        this.setTextSelection(width, height);\n                        this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n                        this.redrawShape(this.activeObj);\n                        this.isItalicbtn = true;\n                    }\n                    else {\n                        this.activeObj.textSettings.italic = false;\n                        if (this.activeObj.textSettings.bold) {\n                            this.upperContext.font = 'bold ' + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n                        }\n                        else {\n                            this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n                        }\n                        const width = this.upperContext.measureText(this.activeObj.keyHistory).width +\n                            this.activeObj.textSettings.fontSize * 0.5;\n                        const height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n                        this.setTextSelection(width, height);\n                        this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n                        this.redrawShape(this.activeObj);\n                        this.isItalicbtn = false;\n                    }\n                    break;\n            }\n        }\n        this.trigger('toolbarItemClicked', args);\n    }\n    cancelPan() {\n        this.applyActObj();\n        const panBtn = this.element.querySelector('.e-img-pan .e-btn');\n        panBtn.classList.remove('e-selected-btn');\n        this.pan(false);\n    }\n    callMainToolbar(isApplyBtn, isZooming) {\n        if (this.factor === 1) {\n            this.refreshToolbar('main', isApplyBtn, false, isZooming);\n        }\n        else {\n            this.refreshToolbar('main', isApplyBtn, false, isZooming);\n        }\n    }\n    cancelItems() {\n        const ratio = this.calcRatio();\n        let isCropSelection = false;\n        let splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && this.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (this.togglePen) {\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.togglePen = false;\n            this.upperCanvas.style.cursor = 'default';\n            this.penDrawColl = [];\n            this.imageEditorPointsColl = [];\n        }\n        else if (this.activeObj.shape === 'text') {\n            this.activeObj.strokeSettings = this.tempStrokeSettings;\n            this.activeObj.textSettings = this.tempTextSettings;\n            if (this.activeObj.keyHistory === 'Enter Text' && this.activeObj.activePoint.startX === this.textStartPoints.x\n                && this.activeObj.activePoint.startY === this.textStartPoints.y) {\n                this.refreshActiveObj();\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                this.drawShapeText();\n            }\n            else {\n                this.redrawText(ratio);\n                this.redrawShape(this.activeObj);\n                if (!isCropSelection && this.activeObj.topLeftCircle !== undefined) {\n                    this.applyActObj();\n                }\n                this.clearSelection();\n            }\n            this.tempTextSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, bold: false, italic: false, underline: false };\n        }\n        else if (this.activeObj.shape === 'rectangle' || this.activeObj.shape === 'ellipse' || this.activeObj.shape === 'line') {\n            this.activeObj.strokeSettings = this.tempStrokeSettings;\n            this.redrawShape(this.activeObj);\n            this.applyActObj();\n        }\n        else {\n            this.refreshActiveObj();\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        }\n        this.upperCanvas.style.cursor = 'default';\n        this.currObjType.isCustomCrop = false;\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        this.callMainToolbar();\n    }\n    gradient(a, b) {\n        return (b.y - a.y) / (b.x - a.x);\n    }\n    applyPenDraw() {\n        if (this.togglePen && this.factor === 1 && !this.currObjType.isZoomed) {\n            this.apply();\n            this.penDrawColl = [];\n            this.imageEditorPointsColl = [];\n        }\n        else {\n            const tempCanvas = this.lowerCanvas.appendChild(this.createElement('canvas', {\n                id: this.element.id + '_tempCanvas', attrs: { name: 'canvasImage' }\n            }));\n            const tempContext = tempCanvas.getContext('2d');\n            tempCanvas.width = this.lowerCanvas.width;\n            tempCanvas.height = this.lowerCanvas.height;\n            tempContext.drawImage(this.inMemoryCanvas, 0, 0);\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            for (let i = 0; i < this.penDrawColl.length; i++) {\n                tempContext.lineWidth = 2 * this.penDrawColl[i].strokeWidth;\n                tempContext.strokeStyle = this.penDrawColl[i].strokeColor;\n                let nexP;\n                let preP;\n                const f = 0.3;\n                const t = 1;\n                tempContext.beginPath();\n                tempContext.moveTo(this.penDrawColl[i].points[0].x, this.penDrawColl[i].points[0].y);\n                let m = 0;\n                let dx1 = 0;\n                let dx2 = 0;\n                let dy1 = 0;\n                let dy2 = 0;\n                preP = this.penDrawColl[i].points[0];\n                for (let j = 1; j < this.penDrawColl[i].points.length; j++) {\n                    const curP = this.penDrawColl[i].points[j];\n                    nexP = this.penDrawColl[i].points[j + 1];\n                    if (nexP) {\n                        m = this.gradient(preP, nexP);\n                        dx2 = (nexP.x - curP.x) * -f;\n                        dy2 = dx2 * m * t;\n                    }\n                    else {\n                        dx2 = 0;\n                        dy2 = 0;\n                    }\n                    tempContext.bezierCurveTo(preP.x - dx1, preP.y - dy1, curP.x + dx2, curP.y + dy2, curP.x, curP.y);\n                    dx1 = dx2;\n                    dy1 = dy2;\n                    preP = curP;\n                    if (this.penDrawColl[i].points.length > 2) {\n                        this.penDrawColl[i].points.shift();\n                    }\n                    tempContext.stroke();\n                }\n            }\n            this.penDrawColl = [];\n            this.imageEditorPointsColl = [];\n            this.togglePen = false;\n            const imgData = tempContext.getImageData(0, 0, tempCanvas.width, tempCanvas.height);\n            let tempObj;\n            for (let index = 0; index < this.imgDataColl.length; index++) {\n                if (this.imgDataColl[index].operation !== 'freehanddraw') {\n                    tempObj = this.imgDataColl[index];\n                    break;\n                }\n            }\n            this.imgDataColl.splice(0, 1, { operation: 'freehanddraw', value: imgData });\n            this.imgDataColl.splice(1, 1, tempObj);\n            this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n            this.inMemoryCanvas.width = imgData.width;\n            this.inMemoryCanvas.height = imgData.height;\n            this.inMemoryContext.putImageData(imgData, 0, 0);\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n            for (let j = 0; j < this.objColl.length; j++) {\n                this.apply(this.objColl[j].shape, this.objColl[j]);\n                this.refreshActiveObj();\n            }\n            this.currObjType.isZoomed = false;\n        }\n    }\n    refreshToolbar(type, isApplyBtn, isCropping, isZooming) {\n        const args = { toolbarType: type };\n        if (document.getElementById(this.element.id + '_toolbar') && this.defToolbarItems.length > 0) {\n            getComponent(document.getElementById(this.element.id + '_toolbar'), 'toolbar').destroy();\n        }\n        if (document.getElementById(this.element.id + '_bottomToolbar') && this.defToolbarItems.length > 0) {\n            if (document.getElementById(this.element.id + '_bottomToolbar').className.indexOf('e-control') > -1) {\n                getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n            }\n        }\n        switch (type) {\n            case 'main':\n                if (Browser.isDevice) {\n                    if (isCropping) {\n                        this.initToolbarItem(false, true, true);\n                    }\n                    else {\n                        this.initToolbarItem(false, true);\n                    }\n                }\n                else if (!Browser.isDevice || isZooming) {\n                    this.initToolbarItem(isApplyBtn, Browser.isDevice);\n                }\n                if (Browser.isDevice) {\n                    this.initBottomToolbar();\n                }\n                break;\n            case 'shapes':\n                if (Browser.isDevice) {\n                    this.initToolbarItem(false, true, true);\n                }\n                if (this.activeObj.shape === 'line') {\n                    args.toolbarItems = ['strokeColor', 'strokeWidth'];\n                }\n                else {\n                    args.toolbarItems = ['fillColor', 'strokeColor', 'strokeWidth'];\n                }\n                this.trigger('toolbarUpdating', args);\n                this.initShapesToolbarItem(args.toolbarItems);\n                break;\n            case 'text':\n                if (Browser.isDevice) {\n                    this.initToolbarItem(false, true, true);\n                }\n                args.toolbarItems = ['fontFamily', 'fontStyle', 'fontSize', 'fontColor'];\n                this.trigger('toolbarUpdating', args);\n                this.initTextToolbarItem(args.toolbarItems);\n                break;\n            case 'pen':\n                if (Browser.isDevice) {\n                    this.initToolbarItem(false, true, true);\n                }\n                args.toolbarItems = ['strokeColor', 'strokeWidth'];\n                this.trigger('toolbarUpdating', args);\n                this.initPenToolbarItem(args.toolbarItems);\n                break;\n            case 'pan':\n                this.initZoomToolbarItem();\n                break;\n        }\n    }\n    getPenToolbarItem(items) {\n        const toolbarItems = [];\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: this.element.id + '_pen_strokecolor',\n                cssClass: 'top-icon e-pen-stroke-color',\n                tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + this.element.id + '_penColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', cssClass: 'top-icon e-size',\n                tooltipText: this.l10n.getConstant('StrokeWidth'),\n                align: 'Center', type: 'Input', template: '<button id=\"' + this.element.id + '_penStrokeWidth\"></button>' });\n        }\n        const tempToolbarItems = this.processSubToolbar(items);\n        for (let i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    }\n    initPenToolbarItem(items) {\n        const leftItem = this.getLeftToolbarItem();\n        const rightItem = this.getRightToolbarItem();\n        const mainItem = this.getPenToolbarItem(items);\n        const zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = [...leftItem, ...zoomItem, ...mainItem, ...rightItem];\n        }\n        const toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: () => {\n                this.createPenColor(items);\n                this.createPenBtn(items);\n                if (!Browser.isDevice) {\n                    this.renderSaveBtn();\n                }\n                this.trigger('toolbarCreated', { toolbarType: 'pen' });\n                if (Browser.isDevice) {\n                    if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    this.createLeftToolbarControls();\n                    if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + this.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + this.element.id + '_toolbar');\n        }\n    }\n    createPenColor(items) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const proxy = this;\n        if (items.indexOf('strokeColor') > -1) {\n            this.element.querySelector('.e-template.e-pen-stroke-color').appendChild(this.createElement('input', {\n                id: this.element.id + '_pen_stroke'\n            }));\n            const penColor = new ColorPicker({\n                modeSwitcher: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-pen-color',\n                change: (args) => {\n                    proxy.activeObj.strokeSettings.strokeColor = args.currentValue.hex;\n                    if (!proxy.togglePen) {\n                        proxy.redrawShape(this.activeObj);\n                    }\n                    strokeDDB.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB.toggle();\n                }\n            }, '#' + this.element.id + '_pen_stroke');\n            const strokeDDB = new DropDownButton({\n                open: (args) => {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = this.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-pen-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + this.element.id + '_penColorBtn');\n            penColor.inline = true;\n            this.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview').style.background\n                = '#fff';\n        }\n    }\n    createPenBtn(items) {\n        const ratio = this.calcRatio();\n        const strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('XSmall') },\n            { id: '2', text: this.l10n.getConstant('Small') },\n            { id: '3', text: this.l10n.getConstant('Medium') },\n            { id: '4', text: this.l10n.getConstant('Large') },\n            { id: '5', text: this.l10n.getConstant('XLarge') }\n        ];\n        if (items.indexOf('strokeWidth') > -1) {\n            const strokeWidthBtn = document.getElementById(this.element.id + '_penStrokeWidth');\n            const spanElem = document.createElement('span');\n            spanElem.innerHTML = this.l10n.getConstant('Small');\n            spanElem.className = 'e-pen-stroke-width';\n            strokeWidthBtn.appendChild(spanElem);\n            const drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n                open: (args) => {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    const activeBtn = spanElem.innerHTML;\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: (args) => {\n                    spanElem.textContent = args.item.text;\n                    this.setPenStroke(args.item.id, ratio);\n                    if (Browser.isDevice) {\n                        if (!isNullOrUndefined(document.getElementById(this.element.id + '_bottomToolbar'))) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            const toolbar = getComponent(this.element.id + '_bottomToolbar', 'toolbar');\n                            toolbar.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar'))) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            const toolbar = getComponent(this.element.id + '_toolbar', 'toolbar');\n                            toolbar.refreshOverflow();\n                        }\n                    }\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn.appendTo('#' + this.element.id + '_penStrokeWidth');\n        }\n    }\n    setPenStroke(args, ratio) {\n        switch (parseInt(args, 10)) {\n            case 1:\n                this.penStrokeWidth = (ratio.width + ratio.height) * 0.4;\n                break;\n            case 2:\n                this.penStrokeWidth = (ratio.width + ratio.height) * 0.8;\n                break;\n            case 3:\n                this.penStrokeWidth = (ratio.width + ratio.height) * 1.2;\n                break;\n            case 4:\n                this.penStrokeWidth = (ratio.width + ratio.height) * 1.6;\n                break;\n            case 5:\n                this.penStrokeWidth = (ratio.width + ratio.height) * 2;\n                break;\n        }\n    }\n    updateCanvas() {\n        this.lastX = this.baseImg.width / 2;\n        this.lastY = this.baseImg.height / 2;\n        let wrapperWidth;\n        const canvasWrapper = document.querySelector('#' + this.element.id + '_canvasWrapper');\n        if (this.isScreenOriented) {\n            wrapperWidth = parseFloat(canvasWrapper.style.width);\n        }\n        else {\n            wrapperWidth = this.element.clientWidth;\n        }\n        const maxDimension = this.calcMaxDimension(this.baseImg.width, this.baseImg.height);\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.lowerCanvas.width = this.upperCanvas.width = this.inMemoryCanvas.width = this.baseImg.width;\n        this.lowerCanvas.height = this.upperCanvas.height = this.inMemoryCanvas.height = this.baseImg.height;\n        this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = maxDimension.width + 'px';\n        this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = maxDimension.height + 'px';\n        this.lowerCanvas.style.left = this.upperCanvas.style.left = (wrapperWidth - maxDimension.width) / 2 + 1 + 'px';\n        if (canvasWrapper) {\n            this.lowerCanvas.style.top = this.upperCanvas.style.top = (parseFloat(canvasWrapper.style.height) - maxDimension.height - 1) / 2 + 'px';\n        }\n        this.lowerContext.drawImage(this.baseImg, 0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.updateInMemoryCanvas('updateCanvas');\n        for (let i = 0, len = this.objColl.length; i < len; i++) {\n            this.apply(this.objColl[i].shape, this.objColl[i]);\n        }\n        if (this.isUndoRedo) {\n            if (this.flipState !== '') {\n                this.flip(this.flipState);\n            }\n        }\n        if (this.disabled) {\n            this.element.setAttribute('class', 'e-disabled');\n        }\n        this.trigger('fileOpened');\n    }\n    imageOnLoad(src) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const proxy = this;\n        proxy.baseImg.src = proxy.baseImgSrc = src;\n        this.baseImg.onload = () => {\n            this.lowerContext.drawImage(this.baseImg, 0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            if (this.togglePen) {\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                this.lowerCanvas.toBlob(function (blob) {\n                    showSpinner(proxy.element);\n                    proxy.baseImg.src = URL.createObjectURL(blob);\n                    proxy.togglePen = false;\n                }, 'image/png');\n                this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n                const imgData = this.lowerContext.getImageData(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                this.inMemoryContext.putImageData(imgData, 0, 0);\n                const temp = this.imgDataColl[0];\n                this.imgDataColl.splice(0, 1, { operation: 'freehanddraw', value: imgData });\n                this.imgDataColl.splice(1, 1, temp);\n            }\n            else {\n                hideSpinner(this.element);\n                this.element.style.opacity = '1';\n                this.updateCanvas();\n                this.isUndoRedo = false;\n            }\n            if (Browser.isDevice) {\n                if (this.isToolbar() && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar'))) &&\n                    (!isNullOrUndefined(getComponent(document.getElementById(this.element.id + '_toolbar'), 'toolbar')))) {\n                    getComponent(document.getElementById(this.element.id + '_toolbar'), 'toolbar').destroy();\n                }\n                if (!isNullOrUndefined(document.getElementById(this.element.id + '_bottomToolbar')) &&\n                    (!isNullOrUndefined(getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar')))) {\n                    getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                }\n                this.initToolbarItem(false, Browser.isDevice);\n                this.createBottomToolbar();\n            }\n            else {\n                if (this.isToolbar() && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar'))) &&\n                    (!isNullOrUndefined(getComponent(document.getElementById(this.element.id + '_toolbar'), 'toolbar')))) {\n                    getComponent(document.getElementById(this.element.id + '_toolbar'), 'toolbar').destroy();\n                }\n                this.initToolbarItem(false, false);\n            }\n        };\n    }\n    refreshActiveObj() {\n        this.activeObj = {};\n        this.activeObj.activePoint = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        this.activeObj.flipObjColl = [];\n        this.activeObj.strokeSettings = this.strokeSettings;\n        this.activeObj.textSettings = this.textSettings;\n    }\n    redrawText(ratio) {\n        if (this.activeObj.textSettings.bold) {\n            this.upperContext.font = 'bold ' + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n        }\n        if (this.activeObj.textSettings.italic) {\n            this.upperContext.font = 'bold ' + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n        }\n        if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n            this.upperContext.font = 'italic bold ' + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n        }\n        if (!this.activeObj.textSettings.bold && !this.activeObj.textSettings.italic) {\n            this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n        }\n        const rows = this.activeObj.keyHistory.split('\\n');\n        const text = this.textBox.style.display === 'block' ? this.getMaxText(true) : this.getMaxText();\n        const width = this.upperContext.measureText(text).width + this.activeObj.textSettings.fontSize * 0.5;\n        const height = rows.length * (this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25);\n        this.setTextSelection(width, height);\n        this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n        this.redrawShape(this.activeObj);\n    }\n    setTextSelection(width, height) {\n        let degree = this.degree;\n        if (this.activeObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - this.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        for (let i = 0; i < this.activeObj.flipObjColl.length; i++) {\n            if (degree === 0) {\n                if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.endX - width,\n                        startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.endX),\n                        endY: this.activeObj.activePoint.startY + (height ? height : 0) };\n                }\n                else if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.startX + (width ? width : 0)),\n                        endY: this.activeObj.activePoint.endY };\n                }\n                else {\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.startX + (width ? width : 0)),\n                        endY: this.activeObj.activePoint.startY + (height ? height : 0) };\n                }\n            }\n            else if (degree === 90) {\n                if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.endY - width,\n                        endX: (this.activeObj.activePoint.endX),\n                        endY: this.activeObj.activePoint.endY };\n                }\n                else if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.endX),\n                        endY: this.activeObj.activePoint.startY + (width ? width : 0) };\n                }\n                else {\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.endX),\n                        endY: this.activeObj.activePoint.startY + (width ? width : 0) };\n                }\n            }\n            else if (degree === 180) {\n                if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.startX + width),\n                        endY: this.activeObj.activePoint.endY };\n                }\n                else if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + height;\n                    this.activeObj.activePoint = { endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY,\n                        startX: (this.activeObj.activePoint.endX - (width ? width : 0)),\n                        startY: this.activeObj.activePoint.startY };\n                }\n                else {\n                    this.activeObj.activePoint = { endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY,\n                        startX: (this.activeObj.activePoint.endX - (width ? width : 0)),\n                        startY: this.activeObj.activePoint.endY - (height ? height : 0) };\n                }\n            }\n            else if (degree === 270) {\n                if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.startX + height),\n                        endY: this.activeObj.activePoint.startY + (width ? width : 0) };\n                }\n                else if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.endY - (width ? width : 0),\n                        endX: this.activeObj.activePoint.endX,\n                        endY: this.activeObj.activePoint.endY };\n                }\n                else {\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.endY - (width ? width : 0),\n                        endX: this.activeObj.activePoint.endX,\n                        endY: this.activeObj.activePoint.endY };\n                }\n            }\n        }\n        if (this.activeObj.flipObjColl.length === 0) {\n            if (degree === 0) {\n                this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                    endX: (this.activeObj.activePoint.startX + (width ? width : 0)),\n                    endY: this.activeObj.activePoint.startY + (height ? height : 0) };\n            }\n            else if (degree === 90) {\n                this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - height;\n                this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                    endX: (this.activeObj.activePoint.endX),\n                    endY: this.activeObj.activePoint.startY + (width ? width : 0) };\n            }\n            else if (degree === 180) {\n                this.activeObj.activePoint = { endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY,\n                    startX: (this.activeObj.activePoint.endX - (width ? width : 0)),\n                    startY: this.activeObj.activePoint.endY - (height ? height : 0) };\n            }\n            else if (degree === 270) {\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + height;\n                this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                    startY: this.activeObj.activePoint.endY - (width ? width : 0),\n                    endX: this.activeObj.activePoint.endX,\n                    endY: this.activeObj.activePoint.endY };\n            }\n        }\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        if (this.degree === 360 || this.degree === -360) {\n            this.degree = 0;\n        }\n    }\n    updateUndoRedoColl(operation, value, previousObj, currentObj) {\n        this.undoRedoColl.push({ operation: operation, value: value, previousObj: previousObj, currentObj: currentObj });\n    }\n    fileSelect(inputElement, args) {\n        showSpinner(this.element);\n        this.element.style.opacity = '0.5';\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const filesData = args.target.files[0];\n        if (this.imgDataColl.length > 0) {\n            this.imgDataColl = [];\n            this.reset();\n        }\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const URL = window.URL;\n        const url = URL.createObjectURL(filesData);\n        this.imageOnLoad(url.toString());\n        inputElement.value = '';\n    }\n    findTextPoint(e) {\n        if (this.activeObj.shape === 'text') {\n            this.textBox.style.transformOrigin = '0 0';\n            let degree;\n            let scale = '';\n            if (this.activeObj.shapeDegree === 0) {\n                degree = this.degree;\n            }\n            else {\n                degree = this.degree - this.activeObj.shapeDegree;\n            }\n            if (degree < 0) {\n                degree = 360 + degree;\n            }\n            if (this.activeObj.flipObjColl.length > 0) {\n                // need to add scale value according to length.\n                for (let i = 0; i < this.activeObj.flipObjColl.length; i++) {\n                    if (degree !== 0 && degree % 90 === 0 && degree !== 180) {\n                        scale += this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(1, -1)' :\n                            'scale(-1, 1)';\n                    }\n                    else {\n                        scale += this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(-1, 1)' :\n                            'scale(1, -1)';\n                    }\n                    if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                        this.textBox.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                    else if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                        this.textBox.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                }\n            }\n            else {\n                this.textBox.style.transform = 'rotate(' + degree + 'deg)';\n            }\n            this.findTextTarget(e);\n        }\n    }\n    getStrokeWidth(text) {\n        let strokeWidth;\n        switch (text) {\n            case '1':\n                strokeWidth = this.l10n.getConstant('XSmall');\n                break;\n            case '2':\n                strokeWidth = this.l10n.getConstant('Small');\n                break;\n            case '3':\n                strokeWidth = this.l10n.getConstant('Medium');\n                break;\n            case '4':\n                strokeWidth = this.l10n.getConstant('Large');\n                break;\n            case '5':\n                strokeWidth = this.l10n.getConstant('XLarge');\n                break;\n        }\n        return strokeWidth;\n    }\n    updateToolbarItems(ratio) {\n        const selFillElem = this.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview');\n        const selStrokeElem = this.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview');\n        const selTextStrokeElem = this.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview');\n        const selPenStrokeElem = this.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview');\n        const strokeWidthElem = this.element.querySelector('.e-shape-stroke-width');\n        const fontFamilyElem = this.element.querySelector('.e-text-font-family');\n        const fontSizeElem = this.element.querySelector('.e-text-font-size');\n        const fontStyleElem = this.element.querySelector('.e-text-font-style');\n        if (selFillElem) {\n            if (this.activeObj.strokeSettings.fillColor === '') {\n                selFillElem.classList.add('e-nocolor-item');\n            }\n            else {\n                selFillElem.classList.remove('e-nocolor-item');\n                selFillElem.style.background = this.activeObj.strokeSettings.fillColor;\n            }\n            getComponent(this.element.id + '_shape_fill', 'colorpicker').value\n                = this.activeObj.strokeSettings.fillColor + 'ff';\n        }\n        if (selStrokeElem) {\n            selStrokeElem.style.background = this.activeObj.strokeSettings.strokeColor;\n            getComponent(this.element.id + '_shape_stroke', 'colorpicker').value\n                = this.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (selTextStrokeElem) {\n            selTextStrokeElem.style.background = this.activeObj.strokeSettings.strokeColor;\n            getComponent(this.element.id + '_text_font', 'colorpicker').value\n                = this.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (selPenStrokeElem) {\n            selPenStrokeElem.style.background = this.activeObj.strokeSettings.strokeColor;\n            getComponent(this.element.id + '_pen_stroke', 'colorpicker').value\n                = this.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (fontFamilyElem) {\n            if (Browser.isDevice) {\n                fontFamilyElem.setAttribute('style', 'font-family:' + this.activeObj.textSettings.fontFamily.toLowerCase());\n            }\n            else {\n                fontFamilyElem.textContent = this.activeObj.textSettings.fontFamily;\n            }\n        }\n        if (fontSizeElem) {\n            for (let i = 0; i < this.fontSizeColl.length; i++) {\n                if (parseInt(this.fontSizeColl[i].text, 10) >= this.activeObj.textSettings.fontSize) {\n                    fontSizeElem.textContent = (i + 1).toString();\n                    break;\n                }\n            }\n        }\n        if (fontStyleElem) {\n            if (Browser.isDevice) {\n                if (!this.activeObj.textSettings.bold && !this.activeObj.textSettings.italic) {\n                    fontStyleElem.setAttribute('style', '');\n                }\n                else if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n                    fontStyleElem.setAttribute('style', 'font-style: italic;font-weight: bold');\n                }\n                else if (this.activeObj.textSettings.bold) {\n                    fontStyleElem.setAttribute('style', 'font-weight: bold');\n                }\n                else {\n                    fontStyleElem.setAttribute('style', 'font-style: italic');\n                }\n            }\n            else {\n                if (!this.activeObj.textSettings.bold && !this.activeObj.textSettings.italic) {\n                    fontStyleElem.textContent = 'Default';\n                }\n                else if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n                    fontStyleElem.textContent = 'Bold Italic';\n                }\n                else if (this.activeObj.textSettings.bold) {\n                    fontStyleElem.textContent = 'Bold';\n                }\n                else {\n                    fontStyleElem.textContent = 'Italic';\n                }\n            }\n        }\n        if (strokeWidthElem) {\n            const strokeWidth = Math.round((this.activeObj.strokeSettings.strokeWidth /\n                (ratio.width + ratio.height))).toString();\n            strokeWidthElem.textContent = this.getStrokeWidth(strokeWidth);\n        }\n    }\n    setTimer(e) {\n        if (!this.isTimer && this.timer > 10) {\n            this.findTextPoint(e);\n            if (Browser.isDevice) {\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            }\n        }\n    }\n    touchStartHandler(e) {\n        e.preventDefault();\n        this.timer = setTimeout(this.setTimer.bind(this), 1000, e);\n        this.mouseDownEventHandler(e);\n        EventHandler.add(this.lowerCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(this.lowerCanvas, 'touchmove', this.mouseMoveEventHandler, this); // Unbind mousedown to prevent double triggers from touch devices\n        EventHandler.add(this.upperCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'touchmove', this.mouseMoveEventHandler, this); // Unbind mousedown to prevent double triggers from touch devices\n    }\n    mouseDownEventHandler(e) {\n        if (e.type === 'touchstart' && e.currentTarget === this.lowerCanvas && this.imgDataColl.length === 0) {\n            return;\n        }\n        const ratio = this.calcRatio();\n        if (this.dragCanvas) {\n            this.canvasMouseDownHandler(e);\n        }\n        else {\n            e.preventDefault();\n            let x;\n            let y;\n            if (e.type === 'mousedown') {\n                x = e.clientX;\n                y = e.clientY;\n            }\n            else {\n                this.touchEndPoint.x = x = e.touches[0].clientX;\n                this.touchEndPoint.y = y = e.touches[0].clientY;\n            }\n            this.redrawActObj(x, y);\n            if (this.upperCanvas.style.cursor === 'crosshair' || (Browser.isDevice && this.togglePen)) {\n                if (this.togglePen) {\n                    this.canvasRatio = this.calcRatio();\n                    if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n                        this.activeObj.strokeSettings = this.strokeSettings;\n                    }\n                    if (isNullOrUndefined(this.penStrokeWidth)) {\n                        this.penStrokeWidth = (ratio.width + ratio.height) * 0.8;\n                    }\n                    if (this.activeObj.strokeSettings.strokeWidth === (ratio.width + ratio.height) * 0.4 &&\n                        this.strokeSettings.strokeWidth === (ratio.width + ratio.height) * 0.4) {\n                        this.activeObj.strokeSettings.strokeWidth = this.strokeSettings.strokeWidth =\n                            2 * ((ratio.width + ratio.height) / this.factor);\n                    }\n                    this.minStrokeWidth = this.maxStrokeWidth = this.penStrokeWidth;\n                    this.velocity = 0.7;\n                    this.upperContext.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n                    this.upperContext.fillStyle = this.activeObj.strokeSettings.strokeColor;\n                    this.mouseDownHandler(e, this.upperCanvas, this.pannStart, this.factor); // To call signature base\n                }\n                else {\n                    this.refreshActiveObj();\n                    this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                }\n                this.currObjType.isActiveObj = false;\n                this.dragElement = '';\n                this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n            }\n            if ((this.upperCanvas.style.cursor !== 'crosshair' && e.type.toLowerCase() === 'touchstart') ||\n                (this.currObjType.isActiveObj && this.upperCanvas.style.cursor !== 'default' && !this.togglePen)) {\n                this.findTarget(x, y, e.type);\n            }\n            else if ((this.currObjType.shape === '' || this.currObjType.isCustomCrop) && !this.togglePen && this.upperCanvas.style.cursor !== 'default') {\n                this.setActivePoint(x, y);\n            }\n            if (!isNullOrUndefined(this.activeObj)) {\n                let isCropSelection = false;\n                let splitWords;\n                if (this.activeObj.shape !== undefined) {\n                    splitWords = this.activeObj.shape.split('-');\n                }\n                if (splitWords === undefined && (this.currObjType.isCustomCrop || this.togglePen)) {\n                    isCropSelection = true;\n                }\n                else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                    isCropSelection = true;\n                }\n                if ((this.activeObj.shape === 'rectangle') || (this.activeObj.shape === 'ellipse')\n                    || (this.activeObj.shape === 'line')) {\n                    this.refreshToolbar('shapes');\n                }\n                else if (this.activeObj.shape === 'text') {\n                    this.refreshToolbar('text');\n                }\n                else if (!isCropSelection) {\n                    this.callMainToolbar();\n                }\n                this.updateToolbarItems(ratio);\n            }\n        }\n    }\n    mouseMoveEventHandler(e) {\n        e.preventDefault();\n        if (this.textBox.style.display === 'none') {\n            this.isTimer = true;\n        }\n        let x;\n        let y;\n        if (e.type === 'mousemove') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        this.canvasMouseMoveHandler(e);\n        if (this.currObjType.isActiveObj && (this.activeObj.activePoint !== undefined || this.objColl.length > 0) &&\n            !this.dragCanvas || this.activeObj.activePoint !== undefined) {\n            if (this.dragElement === '') {\n                this.setCursor(x, y);\n                this.findTarget(x, y, e.type);\n            }\n        }\n        if (this.currObjType.isDragging) {\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            const initialDraw = this.updateActivePoint(x, y);\n            this.drawObject('duplicate', null, initialDraw);\n        }\n    }\n    mouseUpEventHandler(e) {\n        e.preventDefault();\n        let x;\n        let y;\n        if (e.type === 'mouseup') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            x = this.touchEndPoint.x;\n            y = this.touchEndPoint.y;\n        }\n        if (e.type === 'touchend') {\n            if (this.textBox.style.display === 'none') {\n                this.isTimer = false;\n                this.timer = 0;\n            }\n        }\n        const bbox = this.upperCanvas.getBoundingClientRect();\n        const ratio = this.calcRatio();\n        if (this.factor === 1) {\n            x = (x - bbox.left) * ratio.width;\n            y = (y - bbox.top) * ratio.height;\n        }\n        else {\n            x = (x - bbox.left) + ((this.pannStart.startX) / ratio.width * this.factor);\n            y = (y - bbox.top) + ((this.pannStart.startY) / ratio.height * this.factor);\n        }\n        if (e.currentTarget === this.upperCanvas) {\n            this.currObjType.shape = this.currObjType.shape.toLowerCase();\n            if (!this.togglePen && !this.dragCanvas) {\n                this.applyCurrActObj(x, y);\n            }\n        }\n        if (this.togglePen && e.currentTarget === this.upperCanvas) {\n            this.penDrawColl.push({ strokeWidth: this.penStrokeWidth, strokeColor: this.activeObj.strokeSettings.strokeColor, points: this.imageEditorPointsColl });\n            this.imageEditorPointsColl = [];\n        }\n        else {\n            this.currObjType.shape = '';\n        }\n        this.dragElement = '';\n        this.currObjType.isInitialLine = this.currObjType.isDragging = false;\n        this.oldPoint.x = undefined;\n        this.oldPoint.y = undefined;\n    }\n    keyDownEventHandler(e) {\n        let shapeChangingArgs = {};\n        const beforeSave = { fileName: 'ImageEditor', fileType: 'Png', cancel: false };\n        switch (e.key) {\n            case (e.ctrlKey && 's'):\n                this.trigger('beforeSave', beforeSave, (observableSaveArgs) => {\n                    if (!beforeSave.cancel) {\n                        this.export(observableSaveArgs.fileType, observableSaveArgs.fileName);\n                    }\n                });\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                break;\n            case 'Delete':\n                shapeChangingArgs = { action: 'delete', previousShapeSettings: this.activeObj, currentShapeSettings: null };\n                this.keyHistory = '';\n                this.clearSelection();\n                this.trigger('shapeChanging', shapeChangingArgs);\n                this.refreshToolbar('main');\n                break;\n            case 'Escape':\n                if (this.togglePan) {\n                    this.refreshToolbar(this.currentToolbar);\n                    this.pan(false);\n                }\n                else {\n                    this.cancelItems();\n                }\n                break;\n            case 'Enter':\n                this.crop();\n                break;\n            default:\n                if (Browser.isDevice && this.textBox.style.display === 'block') {\n                    setTimeout(this.textKeyDown.bind(this), 1, e);\n                }\n                break;\n        }\n    }\n    keyUpEventHandler(e) {\n        setTimeout(this.textKeyDown.bind(this), 1, e);\n    }\n    canvasMouseDownHandler(e) {\n        e.preventDefault();\n        const ratio = this.calcRatio();\n        if (e.type === 'mousedown') {\n            this.lastX = e.offsetX || (e.pageX - this.lowerCanvas.offsetLeft);\n            this.lastY = e.offsetY || (e.pageY - this.lowerCanvas.offsetTop);\n        }\n        else {\n            this.lastX = e.touches[0].clientX || (e.touches[0].pageX - this.lowerCanvas.offsetLeft);\n            this.lastY = e.touches[0].clientY || (e.touches[0].pageY - this.lowerCanvas.offsetTop);\n        }\n        this.lastX *= ratio.width;\n        this.lastY *= ratio.height;\n        if (this.dragCanvas || this.factor !== 1) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            this.dragStart = this.lowerContext.transformedPoint(this.lastX, this.lastY);\n            this.dragged = false;\n        }\n    }\n    canvasMouseMoveHandler(e) {\n        if (this.dragCanvas && this.factor > 1) {\n            this.lowerCanvas.style.cursor = 'grab';\n        }\n        else {\n            this.dragCanvas = this.togglePan = false;\n            this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'default';\n        }\n        const ratio = this.calcRatio();\n        if (e.type === 'mousemove') {\n            this.lastX = e.offsetX || (e.pageX - this.lowerCanvas.offsetLeft);\n            this.lastY = e.offsetY || (e.pageY - this.lowerCanvas.offsetTop);\n        }\n        else {\n            this.lastX = e.touches[0].clientX || (e.touches[0].pageX - this.lowerCanvas.offsetLeft);\n            this.lastY = e.touches[0].clientY || (e.touches[0].pageY - this.lowerCanvas.offsetTop);\n        }\n        this.lastX *= ratio.width;\n        this.lastY *= ratio.height;\n        this.dragged = true;\n        if (this.dragStart && this.dragCanvas) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            const pt = this.lowerContext.transformedPoint(this.lastX, this.lastY);\n            const transitionArgs = { startPoint: { x: this.dragStart.x, y: this.dragStart.y },\n                endPoint: { x: pt.x, y: pt.y } };\n            this.trigger('panning', transitionArgs);\n            let xDiff = pt.x - this.dragStart.x;\n            let yDiff = pt.y - this.dragStart.y;\n            const xxDiff = xDiff;\n            const yyDiff = yDiff;\n            this.lowerContext.translate(xDiff, yDiff);\n            this.upperContext.translate(xDiff, yDiff);\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            const pt1 = this.lowerContext.transformedPoint(0, 0);\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            const pt2 = this.lowerContext.transformedPoint(this.lowerCanvas.width, this.lowerCanvas.height);\n            if (xDiff >= 0) {\n                if (pt1.x < 1) {\n                    xDiff = 0;\n                }\n            }\n            else {\n                if (pt2.x > this.lowerCanvas.width) {\n                    xDiff = 0;\n                }\n            }\n            if (yDiff >= 0) {\n                if (pt1.y < 1) {\n                    yDiff = 0;\n                }\n            }\n            else {\n                if (pt2.y > this.lowerCanvas.height) {\n                    yDiff = 0;\n                }\n            }\n            this.lowerContext.translate(-xxDiff, -yyDiff);\n            this.upperContext.translate(-xxDiff, -yyDiff);\n            this.lowerContext.translate(xDiff, yDiff);\n            this.upperContext.translate(xDiff, yDiff);\n            this.redraw();\n        }\n    }\n    canvasMouseUpHandler(e) {\n        e.preventDefault();\n        this.dragStart = null;\n        this.currObjType.isDragging = false;\n    }\n    textKeyDown(e) {\n        if (String.fromCharCode(e.which) === '\\r') {\n            this.textRow += 1;\n        }\n        this.textBox.setAttribute('rows', this.textRow.toString());\n        this.textBox.style.height = 'auto';\n        this.textBox.style.height = this.textBox.scrollHeight + 'px';\n        this.setTextBoxWidth(e);\n        if (Browser.isDevice) {\n            this.textBox.style.width = parseFloat(this.textBox.style.width) + this.textBox.style.fontSize + 'px';\n        }\n        const rows = this.textBox.value.split('\\n');\n        this.textRow = rows.length;\n        this.textBox.setAttribute('rows', this.textRow.toString());\n    }\n    adjustToScreen() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const proxy = this;\n        this.applyActObj();\n        this.refreshActiveObj();\n        if (this.imgDataColl.length > 0) {\n            showSpinner(this.element);\n            this.element.style.opacity = '0.5';\n        }\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.lowerCanvas.width = this.upperCanvas.width = this.element.offsetWidth;\n        this.lowerCanvas.height = this.upperCanvas.height = this.element.offsetHeight;\n        const canvasWrapper = document.querySelector('#' + this.element.id + '_canvasWrapper');\n        if (!isNullOrUndefined(canvasWrapper)) {\n            canvasWrapper.style.width = this.element.offsetWidth + 'px';\n            canvasWrapper.style.height = this.element.offsetHeight + 'px';\n            if (Browser.isDevice) {\n                canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - (2 * this.toolbarHeight)) - 3 + 'px';\n            }\n            else {\n                canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - this.toolbarHeight) - 3 + 'px';\n            }\n        }\n        this.redrawImg();\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        this.lowerCanvas.toBlob(function (blob) {\n            proxy.baseImg.src = URL.createObjectURL(blob);\n        }, 'image/png');\n        if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            const toolbar = getComponent(proxy.element.id + '_toolbar', 'toolbar');\n            toolbar.refreshOverflow();\n        }\n    }\n    screenOrientation() {\n        if (Browser.isDevice) {\n            this.isScreenOriented = true;\n            setTimeout(this.adjustToScreen.bind(this), 100);\n        }\n    }\n    windowResizeHandler() {\n        if (!Browser.isDevice) {\n            this.adjustToScreen();\n        }\n    }\n    redrawImg() {\n        let wrapperWidth;\n        const canvasWrapper = document.querySelector('#' + this.element.id + '_canvasWrapper');\n        if (this.isScreenOriented) {\n            wrapperWidth = parseFloat(canvasWrapper.style.width);\n        }\n        else {\n            wrapperWidth = this.element.clientWidth;\n        }\n        const maxDimension = this.calcMaxDimension(this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n        this.lowerCanvas.width = this.upperCanvas.width = this.inMemoryCanvas.width;\n        this.lowerCanvas.height = this.upperCanvas.height = this.inMemoryCanvas.height;\n        this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = maxDimension.width + 'px';\n        this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = maxDimension.height + 'px';\n        this.lowerCanvas.style.left = this.upperCanvas.style.left = (wrapperWidth - maxDimension.width) / 2 + 1 + 'px';\n        this.lowerCanvas.style.top = this.upperCanvas.style.top = (this.element.offsetHeight - this.toolbarHeight - maxDimension.height) / 2 + 1 + 'px';\n        this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n    }\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    updateContext(ctx) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const proxy = this;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        let xform = new DOMMatrix();\n        ctx.getTransform = () => {\n            return xform;\n        };\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const savedTransforms = [];\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const save = ctx.save;\n        ctx.save = () => {\n            savedTransforms.push(xform.translate(0, 0));\n            return save.call(ctx);\n        };\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const restore = ctx.restore;\n        ctx.restore = () => {\n            xform = savedTransforms.pop();\n            return restore.call(ctx);\n        };\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const scale = ctx.scale;\n        ctx.scale = (sx, sy) => {\n            xform = this.scaleNonUniform(xform, sx, sy);\n            proxy.factor = xform.a;\n            return scale.call(ctx, sx, sy);\n        };\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const rotate = ctx.rotate;\n        ctx.rotate = (radians) => {\n            xform = xform.rotate(radians * 180 / Math.PI);\n            return rotate.call(ctx, radians);\n        };\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const translate = ctx.translate;\n        ctx.translate = (dx, dy) => {\n            xform = xform.translate(dx, dy);\n            return translate.call(ctx, dx, dy);\n        };\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const transform = ctx.transform;\n        ctx.transform = (a, b, c, d, e, f) => {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            const m2 = new DOMMatrix();\n            m2.a = a;\n            m2.b = b;\n            m2.c = c;\n            m2.d = d;\n            m2.e = e;\n            m2.f = f;\n            xform = xform.multiply(m2);\n            return transform.call(ctx, a, b, c, d, e, f);\n        };\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const setTransform = ctx.setTransform;\n        ctx.setTransform = (a, b, c, d, e, f) => {\n            xform.a = a;\n            xform.b = b;\n            xform.c = c;\n            xform.d = d;\n            xform.e = e;\n            xform.f = f;\n            return setTransform.call(ctx, a, b, c, d, e, f);\n        };\n        const pt = new DOMPoint();\n        ctx.transformedPoint = (x, y) => {\n            pt.x = x;\n            pt.y = y;\n            return pt.matrixTransform(xform.inverse());\n        };\n    }\n    scaleNonUniform(xform, sx, sy) {\n        xform.m11 *= sx;\n        xform.m12 *= sx;\n        xform.m13 *= sx;\n        xform.m14 *= sx;\n        xform.m21 *= sy;\n        xform.m22 *= sy;\n        xform.m23 *= sy;\n        xform.m24 *= sy;\n        return xform;\n    }\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    zoomImg(clicks) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const pt = this.lowerContext.transformedPoint(this.lastX, this.lastY);\n        const scaleFactor = 1.1;\n        const transitionArgs = { zoomPoint: { x: pt.x, y: pt.y }, zoomLevel: clicks };\n        this.trigger('zooming', transitionArgs);\n        this.lowerContext.translate(pt.x, pt.y);\n        this.upperContext.translate(pt.x, pt.y);\n        const factor = Math.pow(scaleFactor, clicks);\n        this.factor += (factor - 1);\n        this.lowerContext.scale(factor, factor);\n        this.upperContext.scale(factor, factor);\n        this.lowerContext.translate(-pt.x, -pt.y);\n        this.upperContext.translate(-pt.x, -pt.y);\n        const ratio = this.calcRatio();\n        if (!isNullOrUndefined(this.strokeSettings.strokeWidth)) {\n            this.strokeSettings.strokeWidth = 2 * (ratio.width + ratio.height) / this.factor;\n        }\n        if (this.factor > 0.99 && this.factor < 1.01) {\n            this.factor = 1;\n            this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n            this.upperContext.setTransform(1, 0, 0, 1, 0, 0);\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n            for (let j = 0; j < this.objColl.length; j++) {\n                this.apply(this.objColl[j].shape, this.objColl[j]);\n                this.refreshActiveObj();\n            }\n        }\n        else {\n            if (this.factor > 1) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                const pt1 = this.lowerContext.transformedPoint(0, 0);\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                const pt2 = this.lowerContext.transformedPoint(this.lowerCanvas.width, this.lowerCanvas.height);\n                let xDiff = pt.x;\n                let yDiff = pt.y;\n                if (pt1.x < 1) {\n                    xDiff = -xDiff;\n                }\n                else if (pt2.x > this.lowerCanvas.width) {\n                    xDiff = pt2.x - this.lowerCanvas.width;\n                }\n                if (pt1.y < 1) {\n                    yDiff = -yDiff;\n                }\n                else if (pt2.y > this.lowerCanvas.height) {\n                    yDiff = pt2.y - this.lowerCanvas.height;\n                }\n                if (xDiff !== pt.x || yDiff !== pt.y) {\n                    if (xDiff === pt.x) {\n                        xDiff = 0;\n                    }\n                    if (yDiff === pt.y) {\n                        yDiff = 0;\n                    }\n                    this.lowerContext.translate(xDiff, yDiff);\n                    this.upperContext.translate(xDiff, yDiff);\n                }\n            }\n            this.redraw();\n        }\n    }\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    handleScroll(e) {\n        const delta = e.wheelDelta ? e.wheelDelta / 40 : e.detail ? -e.detail : 0;\n        if (delta) {\n            this.zoom(delta);\n        }\n        return e.preventDefault() && false;\n    }\n    redraw() {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const p1 = this.lowerContext.transformedPoint(0, 0);\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        const p2 = this.lowerContext.transformedPoint(this.lowerCanvas.width, this.lowerCanvas.height);\n        this.pannStart.startX = p1.x;\n        this.pannStart.startY = p1.y;\n        this.pannEnd.startX = this.lowerCanvas.width - p2.x;\n        this.pannEnd.startY = this.lowerCanvas.height - p2.y;\n        this.lowerContext.clearRect(p1.x, p1.y, p2.x - p1.x, p2.y - p1.y);\n        this.upperContext.clearRect(p1.x, p1.y, p2.x - p1.x, p2.y - p1.y);\n        this.lowerContext.save();\n        this.upperContext.save();\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n        this.upperContext.setTransform(1, 0, 0, 1, 0, 0);\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.lowerContext.restore();\n        this.upperContext.restore();\n        this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n        for (let j = 0; j < this.objColl.length; j++) {\n            this.apply(this.objColl[j].shape, this.objColl[j]);\n            this.refreshActiveObj();\n        }\n    }\n    applyCurrActObj(x, y) {\n        let isInside = false;\n        const ratio = this.calcRatio();\n        let actObj = extend({}, this.activeObj, {}, true);\n        if (this.factor !== 1) {\n            actObj = this.setCursorForZoomState(actObj, ratio, true);\n        }\n        if (isNullOrUndefined(actObj.activePoint)) {\n            return;\n        }\n        if ((x >= Math.floor(actObj.activePoint.startX) && x <= Math.ceil(actObj.activePoint.endX) &&\n            y >= Math.floor(actObj.activePoint.startY) && y <= Math.ceil(actObj.activePoint.endY)) ||\n            (actObj.shape === 'text')) {\n            isInside = true;\n        }\n        if (!isInside) {\n            if (this.activeObj.horTopLine !== undefined && this.activeObj.horTopLine.startX !== 0 && this.activeObj.horTopLine.endX !== 0\n                && !this.currObjType.isCustomCrop && this.currObjType.shape !== '') {\n                this.objColl.push(extend({}, this.activeObj, {}, true));\n            }\n            if (this.activeObj.shape === 'text' || (this.currObjType.shape === 'ellipse' || this.currObjType.shape === 'rectangle' ||\n                this.currObjType.shape === 'line')) {\n                for (let j = 0; j < this.objColl.length; j++) {\n                    this.apply(this.objColl[j].shape, this.objColl[j]);\n                }\n                this.apply('shape');\n            }\n        }\n    }\n    updateTextFromTextArea(ratio) {\n        this.activeObj.keyHistory = this.textBox.value;\n        this.textBox.style.display = 'none';\n        this.textBox.value = '';\n        this.updateFontStyles();\n        let width = this.upperContext.measureText(this.activeObj.keyHistory).width +\n            this.activeObj.textSettings.fontSize * 0.5;\n        let height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n        const rows = this.activeObj.keyHistory.split('\\n');\n        if (rows.length > 1) {\n            height *= rows.length;\n            const widthColl = [];\n            for (let i = 0; i < rows.length; i++) {\n                widthColl.push(this.upperContext.measureText(rows[i]).width +\n                    this.activeObj.textSettings.fontSize * 0.5);\n            }\n            width = Math.max(...widthColl);\n        }\n        this.setTextSelection(width, height);\n        this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n    }\n    redrawActObj(x, y) {\n        const ratio = this.calcRatio();\n        let splitWords;\n        const bbox = this.upperCanvas.getBoundingClientRect();\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (this.activeObj.horTopLine !== undefined && (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n            if (this.textBox.style.display === 'block') {\n                this.activeObj.textSettings.fontFamily = this.textBox.style.fontFamily;\n                this.activeObj.strokeSettings.strokeColor = this.textBox.style.color;\n                if (this.textBox.style.fontWeight === 'bold') {\n                    this.activeObj.textSettings.bold = true;\n                }\n                else {\n                    this.activeObj.textSettings.bold = false;\n                }\n                if (this.textBox.style.fontStyle === 'italic') {\n                    this.activeObj.textSettings.italic = true;\n                }\n                else {\n                    this.activeObj.textSettings.italic = false;\n                }\n                this.activeObj.textSettings.fontSize = (parseFloat(this.textBox.style.fontSize) * ((ratio.width + ratio.height) / 2)) / this.factor;\n                if (x && y) {\n                    x -= bbox.left;\n                    y -= bbox.top;\n                    if ((x !== this.activeObj.activePoint.startX / ratio.width) && (y !== this.activeObj.activePoint.startY /\n                        ratio.height)) {\n                        this.updateTextFromTextArea(ratio);\n                        this.applyActObj();\n                    }\n                }\n                else {\n                    this.updateTextFromTextArea(ratio);\n                    this.apply(this.activeObj.shape, this.activeObj);\n                    this.objColl.push(this.activeObj);\n                    this.refreshActiveObj();\n                    this.textBox.style.transform = '';\n                    this.refreshToolbar('main');\n                }\n            }\n            else {\n                this.applyActObj();\n            }\n        }\n    }\n    setTextBoxPos(actObj, degree, flip, x, y, ratio) {\n        const point = { x: x, y: y };\n        if (degree === 0) {\n            if (flip.toLowerCase() === 'horizontal') {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left) +\n                        actObj.activePoint.width / ratio.width;\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                }\n                else {\n                    point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left) + actObj.activePoint.width;\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top);\n                }\n            }\n            else if (flip.toLowerCase() === 'vertical') {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left) -\n                        actObj.activePoint.width / ratio.width;\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                        actObj.activePoint.height / ratio.height;\n                }\n                else {\n                    point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left) - actObj.activePoint.width;\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                }\n            }\n            else {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                }\n                else {\n                    point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top);\n                }\n            }\n        }\n        else if (degree === 90) {\n            if (flip.toLowerCase() === 'horizontal') {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                }\n                else {\n                    point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top);\n                }\n            }\n            else if (flip.toLowerCase() === 'vertical') {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                        actObj.activePoint.height / ratio.height;\n                }\n                else {\n                    point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                }\n            }\n            else {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left) +\n                        actObj.activePoint.width / ratio.width;\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                }\n                else {\n                    point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left) + actObj.activePoint.width;\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top);\n                }\n            }\n        }\n        else if (degree === 180) {\n            if (flip.toLowerCase() === 'horizontal') {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                        actObj.activePoint.height / ratio.height;\n                }\n                else {\n                    point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                }\n            }\n            else if (flip.toLowerCase() === 'vertical') {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                }\n                else {\n                    point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top);\n                }\n            }\n            else {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left) +\n                        actObj.activePoint.width / ratio.width;\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                        actObj.activePoint.height / ratio.height;\n                }\n                else {\n                    point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left) + actObj.activePoint.width;\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                }\n            }\n        }\n        else if (degree === 270) {\n            if (flip.toLowerCase() === 'horizontal') {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left) +\n                        actObj.activePoint.width / ratio.width;\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                        actObj.activePoint.height / ratio.height;\n                }\n                else {\n                    point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left) + actObj.activePoint.width;\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                }\n            }\n            else if (flip.toLowerCase() === 'vertical') {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left) -\n                        actObj.activePoint.width / ratio.width;\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                }\n                else {\n                    point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left) - actObj.activePoint.width;\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top);\n                }\n            }\n            else {\n                if (this.factor === 1) {\n                    point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                        actObj.activePoint.height / ratio.height;\n                }\n                else {\n                    point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                        + parseFloat(this.lowerCanvas.style.left);\n                    point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                        + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                }\n            }\n        }\n        return point;\n    }\n    setTextBoxPoints(actObj, degree, flip, x, y, ratio) {\n        const point = { x: x, y: y };\n        if (degree === 0) {\n            if (actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                            actObj.activePoint.height / ratio.height;\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                    }\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                            actObj.activePoint.height / ratio.height;\n                    }\n                    else {\n                        point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                    }\n                }\n            }\n            else {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left +\n                            actObj.activePoint.width / ratio.width);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                            actObj.activePoint.height / ratio.height;\n                    }\n                    else {\n                        point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left) + actObj.activePoint.width;\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                    }\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n            }\n        }\n        else if (degree === 90) {\n            if (actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.endY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.endY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top) +\n                            actObj.activePoint.height / ratio.height;\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top) + actObj.activePoint.height;\n                    }\n                }\n            }\n            else {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.endY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.endY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n            }\n        }\n        else if (degree === 180) {\n            if (actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left)\n                            + actObj.activePoint.width / ratio.width;\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n            }\n            else {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.endY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.endY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n            }\n        }\n        else if (degree === 270) {\n            if (actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n            }\n            else {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.startX / ratio.width) + parseFloat(this.lowerCanvas.style.left) +\n                            actObj.activePoint.width / ratio.width;\n                        point.y = (actObj.activePoint.startY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.startX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.startY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    if (this.factor === 1) {\n                        point.x = (actObj.activePoint.endX / ratio.width) + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.endY / ratio.height) + parseFloat(this.lowerCanvas.style.top);\n                    }\n                    else {\n                        point.x = (actObj.activePoint.endX - ((this.pannStart.startX) / ratio.width * this.factor))\n                            + parseFloat(this.lowerCanvas.style.left);\n                        point.y = (actObj.activePoint.endY - ((this.pannStart.startY) / ratio.height * this.factor))\n                            + parseFloat(this.lowerCanvas.style.top);\n                    }\n                }\n            }\n        }\n        return point;\n    }\n    findTextTarget(e) {\n        let x;\n        let y;\n        if (e.type === 'dblclick') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else if (e.type === 'touchstart') {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        const bbox = this.upperCanvas.getBoundingClientRect();\n        const ratio = this.calcRatio();\n        let degree;\n        let flip = '';\n        if (this.activeObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - this.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (this.activeObj.shapeFlip === this.currFlipState) {\n            flip = '';\n        }\n        else {\n            flip = this.currFlipState;\n        }\n        let temp;\n        if (this.textBox.style.display === 'block') {\n            x -= bbox.left;\n            y -= bbox.top;\n        }\n        else {\n            temp = extend({}, this.activeObj, {}, true);\n            for (let i = 0; i < this.objColl.length; i++) {\n                if (JSON.stringify(this.activeObj) === JSON.stringify(this.objColl[i])) {\n                    this.objColl.splice(i, 1);\n                }\n            }\n            this.lowerContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n            for (let i = 0; i < this.objColl.length; i++) {\n                this.apply(this.objColl[i].shape, this.objColl[i]);\n            }\n            this.activeObj = temp;\n            this.updateFontStyles();\n            if (this.factor === 1) {\n                x = (x - bbox.left) * ratio.width;\n                y = (y - bbox.top) * ratio.height;\n            }\n            else {\n                x = (x - bbox.left) + ((this.pannStart.startX) / ratio.width * this.factor);\n                y = (y - bbox.top) + ((this.pannStart.startY) / ratio.height * this.factor);\n            }\n            let actObj = extend({}, this.activeObj, {}, true);\n            if (this.factor !== 1) {\n                actObj = this.setCursorForZoomState(actObj, ratio, true);\n            }\n            if (x >= (actObj.activePoint.startX - actObj.topLeftCircle.radius) &&\n                x <= (actObj.activePoint.endX + actObj.topLeftCircle.radius) &&\n                y >= (actObj.activePoint.startY - actObj.topLeftCircle.radius) &&\n                y <= (actObj.activePoint.endY + actObj.topLeftCircle.radius)) {\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                if (actObj.flipObjColl.length === 4) {\n                    actObj.flipObjColl = [];\n                    flip = '';\n                }\n                if (flip === '' && actObj.flipObjColl.length > 1) {\n                    flip = actObj.flipObjColl[actObj.flipObjColl.length - 1];\n                }\n                if (actObj.flipObjColl.length <= 1) {\n                    const points = this.setTextBoxPos(actObj, degree, flip, x, y, ratio);\n                    x = points.x;\n                    y = points.y;\n                }\n                else {\n                    const points = this.setTextBoxPoints(actObj, degree, flip, x, y, ratio);\n                    x = points.x;\n                    y = points.y;\n                }\n                this.textBox.style.display = 'block';\n                this.textBox.style.left = x + 'px';\n                this.textBox.style.top = y + 'px';\n                this.textBox.style.fontFamily = actObj.textSettings.fontFamily;\n                this.textBox.style.fontSize = actObj.textSettings.fontSize / ((ratio.width + ratio.height) / 2) * this.factor + 'px';\n                this.textBox.style.color = actObj.strokeSettings.strokeColor;\n                this.textBox.style.fontWeight = actObj.textSettings.bold ? 'bold' : 'normal';\n                this.textBox.style.fontStyle = actObj.textSettings.italic ? 'italic' : 'normal';\n                this.textBox.style.border = '2px solid ' + this.themeColl[this.theme]['primaryColor'];\n                this.textBox.value = actObj.keyHistory;\n                this.textBox.style.overflow = 'hidden';\n                this.textBox.style.height = 'auto';\n                if (degree % 90 === 0 && degree % 180 !== 0 && degree !== 0) {\n                    if (this.factor === 1) {\n                        this.textBox.style.width = (actObj.activePoint.height / ratio.height) + 'px';\n                        this.textBox.style.height = (actObj.activePoint.width / ratio.width) + 'px';\n                    }\n                    else {\n                        this.textBox.style.width = actObj.activePoint.height + 'px';\n                        this.textBox.style.height = actObj.activePoint.width + 'px';\n                    }\n                }\n                else {\n                    if (this.factor === 1) {\n                        this.textBox.style.width = (actObj.activePoint.width / ratio.width) + 'px';\n                        this.textBox.style.height = (actObj.activePoint.height / ratio.height) + 'px';\n                    }\n                    else {\n                        this.textBox.style.width = actObj.activePoint.width + 'px';\n                        this.textBox.style.height = actObj.activePoint.height + 'px';\n                    }\n                }\n                this.setTextBoxWidth();\n                this.setTextBoxHeight();\n            }\n            else {\n                this.applyActObj();\n            }\n        }\n    }\n    setTextBoxHeight() {\n        const ratio = this.calcRatio();\n        let textBoxTop;\n        let degree;\n        let flip = '';\n        let actObj = extend({}, this.activeObj, {}, true);\n        if (this.factor !== 1) {\n            actObj = this.setCursorForZoomState(actObj, ratio, true);\n        }\n        if (actObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - actObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (actObj.shapeFlip === this.currFlipState) {\n            flip = '';\n        }\n        else {\n            flip = this.currFlipState;\n        }\n        if (degree === 0) {\n            if (flip.toLowerCase() === 'vertical') {\n                this.textBox.style.maxHeight = (parseFloat(this.lowerCanvas.style.maxHeight) - (parseFloat(this.lowerCanvas.style.maxHeight)\n                    - parseFloat(this.textBox.style.top))) + 'px';\n            }\n            else {\n                textBoxTop = parseFloat(this.textBox.style.top) - parseFloat(this.lowerCanvas.style.top);\n                this.textBox.style.maxHeight = (parseFloat(this.lowerCanvas.style.maxHeight) - textBoxTop) + 'px';\n            }\n        }\n        else if (degree === 90) {\n            if (flip.toLowerCase() === 'horizontal') {\n                this.textBox.style.maxHeight = (parseFloat(this.lowerCanvas.style.maxWidth) - (parseFloat(this.textBox.style.left)\n                    - parseFloat(this.lowerCanvas.style.left))) + 'px';\n            }\n            else {\n                this.textBox.style.maxHeight = (parseFloat(this.textBox.style.left)\n                    - parseFloat(this.lowerCanvas.style.left)) + 'px';\n            }\n        }\n        else if (degree === 180) {\n            if (flip.toLowerCase() === 'vertical') {\n                textBoxTop = parseFloat(this.textBox.style.top) - parseFloat(this.lowerCanvas.style.top);\n                this.textBox.style.maxHeight = (parseFloat(this.lowerCanvas.style.maxHeight) - textBoxTop) + 'px';\n            }\n            else {\n                this.textBox.style.maxHeight = (parseFloat(this.textBox.style.top)\n                    - parseFloat(this.lowerCanvas.style.top)) + 'px';\n            }\n        }\n        else if (degree === 270) {\n            if (flip.toLowerCase() === 'horizontal') {\n                this.textBox.style.maxHeight = (parseFloat(this.textBox.style.left)\n                    - parseFloat(this.lowerCanvas.style.left)) + 'px';\n            }\n            else {\n                this.textBox.style.maxHeight = parseFloat(this.lowerCanvas.style.maxWidth) - (parseFloat(this.textBox.style.left)\n                    - parseFloat(this.lowerCanvas.style.left)) + 'px';\n            }\n        }\n        this.textBox.style.maxHeight = ((parseFloat(this.textBox.style.maxHeight) - parseFloat(this.textBox.style.fontSize) * 0.5)) + 'px';\n    }\n    setTextBoxWidth(e) {\n        const ratio = this.calcRatio();\n        const text = this.getMaxText(true);\n        if (this.textBox.style.display === 'block') {\n            this.updateFontStyles(true);\n        }\n        else {\n            this.updateFontStyles();\n        }\n        let textBoxWidth = (this.upperContext.measureText(text).width + (parseFloat(this.textBox.style.fontSize) / 2));\n        let letterWidth = e ? this.upperContext.measureText(String.fromCharCode(e.which)).width : 0;\n        let actObj = extend({}, this.activeObj, {}, true);\n        if (this.factor !== 1) {\n            actObj = this.setCursorForZoomState(actObj, ratio, true);\n        }\n        let degree;\n        let flip = '';\n        if (actObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - actObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (actObj.shapeFlip === this.currFlipState) {\n            flip = '';\n        }\n        else {\n            flip = this.currFlipState;\n        }\n        if ((!isNullOrUndefined(e) && parseFloat(this.textBox.style.width) < (textBoxWidth + letterWidth)) || isNullOrUndefined(e)) {\n            if (degree === 0) {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if ((parseFloat(this.textBox.style.left) - parseFloat(this.lowerCanvas.style.left)) - textBoxWidth - letterWidth > 0) {\n                        this.textBox.style.width = (textBoxWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    if ((parseFloat(this.lowerCanvas.style.maxWidth) - (parseFloat(this.textBox.style.left)\n                        - parseFloat(this.lowerCanvas.style.left))) > (textBoxWidth + letterWidth)) {\n                        this.textBox.style.width = (textBoxWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n            else if (degree === 90) {\n                if (flip.toLowerCase() === 'vertical') {\n                    if ((parseFloat(this.textBox.style.top) - parseFloat(this.lowerCanvas.style.top)) - textBoxWidth - letterWidth > 0) {\n                        this.textBox.style.width = (textBoxWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    if ((parseFloat(this.lowerCanvas.style.maxHeight) - (parseFloat(this.textBox.style.top)\n                        - parseFloat(this.lowerCanvas.style.top))) > (textBoxWidth + letterWidth)) {\n                        this.textBox.style.width = (textBoxWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n            else if (degree === 180) {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if ((parseFloat(this.lowerCanvas.style.maxWidth) - (parseFloat(this.textBox.style.left)\n                        - parseFloat(this.lowerCanvas.style.left))) > (textBoxWidth + letterWidth)) {\n                        this.textBox.style.width = (textBoxWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    if ((parseFloat(this.textBox.style.left) - parseFloat(this.lowerCanvas.style.left)) - textBoxWidth - letterWidth > 0) {\n                        this.textBox.style.width = (textBoxWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n            else if (degree === 270) {\n                if (flip.toLowerCase() === 'vertical') {\n                    if ((parseFloat(this.lowerCanvas.style.maxHeight) - (parseFloat(this.textBox.style.top)\n                        - parseFloat(this.lowerCanvas.style.top))) > (textBoxWidth + letterWidth)) {\n                        this.textBox.style.width = (textBoxWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    if ((parseFloat(this.textBox.style.top) - parseFloat(this.lowerCanvas.style.top)) - textBoxWidth - letterWidth > 0) {\n                        this.textBox.style.width = (textBoxWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n        }\n    }\n    setActivePoint(startX, startY) {\n        if (isNullOrUndefined(this.activeObj.activePoint)) {\n            return;\n        }\n        if (this.currObjType.isText) {\n            const textWidth = startX ? startX : 0;\n            const textHeight = startY ? startY : this.activeObj.textSettings.fontSize;\n            if (this.activeObj.textSettings.fontSize === undefined) {\n                this.activeObj.textSettings.fontSize = (Math.abs(this.baseImg.width - this.baseImg.height)) * 0.1;\n            }\n            this.setTextSelection(textWidth, textHeight);\n            this.mouseDownPoint.x = this.activeObj.activePoint.endX;\n            this.mouseDownPoint.y = this.activeObj.activePoint.endY;\n            if (this.activeObj.horTopLine !== undefined) {\n                this.activeObj.activePoint = extend({}, this.activeObj.activePoint, {}, true);\n            }\n            this.drawObject('duplicate');\n        }\n        else if (startX && startY) {\n            this.activeObj.activePoint.startX = this.mouseDownPoint.x = startX;\n            this.activeObj.activePoint.startY = this.mouseDownPoint.y = startY;\n            this.currObjType.isDragging = true;\n        }\n        else {\n            const selectInfo = this.activeObj;\n            this.activeObj.activePoint = { startX: selectInfo.horTopLine.startX, startY: selectInfo.horTopLine.startY,\n                endX: selectInfo.horTopLine.endX, endY: selectInfo.horTopLine.endY };\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        }\n    }\n    updateActivePoint(x, y) {\n        let initialDraw = false;\n        const bbox = this.lowerCanvas.getBoundingClientRect();\n        const ratio = this.calcRatio();\n        if (this.dragElement !== '') {\n            if (this.factor === 1) {\n                x = (x - bbox.left) * ratio.width;\n                y = (y - bbox.top) * ratio.height;\n            }\n            else {\n                x = ((x - bbox.left) * ratio.width) / this.factor + this.pannStart.startX;\n                y = ((y - bbox.top) * ratio.height) / this.factor + this.pannStart.startY;\n            }\n        }\n        const maxDimension = this.calcMaxDimension(this.activeObj.activePoint.width, this.activeObj.activePoint.height);\n        const shapeResizingArgs = { action: 'resize', previousShapeSettings: this.activeObj };\n        const shapeMovingArgs = { action: 'move', previousShapeSettings: this.activeObj };\n        switch (this.dragElement.toLowerCase()) {\n            case 'nw-resize':\n                this.updateNWPoints(x, y, maxDimension);\n                break;\n            case 'n-resize':\n                this.updateNPoints(x, y);\n                break;\n            case 'ne-resize':\n                this.updateNEPoints(x, y, maxDimension);\n                break;\n            case 'w-resize':\n                this.updateWPoints(x, y);\n                break;\n            case 'e-resize':\n                this.updateEPoints(x, y);\n                break;\n            case 'sw-resize':\n                this.updateSWPoints(x, y, maxDimension);\n                break;\n            case 's-resize':\n                this.updateSPoints(x, y);\n                break;\n            case 'se-resize':\n                this.updateSEPoints(x, y, maxDimension);\n                break;\n            default:\n                if (this.dragPoint.startX) {\n                    let width = (this.dragPoint.endX - this.previousPoint.x);\n                    let height = (this.dragPoint.endY - this.previousPoint.y);\n                    if (this.factor !== 1) {\n                        width = (width * ratio.width) / this.factor;\n                        height = (height * ratio.height) / this.factor;\n                    }\n                    this.activeObj.activePoint.startX += width;\n                    this.activeObj.activePoint.endX += width;\n                    this.activeObj.activePoint.startY += height;\n                    this.activeObj.activePoint.endY += height;\n                    const endPoint = { x: this.lowerCanvas.width - this.pannEnd.startX, y: this.lowerCanvas.height - this.pannEnd.startY };\n                    if (this.activeObj.shape !== 'text' && !this.allowDrag) {\n                        if (this.factor > 1 && (this.activeObj.activePoint.startX < this.pannStart.startX ||\n                            this.activeObj.activePoint.endX > endPoint.x) && (this.activeObj.activePoint.startY < this.pannStart.startY ||\n                            this.activeObj.activePoint.endY > endPoint.y)) {\n                            this.activeObj.activePoint.startX -= width;\n                            this.activeObj.activePoint.endX -= width;\n                            this.activeObj.activePoint.startY -= height;\n                            this.activeObj.activePoint.endY -= height;\n                        }\n                        else if (this.factor > 1 && (this.activeObj.activePoint.startX < this.pannStart.startX ||\n                            this.activeObj.activePoint.endX > endPoint.x)) {\n                            this.activeObj.activePoint.startX -= width;\n                            this.activeObj.activePoint.endX -= width;\n                        }\n                        else if (this.factor > 1 && (this.activeObj.activePoint.startY < this.pannStart.startY ||\n                            this.activeObj.activePoint.endY > endPoint.y)) {\n                            this.activeObj.activePoint.startY -= height;\n                            this.activeObj.activePoint.endY -= height;\n                        }\n                    }\n                    if (this.activeObj.activePoint.startX >= this.pannStart.startX && this.activeObj.activePoint.startY >=\n                        this.pannStart.startY && this.activeObj.activePoint.endX <= endPoint.x && this.activeObj.activePoint.endY\n                        <= endPoint.y) {\n                        this.allowDrag = false;\n                    }\n                }\n                else {\n                    this.activeObj.activePoint.startX = x < this.mouseDownPoint.x ? x : this.mouseDownPoint.x;\n                    this.activeObj.activePoint.startY = y < this.mouseDownPoint.y ? y : this.mouseDownPoint.y;\n                    if (this.factor === 1) {\n                        this.activeObj.activePoint.startX = (this.activeObj.activePoint.startX - bbox.left) * ratio.width;\n                        this.activeObj.activePoint.startY = (this.activeObj.activePoint.startY - bbox.top) * ratio.height;\n                        initialDraw = false;\n                    }\n                    else {\n                        this.activeObj.activePoint.startX = (this.activeObj.activePoint.startX - bbox.left) + ((this.pannStart.startX)\n                            / ratio.width * this.factor);\n                        this.activeObj.activePoint.startY = (this.activeObj.activePoint.startY - bbox.top) + ((this.pannStart.startY)\n                            / ratio.height * this.factor);\n                        initialDraw = true;\n                    }\n                    x = x < this.mouseDownPoint.x ? this.mouseDownPoint.x : x;\n                    y = y < this.mouseDownPoint.y ? this.mouseDownPoint.y : y;\n                    if (this.factor === 1) {\n                        this.activeObj.activePoint.endX = (x - bbox.left) * ratio.width;\n                        this.activeObj.activePoint.endY = (y - bbox.top) * ratio.height;\n                        initialDraw = false;\n                    }\n                    else {\n                        this.activeObj.activePoint.endX = (x - bbox.left) + ((this.pannStart.startX) / ratio.width * this.factor);\n                        this.activeObj.activePoint.endY = (y - bbox.top) + ((this.pannStart.startY) / ratio.height * this.factor);\n                        initialDraw = true;\n                    }\n                }\n                break;\n        }\n        shapeResizingArgs.currentShapeSettings = this.activeObj;\n        shapeMovingArgs.currentShapeSettings = this.activeObj;\n        this.trigger('shapeChanging', shapeMovingArgs);\n        this.trigger('shapeChanging', shapeResizingArgs);\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        return initialDraw;\n    }\n    updateNWPoints(x, y, maxDimension) {\n        let diff;\n        let width;\n        let height;\n        let scale;\n        let percentage;\n        const prevDiffX = this.diffPoint.x;\n        const prevDiffY = this.diffPoint.y;\n        if (this.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = this.activeObj.activePoint.startX - x;\n                this.diffPoint.y = this.activeObj.activePoint.startY - y;\n            }\n            else {\n                this.diffPoint.x = this.oldPoint.x - x;\n                this.diffPoint.y = this.oldPoint.y - y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = diff / 10;\n            this.activeObj.activePoint.startX -= (maxDimension.width / 100) * percentage;\n            this.activeObj.activePoint.startY -= (maxDimension.height / 100) * percentage;\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            let degree;\n            const maxText = this.getMaxText();\n            if (this.activeObj.shapeDegree === 0) {\n                degree = this.degree;\n            }\n            else {\n                degree = this.degree - this.activeObj.shapeDegree;\n            }\n            if (degree === 0 || degree === 180) {\n                this.activeObj.textSettings.fontSize = (this.activeObj.activePoint.width / maxText.length) * 2;\n            }\n            else {\n                this.activeObj.textSettings.fontSize = (this.activeObj.activePoint.height / maxText.length) * 2;\n            }\n        }\n        else {\n            let splitWords;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.currObjType.isCustomCrop || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.startX = x;\n                this.activeObj.activePoint.startY = y;\n                if (this.activeObj.activePoint.startX > this.activeObj.activePoint.endX) {\n                    const temp = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = temp;\n                    this.dragElement = 'ne-resize';\n                }\n                if (this.activeObj.activePoint.startY > this.activeObj.activePoint.endY) {\n                    const temp = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = temp;\n                    this.dragElement = 'sw-resize';\n                }\n            }\n            else {\n                if (this.activeObj.activePoint.startX < x && this.activeObj.activePoint.startY < y) {\n                    width = x - this.activeObj.activePoint.startX;\n                    height = y - this.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX += newScale.x;\n                    this.activeObj.activePoint.startY += newScale.y;\n                    if (this.activeObj.activePoint.startX < 0 || this.activeObj.activePoint.startY < 0) {\n                        this.activeObj.activePoint.startX -= newScale.x;\n                        this.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = this.activeObj.activePoint.startX - x;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX -= newScale.x;\n                    this.activeObj.activePoint.startY -= newScale.y;\n                    if (this.activeObj.activePoint.startX < 0 || this.activeObj.activePoint.startY < 0) {\n                        this.activeObj.activePoint.startX += newScale.x;\n                        this.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        }\n    }\n    updateNPoints(x, y) {\n        let width;\n        let height;\n        let scale;\n        if (this.activeObj.shape !== 'text') {\n            let splitWords;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.currObjType.isCustomCrop || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.startY = y;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n                if (this.activeObj.activePoint.startY > this.activeObj.activePoint.endY) {\n                    const temp = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = temp;\n                    this.dragElement = 's-resize';\n                }\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.startY < y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = y - this.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.startY += newScale.y;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.startY < 0) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = this.activeObj.activePoint.startY - y;\n                    scale = Math.max(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.startY -= newScale.y;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.startY < 0) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            }\n        }\n    }\n    updateNEPoints(x, y, maxDimension) {\n        let diff;\n        let width;\n        let height;\n        let scale;\n        let percentage;\n        const prevDiffX = this.diffPoint.x;\n        const prevDiffY = this.diffPoint.y;\n        if (this.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = x - this.activeObj.activePoint.endX;\n                this.diffPoint.y = this.activeObj.activePoint.startY - y;\n            }\n            else {\n                this.diffPoint.x = x - this.oldPoint.x;\n                this.diffPoint.y = this.oldPoint.y - y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = diff / 10;\n            this.activeObj.activePoint.endX += (maxDimension.width / 100) * percentage;\n            this.activeObj.activePoint.startY -= (maxDimension.height / 100) * percentage;\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            let degree;\n            const maxText = this.getMaxText();\n            if (this.activeObj.shapeDegree === 0) {\n                degree = this.degree;\n            }\n            else {\n                degree = this.degree - this.activeObj.shapeDegree;\n            }\n            if (degree === 0 || degree === 180) {\n                this.activeObj.textSettings.fontSize = (this.activeObj.activePoint.width / maxText.length) * 2;\n            }\n            else {\n                this.activeObj.textSettings.fontSize = (this.activeObj.activePoint.height / maxText.length) * 2;\n            }\n        }\n        else {\n            let splitWords;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.currObjType.isCustomCrop || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.endX = x;\n                this.activeObj.activePoint.startY = y;\n                if (this.activeObj.activePoint.endX < this.activeObj.activePoint.startX) {\n                    const temp = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = temp;\n                    this.dragElement = 'nw-resize';\n                }\n                if (this.activeObj.activePoint.startY > this.activeObj.activePoint.endY) {\n                    const temp = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = temp;\n                    this.dragElement = 'se-resize';\n                }\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.startY < y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = y - this.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.startY += newScale.y;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.startY < 0) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = this.activeObj.activePoint.startY - y;\n                    scale = Math.max(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.startY -= newScale.y;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.startY < 0) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        }\n    }\n    updateWPoints(x, y) {\n        let width;\n        let height;\n        let scale;\n        if (this.activeObj.shape !== 'text') {\n            let splitWords;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.currObjType.isCustomCrop || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.startX = x;\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                if (this.activeObj.activePoint.startX > this.activeObj.activePoint.endX) {\n                    const temp = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = temp;\n                    this.dragElement = 'e-resize';\n                }\n            }\n            else {\n                if (this.activeObj.activePoint.startX < x && this.activeObj.activePoint.endY > y) {\n                    width = x - this.activeObj.activePoint.startX;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX += newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    if (this.activeObj.activePoint.startX < 0 || this.activeObj.activePoint.endY > this.lowerCanvas.height) {\n                        this.activeObj.activePoint.startX -= newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = this.activeObj.activePoint.startX - x;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX -= newScale.x;\n                    this.activeObj.activePoint.endY += newScale.y;\n                    if (this.activeObj.activePoint.startX < 0 || this.activeObj.activePoint.endY > this.lowerCanvas.height) {\n                        this.activeObj.activePoint.startX += newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            }\n        }\n    }\n    updateEPoints(x, y) {\n        let width;\n        let height;\n        let scale;\n        if (this.activeObj.shape !== 'text') {\n            let splitWords;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.currObjType.isCustomCrop || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.endX = x;\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                if (this.activeObj.activePoint.endX < this.activeObj.activePoint.startX) {\n                    const temp = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = temp;\n                    this.dragElement = 'w-resize';\n                }\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.endY > y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.endY >\n                        this.lowerCanvas.height) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.endY += newScale.y;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.endY >\n                        this.lowerCanvas.height) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            }\n        }\n    }\n    updateSWPoints(x, y, maxDimension) {\n        let diff;\n        let width;\n        let height;\n        let scale;\n        let percentage;\n        const prevDiffX = this.diffPoint.x;\n        const prevDiffY = this.diffPoint.y;\n        if (this.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = this.activeObj.activePoint.startX - x;\n                this.diffPoint.y = y - this.activeObj.activePoint.endY;\n            }\n            else {\n                this.diffPoint.x = this.oldPoint.x - x;\n                this.diffPoint.y = y - this.oldPoint.y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = diff / 10;\n            this.activeObj.activePoint.startX -= (maxDimension.width / 100) * percentage;\n            this.activeObj.activePoint.endY += (maxDimension.height / 100) * percentage;\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            let degree;\n            const maxText = this.getMaxText();\n            if (this.activeObj.shapeDegree === 0) {\n                degree = this.degree;\n            }\n            else {\n                degree = this.degree - this.activeObj.shapeDegree;\n            }\n            if (degree === 0 || degree === 180) {\n                this.activeObj.textSettings.fontSize = (this.activeObj.activePoint.width / maxText.length) * 2;\n            }\n            else {\n                this.activeObj.textSettings.fontSize = (this.activeObj.activePoint.height / maxText.length) * 2;\n            }\n        }\n        else {\n            let splitWords;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.currObjType.isCustomCrop || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.startX = x;\n                this.activeObj.activePoint.endY = y;\n                if (this.activeObj.activePoint.startX > this.activeObj.activePoint.endX) {\n                    const temp = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = temp;\n                    this.dragElement = 'se-resize';\n                }\n                if (this.activeObj.activePoint.endY < this.activeObj.activePoint.startY) {\n                    const temp = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = temp;\n                    this.dragElement = 'nw-resize';\n                }\n            }\n            else {\n                if (this.activeObj.activePoint.startX < x && this.activeObj.activePoint.endY > y) {\n                    width = x - this.activeObj.activePoint.startX;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX += newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    if (this.activeObj.activePoint.startX < 0 || this.activeObj.activePoint.endY > this.lowerCanvas.height) {\n                        this.activeObj.activePoint.startX -= newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = this.activeObj.activePoint.startX - x;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX -= newScale.x;\n                    this.activeObj.activePoint.endY += newScale.y;\n                    if (this.activeObj.activePoint.startX < 0 || this.activeObj.activePoint.endY > this.lowerCanvas.height) {\n                        this.activeObj.activePoint.startX += newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        }\n    }\n    updateSPoints(x, y) {\n        let width;\n        let height;\n        let scale;\n        if (this.activeObj.shape !== 'text') {\n            let splitWords;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.currObjType.isCustomCrop || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.endY = y;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n                if (this.activeObj.activePoint.endY < this.activeObj.activePoint.startY) {\n                    const temp = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = temp;\n                    this.dragElement = 'n-resize';\n                }\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.endY > y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.endY >\n                        this.lowerCanvas.height) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.endY += newScale.x;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.endY >\n                        this.lowerCanvas.height) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            }\n        }\n    }\n    updateSEPoints(x, y, maxDimension) {\n        let diff;\n        let width;\n        let height;\n        let scale;\n        let percentage;\n        const prevDiffX = this.diffPoint.x;\n        const prevDiffY = this.diffPoint.y;\n        if (this.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = x - this.activeObj.activePoint.endX;\n                this.diffPoint.y = y - this.activeObj.activePoint.endY;\n            }\n            else {\n                this.diffPoint.x = x - this.oldPoint.x;\n                this.diffPoint.y = y - this.oldPoint.y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x >= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = diff / 10;\n            this.activeObj.activePoint.endX += (maxDimension.width / 50) * percentage;\n            this.activeObj.activePoint.endY += (maxDimension.height / 50) * percentage;\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            let degree;\n            const maxText = this.getMaxText();\n            if (this.activeObj.shapeDegree === 0) {\n                degree = this.degree;\n            }\n            else {\n                degree = this.degree - this.activeObj.shapeDegree;\n            }\n            if (degree === 0 || degree === 180) {\n                this.activeObj.textSettings.fontSize = (this.activeObj.activePoint.width / maxText.length) * 2;\n            }\n            else {\n                this.activeObj.textSettings.fontSize = (this.activeObj.activePoint.height / maxText.length) * 2;\n            }\n        }\n        else {\n            let splitWords;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.currObjType.isCustomCrop || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.endX = x;\n                this.activeObj.activePoint.endY = y;\n                if (this.activeObj.activePoint.endX < this.activeObj.activePoint.startX) {\n                    const temp = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = temp;\n                    this.dragElement = 'sw-resize';\n                }\n                if (this.activeObj.activePoint.endY < this.activeObj.activePoint.startY) {\n                    const temp = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = temp;\n                    this.dragElement = 'ne-resize';\n                }\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.endY > y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    let ratio = this.activeObj.shape.split('-');\n                    ratio = ratio[1].split(':');\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.endY >\n                        this.lowerCanvas.height) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    const newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.endY += newScale.y;\n                    if (this.activeObj.activePoint.endX > this.lowerCanvas.width || this.activeObj.activePoint.endY >\n                        this.lowerCanvas.height) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        }\n    }\n    getScaleRatio(scale) {\n        const point = { x: scale, y: scale };\n        if (!this.currObjType.isCustomCrop && this.activeObj.shape !== 'crop-circle' && this.activeObj.shape !== 'crop-square') {\n            let ratio = this.activeObj.shape.split('-');\n            ratio = ratio[1].split(':');\n            const newScale = scale / (parseInt(ratio[1], 10));\n            point.x = newScale * (parseInt(ratio[0], 10));\n            point.y = newScale * (parseInt(ratio[1], 10));\n        }\n        return point;\n    }\n    getMaxText(isTextBox) {\n        const text = isTextBox ? this.textBox.value : this.activeObj.keyHistory;\n        let maxi;\n        const rows = text.split('\\n');\n        let maxStr = rows[0].length;\n        let maxText = rows[0];\n        for (let i = 1; i < rows.length; i++) {\n            maxi = rows[i].length;\n            if (maxi > maxStr) {\n                maxText = rows[i];\n                maxStr = maxi;\n            }\n        }\n        return maxText;\n    }\n    setDragLimit() {\n        if (this.factor === 1 && this.activeObj.activePoint !== undefined && this.activeObj.shape !== 'text') {\n            if (this.activeObj.activePoint.startX < 0) {\n                this.activeObj.activePoint.startX = 0;\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.width;\n            }\n            else if (this.activeObj.activePoint.endX > this.lowerCanvas.width) {\n                this.activeObj.activePoint.endX = this.lowerCanvas.width;\n                this.activeObj.activePoint.startX = this.lowerCanvas.width - this.activeObj.activePoint.width;\n            }\n            if (this.activeObj.activePoint.startY < 0) {\n                this.activeObj.activePoint.startY = 0;\n                this.activeObj.activePoint.endY = this.activeObj.activePoint.height;\n            }\n            else if (this.activeObj.activePoint.endY > this.lowerCanvas.height) {\n                this.activeObj.activePoint.endY = this.lowerCanvas.height;\n                this.activeObj.activePoint.startY = this.lowerCanvas.height - this.activeObj.activePoint.height;\n            }\n        }\n    }\n    lineDraw(ratio) {\n        if (this.activeObj.activePoint.height < 10 * ratio.height) {\n            this.activeObj.activePoint.startY -= 10 * ratio.height;\n            this.activeObj.activePoint.endY += 10 * ratio.height;\n            this.activeObj.lineDraw = 'horizontal';\n        }\n        else if (this.activeObj.activePoint.width < 10 * ratio.width) {\n            this.activeObj.activePoint.startX -= 10 * ratio.width;\n            this.activeObj.activePoint.endX += 10 * ratio.width;\n            this.activeObj.lineDraw = 'vertical';\n        }\n        else if (this.currObjType.isInitialLine) {\n            this.activeObj.lineDraw = 'normal';\n            this.currObjType.isInitialLine = false;\n        }\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n    }\n    shapeCircle(canvasDraw, selectionWidth, selectionHeight) {\n        const ratio = this.calcRatio();\n        canvasDraw.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n        canvasDraw.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        canvasDraw.fillStyle = 'rgb(0, 0, 0, 0.5)';\n        canvasDraw.fillRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        const tempWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (2 * (ratio.width + ratio.height)) / this.factor;\n        canvasDraw.beginPath();\n        canvasDraw.ellipse(this.activeObj.horTopLine.startX + (selectionWidth / 2), this.activeObj.horTopLine.startY\n            + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n        canvasDraw.stroke();\n        canvasDraw.closePath();\n        canvasDraw.save();\n        canvasDraw.beginPath();\n        canvasDraw.arc(((this.activeObj.activePoint.endX - this.activeObj.activePoint.startX) / 2) + this.activeObj.activePoint.startX, ((this.activeObj.activePoint.endY - this.activeObj.activePoint.startY) / 2) + this.activeObj.activePoint.startY, (this.activeObj.activePoint.width / 2), 0, Math.PI * 2);\n        canvasDraw.closePath();\n        canvasDraw.clip();\n        canvasDraw.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        canvasDraw.restore();\n        canvasDraw.lineWidth = tempWidth;\n        this.drawOuterSelection(canvasDraw, null, true);\n        this.currObjType.shape = '';\n    }\n    drawOuterSelection(canvasDraw, isInitialDraw, isCropCircle) {\n        let splitWords;\n        const ratio = this.calcRatio();\n        canvasDraw.lineWidth = (0.5 * (ratio.width + ratio.height)) / this.factor;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        let tempObj = extend({}, this.activeObj, {}, true);\n        if (this.factor !== 1) {\n            if (isInitialDraw) {\n                tempObj = this.getZoomShape(tempObj, ratio);\n            }\n        }\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (((splitWords !== undefined && splitWords[0] === 'crop') || this.activeObj.shape === undefined) && !isCropCircle) {\n            this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.5)';\n            this.upperContext.fillRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.upperContext.clearRect(this.activeObj.activePoint.startX, this.activeObj.activePoint.startY, this.activeObj.activePoint.width, this.activeObj.activePoint.height);\n        }\n        canvasDraw.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n        canvasDraw.fillStyle = this.themeColl[this.theme]['secondaryColor'];\n        if (this.activeObj.shape !== 'rectangle') {\n            canvasDraw.beginPath();\n            canvasDraw.rect(tempObj.activePoint.startX, tempObj.activePoint.startY, tempObj.activePoint.width, tempObj.activePoint.height);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n        }\n        canvasDraw.lineWidth *= 2;\n        canvasDraw.beginPath();\n        canvasDraw.moveTo(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY);\n        canvasDraw.arc(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY, tempObj.topLeftCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY);\n        canvasDraw.arc(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY, tempObj.topRightCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY);\n        canvasDraw.arc(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY, tempObj.bottomLeftCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY);\n        canvasDraw.arc(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY, tempObj.bottomRightCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.stroke();\n        canvasDraw.fill();\n        canvasDraw.closePath();\n        canvasDraw.lineWidth /= 2;\n        if ((splitWords === undefined || splitWords[0] !== 'crop') && this.activeObj.shape !== 'text') {\n            this.drawCenterCircles(canvasDraw);\n        }\n        this.activeObj = extend({}, tempObj, {}, true);\n    }\n    getZoomShape(tempObj, ratio) {\n        const obj = extend({}, tempObj, {}, true);\n        obj.activePoint.startX = (obj.activePoint.startX / this.factor) * ratio.width;\n        obj.activePoint.startY = (obj.activePoint.startY / this.factor) * ratio.height;\n        obj.activePoint.endX = (obj.activePoint.endX / this.factor) * ratio.width;\n        obj.activePoint.endY = (obj.activePoint.endY / this.factor) * ratio.height;\n        obj.activePoint.width = obj.activePoint.endX - obj.activePoint.startX;\n        obj.activePoint.height = obj.activePoint.endY - obj.activePoint.startY;\n        this.updateActiveObject(ratio, obj.activePoint, obj);\n        return obj;\n    }\n    drawObject(canvas, obj, isInitialDraw, isCropRatio, points) {\n        let canvasDraw;\n        if (canvas.toLowerCase() === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else {\n            canvasDraw = this.upperContext;\n        }\n        this.setDragLimit();\n        const ratio = this.calcRatio();\n        if (this.currObjType.isLine && canvas !== 'original' && !obj) {\n            this.lineDraw(ratio);\n        }\n        const splitWords = this.currObjType.shape.split('-');\n        if (splitWords[0].toLowerCase() === 'crop' && isCropRatio) {\n            this.drawCropRatio();\n        }\n        if (points) {\n            this.activeObj.activePoint.startX = points.startX;\n            this.activeObj.activePoint.startY = points.startY;\n            this.activeObj.activePoint.endX = points.endX;\n            this.activeObj.activePoint.endY = points.endY;\n            this.activeObj.activePoint.width = points.width;\n            this.activeObj.activePoint.height = points.height;\n        }\n        if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n            this.activeObj.strokeSettings = this.strokeSettings;\n        }\n        if (isNullOrUndefined(this.activeObj.strokeSettings.strokeWidth)) {\n            this.activeObj.strokeSettings.strokeWidth = 2 * (ratio.width + ratio.height) / this.factor;\n        }\n        if (obj) {\n            this.activeObj = extend({}, obj, {}, true);\n            if (this.factor !== 1) {\n                this.updateActiveObject(ratio);\n            }\n        }\n        else {\n            this.updateActiveObject(ratio);\n        }\n        if (this.currObjType.isText) {\n            this.activeObj.keyHistory = this.keyHistory;\n        }\n        if (canvas.toLowerCase() !== 'original') {\n            let splitWords;\n            let isCrop = false;\n            if (this.activeObj.shape) {\n                splitWords = this.activeObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            if (isCrop) {\n                this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.5)';\n                this.upperContext.fillRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                this.upperContext.clearRect(this.activeObj.activePoint.startX + ratio.width, this.activeObj.activePoint.startY + ratio.height, this.activeObj.activePoint.width - ratio.width, this.activeObj.activePoint.height - ratio.height);\n            }\n            this.drawOuterSelection(canvasDraw, isInitialDraw);\n        }\n        this.currObjType.isActiveObj = true;\n        if (obj) {\n            this.drawShapeObj(canvas, obj.shape);\n        }\n        else if (this.keyHistory !== '' && this.currObjType.isText) {\n            this.drawShapeObj(canvas, 'text');\n        }\n        else if (this.activeObj.shape) {\n            this.drawShapeObj(canvas, this.activeObj.shape);\n        }\n        else {\n            this.drawShapeObj(canvas, undefined);\n        }\n    }\n    updateActiveObject(ratio, actPoint, obj, isMouseMove) {\n        actPoint = actPoint ? actPoint : extend({}, this.activeObj.activePoint, {}, true);\n        obj = obj ? obj : extend({}, this.activeObj, {}, true);\n        const horCircleWidth = actPoint.width / 2;\n        const verCircleHeight = actPoint.height / 2;\n        const radius = 7.5;\n        obj.horTopLine = { startX: actPoint.startX, startY: actPoint.startY,\n            endX: actPoint.endX, endY: actPoint.endY };\n        obj.horBottomLine = { startX: actPoint.startX, startY: actPoint.endY,\n            endX: actPoint.endX, endY: actPoint.endY };\n        obj.verLeftLine = { startX: actPoint.startX, startY: actPoint.startY,\n            endX: actPoint.startX, endY: actPoint.endY };\n        obj.verRightLine = { startX: actPoint.endX, startY: actPoint.startY,\n            endX: actPoint.endX, endY: actPoint.endY };\n        obj.topLeftCircle = { startX: actPoint.startX, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor : 0 };\n        obj.topCenterCircle = { startX: actPoint.startX + horCircleWidth, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor : 0 };\n        obj.topRightCircle = { startX: actPoint.endX, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor : 0 };\n        obj.centerLeftCircle = { startX: actPoint.startX, startY: actPoint.startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor : 0 };\n        obj.centerRightCircle = { startX: actPoint.endX, startY: actPoint.startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor : 0 };\n        obj.bottomLeftCircle = { startX: actPoint.startX, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor : 0 };\n        obj.bottomCenterCircle = { startX: actPoint.startX + horCircleWidth, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor : 0 };\n        obj.bottomRightCircle = { startX: actPoint.endX, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor : 0 };\n        obj.activePoint = actPoint;\n        if (isNullOrUndefined(isMouseMove)) {\n            this.activeObj = extend({}, obj, {}, true);\n        }\n    }\n    drawShapeObj(canvas, shape) {\n        const currentShape = shape !== undefined ? shape : this.currObjType.shape;\n        this.currObjType.shape = currentShape;\n        let canvasDraw;\n        if (canvas.toLowerCase() === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else {\n            canvasDraw = this.upperContext;\n        }\n        if (this.currObjType.shape.toLowerCase() === 'rectangle' || this.currObjType.shape.toLowerCase() === 'ellipse'\n            || this.currObjType.shape.toLowerCase() === 'line') {\n            this.activeObj.shape = this.currObjType.shape;\n        }\n        canvasDraw.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n        if (shape === 'text' || shape === 'freehanddraw') {\n            canvasDraw.fillStyle = this.activeObj.strokeSettings.strokeColor;\n        }\n        else {\n            canvasDraw.fillStyle = this.activeObj.strokeSettings.fillColor;\n        }\n        const horLineWidth = this.activeObj.activePoint.width / 3;\n        const verLineHeight = this.activeObj.activePoint.height / 3;\n        const selectionWidth = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        const selectionHeight = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        switch (this.currObjType.shape.toLowerCase()) {\n            case 'rectangle':\n                this.drawSquareLines(canvasDraw);\n                if (canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'ellipse':\n                canvasDraw.beginPath();\n                canvasDraw.ellipse(this.activeObj.activePoint.startX + (selectionWidth / 2), this.activeObj.activePoint.startY + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n                if (this.activeObj.strokeSettings.fillColor !== '') {\n                    canvasDraw.fillStyle = this.activeObj.strokeSettings.fillColor;\n                    canvasDraw.fill();\n                }\n                canvasDraw.ellipse(this.activeObj.activePoint.startX + (selectionWidth / 2), this.activeObj.activePoint.startY + (selectionHeight / 2), (selectionWidth / 2) - (this.activeObj.strokeSettings.strokeWidth), (selectionHeight / 2) - (this.activeObj.strokeSettings.strokeWidth), 0, 0, 2 * Math.PI, false);\n                canvasDraw.fillStyle = this.activeObj.strokeSettings.strokeColor;\n                canvasDraw.fill('evenodd');\n                canvasDraw.closePath();\n                if (canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'crop-circle':\n                this.shapeCircle(canvasDraw, selectionWidth, selectionHeight);\n                break;\n            case 'line':\n                this.shapeLine(canvasDraw, selectionWidth, selectionHeight);\n                if (canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'text':\n                this.shapeText(canvasDraw);\n                break;\n            case 'crop-square':\n            case 'crop-3:4':\n            case 'crop-4:3':\n            case 'crop-6:9':\n            case 'crop-9:6':\n            case 'crop-9:16':\n            case 'crop-16:9':\n                this.drawSelection(horLineWidth, verLineHeight);\n                this.currObjType.shape = '';\n                break;\n            default:\n                this.drawSelection(horLineWidth, verLineHeight);\n                break;\n        }\n    }\n    shapeLine(canvasDraw, selectionWidth, selectionHeight) {\n        let startX;\n        let startY;\n        let endX;\n        let endY;\n        let degree;\n        if (this.activeObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - this.activeObj.shapeDegree;\n        }\n        if (degree === 0 || degree % 180 === 0) {\n            startX = this.activeObj.activePoint.startX;\n            startY = this.activeObj.activePoint.startY + (selectionHeight / 2);\n            endX = this.activeObj.activePoint.endX;\n            endY = this.activeObj.activePoint.startY + (selectionHeight / 2);\n        }\n        else {\n            startX = this.activeObj.activePoint.startX + (selectionWidth / 2);\n            startY = this.activeObj.activePoint.startY;\n            endX = this.activeObj.activePoint.startX + (selectionWidth / 2);\n            endY = this.activeObj.activePoint.endY;\n        }\n        const tempLineWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (this.activeObj.strokeSettings.strokeWidth) / Math.abs(this.factor);\n        canvasDraw.beginPath();\n        switch (this.activeObj.lineDraw.toLowerCase()) {\n            case 'horizontal':\n            case 'vertical':\n                canvasDraw.moveTo(startX, startY);\n                canvasDraw.lineTo(endX, endY);\n                break;\n            case 'normal':\n                canvasDraw.moveTo(this.activeObj.horTopLine.startX, this.activeObj.horTopLine.startY);\n                canvasDraw.lineTo(this.activeObj.horBottomLine.endX, this.activeObj.horBottomLine.endY);\n                break;\n        }\n        canvasDraw.stroke();\n        canvasDraw.lineWidth = tempLineWidth;\n    }\n    shapeText(canvasDraw) {\n        const rows = this.activeObj.keyHistory.split('\\n');\n        const height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n        const lineHeight = ((height * rows.length) - (this.activeObj.textSettings.fontSize * rows.length)) / rows.length;\n        for (let i = 0; i < rows.length; i++) {\n            const text = rows[i];\n            const yPoint = ((i + 1) * this.activeObj.textSettings.fontSize * 0.85) + (i * lineHeight);\n            if (this.degree === -360) {\n                this.degree = 0;\n            }\n            if (this.degree === 0 || this.degree === 180) {\n                if (this.activeObj.textSettings.fontSize > this.activeObj.activePoint.height) {\n                    this.activeObj.textSettings.fontSize = this.activeObj.activePoint.height -\n                        (this.activeObj.activePoint.height * 0.1);\n                }\n            }\n            else {\n                if (this.activeObj.textSettings.fontSize > this.activeObj.activePoint.width) {\n                    this.activeObj.textSettings.fontSize = this.activeObj.activePoint.width -\n                        (this.activeObj.activePoint.width * 0.1);\n                }\n            }\n            canvasDraw.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n            canvasDraw.fillStyle = this.activeObj.strokeSettings.strokeColor;\n            let textStyle = '';\n            if (this.activeObj.textSettings.bold) {\n                textStyle = 'bold ';\n            }\n            if (this.activeObj.textSettings.italic) {\n                textStyle = 'italic ';\n            }\n            if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n                textStyle = 'italic bold ';\n            }\n            canvasDraw.font = textStyle + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n            if (this.activeObj.flipObjColl.length === 4) {\n                this.activeObj.flipObjColl = [];\n            }\n            for (let j = 0; j < this.activeObj.flipObjColl.length; j++) {\n                if (this.activeObj.flipObjColl[j].toLowerCase() === 'horizontal') {\n                    this.lowerContext.translate(this.lowerContext.canvas.width, 0);\n                    this.lowerContext.scale(-1, 1);\n                    this.upperContext.translate(this.upperContext.canvas.width, 0);\n                    this.upperContext.scale(-1, 1);\n                    this.updateActPoint('horizontal');\n                }\n                else if (this.activeObj.flipObjColl[j].toLowerCase() === 'vertical') {\n                    this.lowerContext.translate(0, this.lowerContext.canvas.height);\n                    this.lowerContext.scale(1, -1);\n                    this.upperContext.translate(0, this.upperContext.canvas.height);\n                    this.upperContext.scale(1, -1);\n                    this.updateActPoint('vertical');\n                }\n            }\n            if (this.activeObj.shapeDegree !== this.degree) {\n                this.rotateText(canvasDraw);\n            }\n            else {\n                canvasDraw.fillText(text, this.activeObj.activePoint.startX + this.activeObj.textSettings.fontSize * 0.1, this.activeObj.activePoint.startY + yPoint);\n            }\n            for (let k = 0; k < this.activeObj.flipObjColl.length; k++) {\n                if (this.activeObj.flipObjColl[k].toLowerCase() === 'horizontal') {\n                    this.lowerContext.translate(this.lowerContext.canvas.width, 0);\n                    this.lowerContext.scale(-1, 1);\n                    this.upperContext.translate(this.upperContext.canvas.width, 0);\n                    this.upperContext.scale(-1, 1);\n                    this.updateActPoint('horizontal');\n                }\n                else if (this.activeObj.flipObjColl[k].toLowerCase() === 'vertical') {\n                    this.lowerContext.translate(0, this.lowerContext.canvas.height);\n                    this.lowerContext.scale(1, -1);\n                    this.upperContext.translate(0, this.upperContext.canvas.height);\n                    this.upperContext.scale(1, -1);\n                    this.updateActPoint('vertical');\n                }\n            }\n        }\n        this.currObjType.isText = false;\n    }\n    updateActPoint(degree) {\n        const ratio = this.calcRatio();\n        if (degree.toLowerCase() === 'horizontal') {\n            if (this.activeObj.activePoint.startX <= this.lowerCanvas.width / 2) {\n                this.activeObj.activePoint.startX = this.lowerCanvas.width / 2 + ((this.lowerCanvas.width / 2) -\n                    this.activeObj.activePoint.endX);\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n                this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n            }\n            else if (this.activeObj.activePoint.startX >= this.lowerCanvas.width / 2) {\n                this.activeObj.activePoint.startX = this.lowerCanvas.width - this.activeObj.activePoint.endX;\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n                this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n            }\n        }\n        else if (degree.toLowerCase() === 'vertical') {\n            if (this.activeObj.activePoint.startY <= this.lowerCanvas.height / 2) {\n                this.activeObj.activePoint.startY = this.lowerCanvas.height / 2 + ((this.lowerCanvas.height / 2) -\n                    this.activeObj.activePoint.endY);\n                this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + this.activeObj.activePoint.height;\n                this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n            }\n            else if (this.activeObj.activePoint.startY >= this.lowerCanvas.height / 2) {\n                this.activeObj.activePoint.startY = this.lowerCanvas.height - this.activeObj.activePoint.endY;\n                this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + this.activeObj.activePoint.height;\n                this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n            }\n        }\n    }\n    drawSquareLines(canvasDraw) {\n        let splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords[0] === 'crop') {\n            canvasDraw.strokeStyle = '#fff';\n        }\n        else {\n            canvasDraw.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n        }\n        canvasDraw.beginPath();\n        canvasDraw.rect(this.activeObj.activePoint.startX, this.activeObj.activePoint.startY, this.activeObj.activePoint.width, this.activeObj.activePoint.height);\n        if (this.activeObj.strokeSettings.fillColor !== '') {\n            canvasDraw.fillStyle = this.activeObj.strokeSettings.fillColor;\n            canvasDraw.fill();\n        }\n        canvasDraw.rect(this.activeObj.activePoint.startX + this.activeObj.strokeSettings.strokeWidth, this.activeObj.activePoint.startY + this.activeObj.strokeSettings.strokeWidth, this.activeObj.activePoint.width - (2 * this.activeObj.strokeSettings.strokeWidth), this.activeObj.activePoint.height - (2 * this.activeObj.strokeSettings.strokeWidth));\n        canvasDraw.fillStyle = this.activeObj.strokeSettings.strokeColor;\n        canvasDraw.fill('evenodd');\n        canvasDraw.closePath();\n    }\n    drawSelection(horLineWidth, verLineHeight) {\n        this.upperContext.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n        this.upperContext.beginPath();\n        this.activeObj.horTopInnerLine = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY +\n                verLineHeight, endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY + verLineHeight };\n        this.activeObj.horBottomInnerLine = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY +\n                (2 * verLineHeight), endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY + (2 * verLineHeight) };\n        this.activeObj.verLeftInnerLine = { startX: this.activeObj.activePoint.startX + horLineWidth,\n            startY: this.activeObj.activePoint.startY, endX: this.activeObj.activePoint.startX + horLineWidth,\n            endY: this.activeObj.activePoint.endY };\n        this.activeObj.verRightInnerLine = { startX: this.activeObj.activePoint.startX + (2 * horLineWidth),\n            startY: this.activeObj.activePoint.startY, endX: this.activeObj.activePoint.startX + (2 * horLineWidth),\n            endY: this.activeObj.activePoint.endY };\n        this.upperContext.moveTo(this.activeObj.horTopInnerLine.startX, this.activeObj.horTopInnerLine.startY);\n        this.upperContext.lineTo(this.activeObj.horTopInnerLine.endX, this.activeObj.horTopInnerLine.startY);\n        this.upperContext.moveTo(this.activeObj.horBottomInnerLine.startX, this.activeObj.horBottomInnerLine.startY);\n        this.upperContext.lineTo(this.activeObj.horBottomInnerLine.endX, this.activeObj.horBottomInnerLine.startY);\n        this.upperContext.moveTo(this.activeObj.verLeftInnerLine.startX, this.activeObj.verLeftInnerLine.startY);\n        this.upperContext.lineTo(this.activeObj.verLeftInnerLine.endX, this.activeObj.verLeftInnerLine.endY);\n        this.upperContext.moveTo(this.activeObj.verRightInnerLine.startX, this.activeObj.verRightInnerLine.startY);\n        this.upperContext.lineTo(this.activeObj.verRightInnerLine.endX, this.activeObj.verRightInnerLine.endY);\n        this.upperContext.stroke();\n        this.upperContext.closePath();\n    }\n    drawCenterCircles(canvasDraw) {\n        canvasDraw.lineWidth *= 2;\n        canvasDraw.beginPath();\n        canvasDraw.moveTo(this.activeObj.topCenterCircle.startX, this.activeObj.topCenterCircle.startY);\n        canvasDraw.arc(this.activeObj.topCenterCircle.startX, this.activeObj.topCenterCircle.startY, this.activeObj.topCenterCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(this.activeObj.centerLeftCircle.startX, this.activeObj.centerLeftCircle.startY);\n        canvasDraw.arc(this.activeObj.centerLeftCircle.startX, this.activeObj.centerLeftCircle.startY, this.activeObj.centerLeftCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(this.activeObj.centerRightCircle.startX, this.activeObj.centerRightCircle.startY);\n        canvasDraw.arc(this.activeObj.centerRightCircle.startX, this.activeObj.centerRightCircle.startY, this.activeObj.centerRightCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(this.activeObj.bottomCenterCircle.startX, this.activeObj.bottomCenterCircle.startY);\n        canvasDraw.arc(this.activeObj.bottomCenterCircle.startX, this.activeObj.bottomCenterCircle.startY, this.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.stroke();\n        canvasDraw.fill();\n        canvasDraw.closePath();\n        canvasDraw.lineWidth /= 2;\n    }\n    findTarget(x, y, type) {\n        const bbox = this.upperCanvas.getBoundingClientRect();\n        const ratio = this.calcRatio();\n        if (this.factor === 1) {\n            x = (x - bbox.left) * ratio.width;\n            y = (y - bbox.top) * ratio.height;\n        }\n        else {\n            x = (x - bbox.left) + ((this.pannStart.startX) / ratio.width * this.factor);\n            y = (y - bbox.top) + ((this.pannStart.startY) / ratio.height * this.factor);\n        }\n        if (type.toLowerCase() === 'mousedown' || type.toLowerCase() === 'touchstart') {\n            let splitWords;\n            let isCrop = false;\n            if (this.activeObj.shape) {\n                splitWords = this.activeObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            this.findTargetObj(x, y, ratio, isCrop);\n            this.updateCursorStyles(x, y, ratio, type);\n        }\n        else {\n            switch (this.dragElement.toLowerCase()) {\n                case 'nw-resize':\n                    this.activeObj.topLeftCircle.startX = x;\n                    this.activeObj.topLeftCircle.startY = y;\n                    break;\n                case 'n-resize':\n                    this.activeObj.topCenterCircle.startX = x;\n                    this.activeObj.topCenterCircle.startY = y;\n                    break;\n                case 'ne-resize':\n                    this.activeObj.topRightCircle.startX = x;\n                    this.activeObj.topRightCircle.startY = y;\n                    break;\n                case 'w-resize':\n                    this.activeObj.centerLeftCircle.startX = x;\n                    this.activeObj.centerLeftCircle.startY = y;\n                    break;\n                case 'e-resize':\n                    this.activeObj.centerRightCircle.startX = x;\n                    this.activeObj.centerRightCircle.startY = y;\n                    break;\n                case 'sw-resize':\n                    this.activeObj.bottomLeftCircle.startX = x;\n                    this.activeObj.bottomLeftCircle.startY = y;\n                    break;\n                case 's-resize':\n                    this.activeObj.bottomCenterCircle.startX = x;\n                    this.activeObj.bottomCenterCircle.startY = y;\n                    break;\n                case 'se-resize':\n                    this.activeObj.bottomRightCircle.startX = x;\n                    this.activeObj.bottomRightCircle.startY = y;\n                    break;\n                default:\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    break;\n            }\n        }\n    }\n    findTargetObj(x, y, ratio, isCrop) {\n        if (this.objColl.length !== 0 && !this.currObjType.isCustomCrop && !isCrop) {\n            let diffX = 0;\n            let i;\n            for (let index = 0; index < this.objColl.length; index++) {\n                let actObj = extend({}, this.objColl[index], {}, true);\n                if (this.factor !== 1) {\n                    actObj = this.setCursorForZoomState(actObj, ratio);\n                }\n                if (x >= (actObj.activePoint.startX - actObj.topLeftCircle.radius) &&\n                    x <= (actObj.activePoint.endX + actObj.topLeftCircle.radius) &&\n                    y >= (actObj.activePoint.startY - actObj.topLeftCircle.radius) &&\n                    y <= (actObj.activePoint.endY + actObj.topLeftCircle.radius)) {\n                    if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                        diffX = x - this.objColl[index].activePoint.startX;\n                        i = index;\n                    }\n                }\n            }\n            if (isNullOrUndefined(i)) {\n                this.refreshActiveObj();\n                return;\n            }\n            this.currObjType.isCustomCrop = false;\n            const temp = this.activeObj = extend({}, this.objColl[i], {}, true);\n            this.objColl.splice(i, 1);\n            this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n            this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.height, this.inMemoryCanvas.width);\n            if (this.degree === 0) {\n                this.inMemoryContext.putImageData(this.imgDataColl[0].value, 0, 0);\n            }\n            else {\n                this.inMemoryCanvas.width = this.currImgData.width;\n                this.inMemoryCanvas.height = this.currImgData.height;\n                this.inMemoryContext.putImageData(this.currImgData, 0, 0);\n            }\n            if (this.flipState !== '') {\n                this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n                this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.height, this.inMemoryCanvas.width);\n                this.inMemoryCanvas.width = this.currImgData.width;\n                this.inMemoryCanvas.height = this.currImgData.height;\n                this.inMemoryContext.putImageData(this.currImgData, 0, 0);\n            }\n            this.setActivePoint();\n            this.upperContext.drawImage(this.inMemoryCanvas, 0, 0);\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            for (let j = 0; j < this.objColl.length; j++) {\n                if (this.objColl[j].shape === 'text' && this.objColl[j].shapeFlip !== this.currFlipState) {\n                    this.objColl[j].flippedText = true;\n                }\n                this.apply(this.objColl[j].shape, this.objColl[j]);\n            }\n            this.activeObj = extend({}, temp, {}, true);\n            const endPoint = { x: this.lowerCanvas.width - this.pannEnd.startX, y: this.lowerCanvas.height - this.pannEnd.startY };\n            if (this.factor !== 1 && (this.activeObj.activePoint.startX < this.pannStart.startX || this.activeObj.activePoint.startY <\n                this.pannStart.startY) || (this.activeObj.activePoint.endX > endPoint.x || this.activeObj.activePoint.endY > endPoint.y)) {\n                this.allowDrag = true;\n            }\n            this.tempStrokeSettings = extend({}, this.activeObj.strokeSettings, {}, true);\n            this.tempTextSettings = extend({}, this.activeObj.textSettings, {}, true);\n            if (this.activeObj.shape === 'text' && this.activeObj.shapeFlip !== this.currFlipState) {\n                this.activeObj.flippedText = true;\n            }\n            if (this.activeObj.activePoint) {\n                this.drawObject('duplicate', this.activeObj);\n            }\n            const shapeChangingArgs = { action: 'select', previousShapeSettings: this.activeObj, currentShapeSettings: this.activeObj };\n            this.trigger('shapeChanging', shapeChangingArgs);\n        }\n    }\n    updateCursorStyles(x, y, ratio, type) {\n        let isResize = false;\n        if (this.activeObj.keyHistory !== '' && this.activeObj.shape === undefined && !this.currObjType.isCustomCrop &&\n            !this.currObjType.isLine && this.currObjType.isText) {\n            this.activeObj.shape = 'text';\n        }\n        let actObj = extend({}, this.activeObj, {}, true);\n        if (isNullOrUndefined(actObj.topLeftCircle)) {\n            return;\n        }\n        if (this.factor !== 1) {\n            actObj = this.setCursorForZoomState(actObj, ratio, true);\n        }\n        if (x >= (actObj.topLeftCircle.startX - actObj.topLeftCircle.radius) &&\n            x <= (actObj.topLeftCircle.startX + actObj.topLeftCircle.radius) &&\n            y >= (actObj.topLeftCircle.startY - actObj.topLeftCircle.radius) &&\n            y <= (actObj.topLeftCircle.startY + actObj.topLeftCircle.radius) && this.dragElement !== 'nw-resize') {\n            actObj.topLeftCircle.startX = actObj.topLeftCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'nw-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.topCenterCircle.startX - actObj.topLeftCircle.radius) &&\n            x <= (actObj.topCenterCircle.startX + actObj.topLeftCircle.radius) &&\n            y >= (actObj.topCenterCircle.startY - actObj.topLeftCircle.radius) &&\n            y <= (actObj.topCenterCircle.startY + actObj.topLeftCircle.radius) && this.dragElement !== 'n-resize') {\n            actObj.topCenterCircle.startX = actObj.topCenterCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'n-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.topRightCircle.startX - actObj.topLeftCircle.radius) &&\n            x <= (actObj.topRightCircle.startX + actObj.topLeftCircle.radius) &&\n            y >= (actObj.topRightCircle.startY - actObj.topLeftCircle.radius) &&\n            y <= (actObj.topRightCircle.startY + actObj.topLeftCircle.radius) && this.dragElement !== 'ne-resize') {\n            actObj.topRightCircle.startX = actObj.topRightCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'ne-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.centerLeftCircle.startX - actObj.topLeftCircle.radius) &&\n            x <= (actObj.centerLeftCircle.startX + actObj.topLeftCircle.radius) &&\n            y >= (actObj.centerLeftCircle.startY - actObj.topLeftCircle.radius) &&\n            y <= (actObj.centerLeftCircle.startY + actObj.topLeftCircle.radius) && this.dragElement !== 'w-resize') {\n            actObj.centerLeftCircle.startX = actObj.centerLeftCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'w-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.centerRightCircle.startX - actObj.topLeftCircle.radius) &&\n            x <= (actObj.centerRightCircle.startX + actObj.topLeftCircle.radius) &&\n            y >= (actObj.centerRightCircle.startY - actObj.topLeftCircle.radius) &&\n            y <= (actObj.centerRightCircle.startY + actObj.topLeftCircle.radius) && this.dragElement !== 'e-resize') {\n            actObj.centerRightCircle.startX = actObj.centerRightCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'e-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.bottomLeftCircle.startX - actObj.topLeftCircle.radius) &&\n            x <= (actObj.bottomLeftCircle.startX + actObj.topLeftCircle.radius) &&\n            y >= (actObj.bottomLeftCircle.startY - actObj.topLeftCircle.radius) &&\n            y <= (actObj.bottomLeftCircle.startY + actObj.topLeftCircle.radius) && this.dragElement !== 'sw-resize') {\n            actObj.bottomLeftCircle.startX = actObj.bottomLeftCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'sw-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.bottomCenterCircle.startX - actObj.topLeftCircle.radius) &&\n            x <= (actObj.bottomCenterCircle.startX + actObj.topLeftCircle.radius) &&\n            y >= (actObj.bottomCenterCircle.startY - actObj.topLeftCircle.radius) &&\n            y <= (actObj.bottomCenterCircle.startY + actObj.topLeftCircle.radius) && this.dragElement !== 's-resize') {\n            actObj.bottomCenterCircle.startX = actObj.bottomCenterCircle.startY = 0;\n            this.upperCanvas.style.cursor = 's-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.bottomRightCircle.startX - actObj.topLeftCircle.radius) &&\n            x <= (actObj.bottomRightCircle.startX + actObj.topLeftCircle.radius) &&\n            y >= (actObj.bottomRightCircle.startY - actObj.topLeftCircle.radius) &&\n            y <= (actObj.bottomRightCircle.startY + actObj.topLeftCircle.radius) && this.dragElement !== 'se-resize') {\n            actObj.bottomRightCircle.startX = actObj.bottomRightCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'se-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else {\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n        this.previousPoint.x = this.previousPoint.y = this.diffPoint.x = this.diffPoint.y = 0;\n        if (type === 'touchstart') {\n            if (isResize || (x >= actObj.activePoint.startX && x <= actObj.activePoint.endX\n                && y >= actObj.activePoint.startY && y <= actObj.activePoint.endY)) {\n                this.currObjType.isDragging = true;\n            }\n        }\n        else {\n            this.currObjType.isDragging = true;\n        }\n    }\n    drawCropRatio() {\n        let x;\n        let y;\n        switch (this.currObjType.shape.toLowerCase()) {\n            case 'crop-square':\n            case 'crop-circle':\n                this.setDragDirection();\n                if (this.lowerCanvas.width > this.lowerCanvas.height) {\n                    this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.width = this.activeObj.activePoint.height;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n                }\n                else {\n                    this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.height = this.activeObj.activePoint.width;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + this.activeObj.activePoint.height;\n                }\n                break;\n            case 'crop-3:2':\n                x = 3;\n                y = 2;\n                break;\n            case 'crop-4:3':\n                x = 4;\n                y = 3;\n                break;\n            case 'crop-5:4':\n                x = 5;\n                y = 4;\n                break;\n            case 'crop-7:5':\n                x = 7;\n                y = 5;\n                break;\n            case 'crop-16:9':\n                x = 16;\n                y = 9;\n                break;\n        }\n        if (x !== undefined && y !== undefined) {\n            this.calcShapeRatio(x, y);\n        }\n    }\n    setDragDirection() {\n        const ratio = this.calcRatio();\n        const arcRadius = (7.5 * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor;\n        if (this.lowerCanvas.width > this.lowerCanvas.height) {\n            if (this.factor === 1) {\n                this.activeObj.activePoint.startX = this.dragPoint.startX = ((this.lowerCanvas.width / 2) - (this.lowerCanvas.height / 2))\n                    + arcRadius;\n                this.activeObj.activePoint.startY = this.dragPoint.startY = ((this.lowerCanvas.height / 2) - (this.lowerCanvas.height / 2))\n                    + arcRadius;\n                this.activeObj.activePoint.endX = ((this.lowerCanvas.width / 2) + (this.lowerCanvas.height / 2)) - arcRadius;\n                this.activeObj.activePoint.endY = ((this.lowerCanvas.height / 2) + (this.lowerCanvas.height / 2)) - arcRadius;\n            }\n            else {\n                const endPoint = { x: this.lowerCanvas.width - this.pannEnd.startX, y: this.lowerCanvas.height - this.pannEnd.startY };\n                const visibleWidth = endPoint.x - this.pannStart.startX;\n                const visibleHeight = endPoint.y - this.pannStart.startY;\n                const centerX = (this.dragPoint.startX = visibleWidth / 2) + this.pannStart.startX;\n                const centerY = this.dragPoint.startY = visibleHeight / 2;\n                this.activeObj.activePoint.startX = (centerX - centerY) + arcRadius;\n                this.activeObj.activePoint.startY = (this.pannStart.startY) + arcRadius;\n                this.activeObj.activePoint.endX = (this.activeObj.activePoint.startX + visibleHeight) - arcRadius;\n                this.activeObj.activePoint.endY = (this.activeObj.activePoint.startY + visibleHeight) - (2 * arcRadius);\n            }\n        }\n        else {\n            if (this.factor === 1) {\n                this.activeObj.activePoint.startY = this.dragPoint.startX = ((this.lowerCanvas.height / 2) - (this.lowerCanvas.width) / 2)\n                    + arcRadius;\n                this.activeObj.activePoint.endY = ((this.lowerCanvas.height / 2) + (this.lowerCanvas.width) / 2) - arcRadius;\n                this.activeObj.activePoint.startX = this.dragPoint.startX = arcRadius;\n                this.activeObj.activePoint.endX = this.lowerCanvas.width - arcRadius;\n            }\n            else {\n                const endPoint = { x: this.lowerCanvas.width - this.pannEnd.startX, y: this.lowerCanvas.height - this.pannEnd.startY };\n                const visibleWidth = endPoint.x - this.pannStart.startX;\n                const visibleHeight = endPoint.y - this.pannStart.startY;\n                const centerX = this.dragPoint.startX = visibleWidth / 2;\n                const centerY = (this.dragPoint.startY = visibleHeight / 2) + this.pannStart.startY;\n                this.activeObj.activePoint.startX = this.pannStart.startX + arcRadius;\n                this.activeObj.activePoint.startY = (centerY - centerX) + arcRadius;\n                this.activeObj.activePoint.endX = (this.activeObj.activePoint.startX + visibleWidth) - arcRadius;\n                this.activeObj.activePoint.endY = (this.activeObj.activePoint.startY + visibleWidth) - arcRadius;\n            }\n        }\n    }\n    calcShapeRatio(x, y) {\n        const ratio = this.calcRatio();\n        const arcRadius = (7.5 * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor;\n        const originalWidth = this.factor === 1 ? this.lowerCanvas.width : this.lowerCanvas.width / this.factor;\n        const originalHeight = this.factor === 1 ? this.lowerCanvas.height : this.lowerCanvas.height / this.factor;\n        const presetRatio = x / y;\n        const standardSize = originalWidth >= originalHeight ? originalWidth : originalHeight;\n        let width = standardSize * presetRatio;\n        let height = standardSize;\n        const scaleWidth = this.getScale(width, originalWidth);\n        const snippetArray = [];\n        for (let i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray.push(width * scaleWidth);\n            }\n            else {\n                snippetArray.push(height * scaleWidth);\n            }\n        }\n        width = snippetArray[0];\n        height = snippetArray[1];\n        const scaleHeight = this.getScale(height, originalHeight);\n        const snippetArray1 = [];\n        for (let i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray1.push(width * scaleHeight);\n            }\n            else {\n                snippetArray1.push(height * scaleHeight);\n            }\n        }\n        width = snippetArray1[0];\n        height = snippetArray1[1];\n        this.activeObj.activePoint.width = width;\n        this.activeObj.activePoint.height = height;\n        this.activeObj.activePoint.startX = (this.dragPoint.startX = (originalWidth - width) / 2) + arcRadius;\n        this.activeObj.activePoint.startY = (this.dragPoint.startY = (originalHeight - height) / 2) + arcRadius;\n        this.activeObj.activePoint.endX = ((originalWidth - width) / 2 + width) - arcRadius;\n        this.activeObj.activePoint.endY = ((originalHeight - height) / 2 + height) - arcRadius;\n        if (this.factor !== 1) {\n            this.activeObj.activePoint.startX += this.pannStart.startX;\n            this.activeObj.activePoint.startY += this.pannStart.startY;\n            this.activeObj.activePoint.endX += this.pannStart.startX;\n            this.activeObj.activePoint.endY += this.pannStart.startY;\n        }\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n    }\n    getScale(value, originalValue) {\n        return value > originalValue ? originalValue / value : 1;\n    }\n    calcRatio() {\n        let widthRatio;\n        let heightRatio;\n        if (this.degree === 0 || this.degree % 180 === 0) {\n            widthRatio = this.baseImg.width / parseInt(this.lowerCanvas.style.maxWidth, 10);\n            heightRatio = this.baseImg.height / parseInt(this.lowerCanvas.style.maxHeight, 10);\n        }\n        else {\n            widthRatio = this.baseImg.height / parseInt(this.lowerCanvas.style.maxWidth, 10);\n            heightRatio = this.baseImg.width / parseInt(this.lowerCanvas.style.maxHeight, 10);\n        }\n        return { width: widthRatio, height: heightRatio };\n    }\n    calcMaxDimension(width, height) {\n        let canvasMaxWidth = this.element.clientWidth;\n        let canvasMaxHeight = this.element.clientHeight - this.toolbarHeight;\n        canvasMaxHeight = Browser.isDevice ? canvasMaxHeight - this.toolbarHeight : canvasMaxHeight;\n        canvasMaxWidth -= 30;\n        canvasMaxHeight -= 30;\n        const widthScale = canvasMaxWidth / width;\n        const heightScale = canvasMaxHeight / height;\n        let cssMaxWidth = Math.min(width, canvasMaxWidth);\n        let cssMaxHeight = Math.min(height, canvasMaxHeight);\n        if (widthScale < 1 && widthScale < heightScale) {\n            cssMaxWidth = width * widthScale;\n            cssMaxHeight = height * widthScale;\n        }\n        else if (heightScale < 1 && heightScale < widthScale) {\n            cssMaxWidth = width * heightScale;\n            cssMaxHeight = height * heightScale;\n        }\n        return { width: cssMaxWidth, height: cssMaxHeight };\n    }\n    setMaximumDimension(degree) {\n        let newWidth;\n        let newHeight;\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            newWidth = this.baseImg.height;\n            newHeight = this.baseImg.width;\n        }\n        else if (degree % 180 === 0 || degree === 0) {\n            newWidth = this.baseImg.width;\n            newHeight = this.baseImg.height;\n        }\n        this.lowerCanvas.width = this.upperCanvas.width = newWidth;\n        this.lowerCanvas.height = this.upperCanvas.height = newHeight;\n        const maxDimension = this.calcMaxDimension(newWidth, newHeight);\n        this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = maxDimension.width + 'px';\n        this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = maxDimension.height + 'px';\n    }\n    setCursor(x, y) {\n        const bbox = this.upperCanvas.getBoundingClientRect();\n        const ratio = this.calcRatio();\n        if (this.factor === 1) {\n            x = (x - bbox.left) * ratio.width;\n            y = (y - bbox.top) * ratio.height;\n        }\n        else {\n            x = (x - bbox.left) + ((this.pannStart.startX) / ratio.width * this.factor);\n            y = (y - bbox.top) + ((this.pannStart.startY) / ratio.height * this.factor);\n        }\n        if (this.activeObj.horTopLine !== undefined) {\n            if (this.togglePan) {\n                this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'grab';\n            }\n            else {\n                let actObj = extend({}, this.activeObj, {}, true);\n                if (this.factor !== 1) {\n                    actObj = this.setCursorForZoomState(actObj, ratio, true);\n                }\n                if (x >= (actObj.topLeftCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.topLeftCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.topLeftCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.topLeftCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'nw-resize';\n                }\n                else if (x >= (actObj.topCenterCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.topCenterCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.topCenterCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.topCenterCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'n-resize';\n                }\n                else if (x >= (actObj.topRightCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.topRightCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.topRightCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.topRightCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'ne-resize';\n                }\n                else if (x >= (actObj.centerLeftCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.centerLeftCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.centerLeftCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.centerLeftCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'w-resize';\n                }\n                else if (x >= (actObj.centerRightCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.centerRightCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.centerRightCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.centerRightCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'e-resize';\n                }\n                else if (x >= (actObj.bottomLeftCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.bottomLeftCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.bottomLeftCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.bottomLeftCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'sw-resize';\n                }\n                else if (x >= (actObj.bottomCenterCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.bottomCenterCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.bottomCenterCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.bottomCenterCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 's-resize';\n                }\n                else if (x >= (actObj.bottomRightCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.bottomRightCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.bottomRightCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.bottomRightCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'se-resize';\n                }\n                else if ((x >= actObj.activePoint.startX &&\n                    x <= actObj.activePoint.endX) && (y >= actObj.activePoint.startY &&\n                    y <= actObj.activePoint.endY)) {\n                    this.upperCanvas.style.cursor = 'move';\n                }\n                else {\n                    if (this.currObjType.isCustomCrop) {\n                        this.upperCanvas.style.cursor = 'cross-hair';\n                    }\n                    this.upperCanvas.style.cursor = 'default';\n                }\n            }\n        }\n        else if (this.togglePan) {\n            this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'grab';\n        }\n        else {\n            if (this.currObjType.isCustomCrop || this.togglePen) {\n                this.upperCanvas.style.cursor = 'crosshair';\n            }\n            else {\n                this.upperCanvas.style.cursor = 'default';\n            }\n        }\n        if (this.upperCanvas.style.cursor === 'default') {\n            if (this.objColl.length > 0) {\n                this.setCursorFromObj(x, y, this.objColl, ratio);\n            }\n        }\n    }\n    setCursorFromObj(x, y, obj, ratio) {\n        if (this.togglePan) {\n            this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'grab';\n        }\n        else {\n            for (let i = 0; i < obj.length; i++) {\n                let actObj = extend({}, obj[i], {}, true);\n                if (this.factor !== 1) {\n                    actObj = this.setCursorForZoomState(obj[i], ratio, true);\n                }\n                if (x >= (actObj.topLeftCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.topLeftCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.topLeftCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.topLeftCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'nw-resize';\n                    break;\n                }\n                else if (x >= (actObj.topCenterCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.topCenterCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.topCenterCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.topCenterCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'n-resize';\n                    break;\n                }\n                else if (x >= (actObj.topRightCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.topRightCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.topRightCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.topRightCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'ne-resize';\n                    break;\n                }\n                else if (x >= (actObj.centerLeftCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.centerLeftCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.centerLeftCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.centerLeftCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'w-resize';\n                    break;\n                }\n                else if (x >= (actObj.centerRightCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.centerRightCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.centerRightCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.centerRightCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'e-resize';\n                    break;\n                }\n                else if (x >= (actObj.bottomLeftCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.bottomLeftCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.bottomLeftCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.bottomLeftCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'sw-resize';\n                    break;\n                }\n                else if (x >= (actObj.bottomCenterCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.bottomCenterCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.bottomCenterCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.bottomCenterCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 's-resize';\n                    break;\n                }\n                else if (x >= (actObj.bottomRightCircle.startX - (actObj.topLeftCircle.radius)) &&\n                    x <= (actObj.bottomRightCircle.startX + (actObj.topLeftCircle.radius)) &&\n                    y >= (actObj.bottomRightCircle.startY - (actObj.topLeftCircle.radius)) &&\n                    y <= (actObj.bottomRightCircle.startY + (actObj.topLeftCircle.radius))) {\n                    this.upperCanvas.style.cursor = 'se-resize';\n                    break;\n                }\n                else if ((x >= actObj.activePoint.startX &&\n                    x <= actObj.activePoint.endX) && (y >= actObj.activePoint.startY &&\n                    y <= actObj.activePoint.endY)) {\n                    this.upperCanvas.style.cursor = 'move';\n                    break;\n                }\n                else {\n                    if (this.currObjType.isCustomCrop) {\n                        this.upperCanvas.style.cursor = 'cross-hair';\n                    }\n                    this.upperCanvas.style.cursor = 'default';\n                }\n            }\n        }\n    }\n    setCursorForZoomState(obj, ratio, isMouseMove) {\n        const tempObj = extend({}, obj, {}, true);\n        tempObj.activePoint.startX = (tempObj.activePoint.startX / ratio.width) * this.factor;\n        tempObj.activePoint.startY = (tempObj.activePoint.startY / ratio.width) * this.factor;\n        tempObj.activePoint.endX = (tempObj.activePoint.endX / ratio.width) * this.factor;\n        tempObj.activePoint.endY = (tempObj.activePoint.endY / ratio.width) * this.factor;\n        tempObj.activePoint.width = tempObj.activePoint.endX - tempObj.activePoint.startX;\n        tempObj.activePoint.height = tempObj.activePoint.endY - tempObj.activePoint.startY;\n        this.updateActiveObject(ratio, tempObj.activePoint, tempObj, isMouseMove);\n        tempObj.topLeftCircle.radius = (tempObj.topLeftCircle.radius / ratio.width) * this.factor;\n        return tempObj;\n    }\n    downloadImg(blob, fileName) {\n        const a = document.createElement('a');\n        a.href = blob;\n        a.target = '_parent';\n        a.download = fileName;\n        (document.body || document.documentElement).appendChild(a);\n        a.click();\n        a.parentNode.removeChild(a);\n    }\n    toSVGImg(fileName) {\n        const dataUrl = this.lowerCanvas.toDataURL();\n        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttribute('width', this.lowerCanvas.style.maxWidth);\n        svg.setAttribute('height', this.lowerCanvas.style.maxHeight);\n        const XLinkNS = 'http://www.w3.org/1999/xlink';\n        const img = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n        img.setAttributeNS(null, 'height', this.lowerCanvas.height.toString());\n        img.setAttributeNS(null, 'width', this.lowerCanvas.width.toString());\n        img.setAttributeNS(XLinkNS, 'xlink:href', dataUrl);\n        svg.appendChild(img);\n        const prefix = 'data:image/svg+xml;base64,';\n        const header = '<svg' + ' xmlns=\"http://www.w3.org/2000/svg\"' + ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"'\n            + ` width=\"${this.lowerCanvas.width}\"` + ` height=\"${this.lowerCanvas.height}\"` + '>';\n        const footer = '</svg>';\n        const body = svg.innerHTML;\n        const data = header + body + footer;\n        const svgDataUrl = prefix + btoa(data);\n        if (fileName === null) {\n            return svgDataUrl;\n        }\n        else {\n            this.downloadImg(svgDataUrl, fileName + '.' + 'svg');\n            return null;\n        }\n    }\n    toBlobFn(fileName, type) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const proxy = this;\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        this.lowerCanvas.toBlob(function (blob) {\n            const blobUrl = URL.createObjectURL(blob);\n            proxy.baseImg.src = blobUrl;\n            proxy.downloadImg(blobUrl, fileName + '.' + type);\n        }, 'image/png');\n    }\n    addLetter(letter) {\n        if (this.textBox.style.display === 'none' && (this.currObjType.isText || this.activeObj.shape === 'text')) {\n            if (letter === 'Backspace') {\n                this.keyHistory = this.keyHistory.slice(0, -1);\n            }\n            else {\n                this.keyHistory += letter;\n            }\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.updateFontStyles();\n            const width = this.upperContext.measureText(this.keyHistory + this.tempKeyHistory).width\n                + this.activeObj.textSettings.fontSize * 0.5;\n            const height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n            this.upperContext.fillText(this.keyHistory + this.tempKeyHistory, this.activeObj.activePoint.startX, this.activeObj.activePoint.startY +\n                this.activeObj.textSettings.fontSize);\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.currObjType.isText = true;\n            this.setActivePoint(width, height);\n        }\n    }\n    updateFontStyles(isTextBox) {\n        this.upperContext.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n        this.upperContext.fillStyle = this.activeObj.strokeSettings.strokeColor;\n        let textStyle = '';\n        if (this.activeObj.textSettings.bold) {\n            textStyle = 'bold ';\n        }\n        if (this.activeObj.textSettings.italic) {\n            textStyle = 'italic ';\n        }\n        if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n            textStyle = 'italic bold ';\n        }\n        const fontSize = isTextBox ? parseFloat(this.textBox.style.fontSize) : this.activeObj.textSettings.fontSize;\n        const fontFamily = this.textBox.style.display === 'block' ? this.textBox.style.fontFamily : this.activeObj.textSettings.fontFamily;\n        this.upperContext.font = textStyle + fontSize + 'px' + ' ' + fontFamily;\n    }\n    updateInMemoryCanvas(operation) {\n        if (!this.disabled) {\n            const imgData = this.lowerContext.getImageData(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.imgDataColl.push({ operation: operation, value: imgData });\n            this.inMemoryCanvas.width = imgData.width;\n            this.inMemoryCanvas.height = imgData.height;\n            this.inMemoryContext.putImageData(imgData, 0, 0);\n        }\n    }\n    drawBaseImg() {\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n        this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n        this.inMemoryCanvas.width = this.lowerCanvas.width = this.imgDataColl[0].value.width;\n        this.inMemoryCanvas.height = this.lowerCanvas.height = this.imgDataColl[0].value.height;\n        this.inMemoryContext.putImageData(this.imgDataColl[0].value, 0, 0);\n        const maxDimension = this.calcMaxDimension(this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n        this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = maxDimension.width + 'px';\n        this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = maxDimension.height + 'px';\n        this.lowerCanvas.style.left = this.upperCanvas.style.left = (this.element.clientWidth - maxDimension.width) / 2 + 1 + 'px';\n        this.lowerCanvas.style.top = this.upperCanvas.style.top = (this.element.clientHeight - this.toolbarHeight - maxDimension.height) / 2 + 1 + 'px';\n        this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n    }\n    calcPrevRatio() {\n        let oldWidthRatio;\n        let oldHeightRatio;\n        let maxDimension;\n        if (this.degree === 0 || this.degree % 180 === 0) {\n            maxDimension = this.calcMaxDimension(this.baseImg.height, this.baseImg.width);\n            oldWidthRatio = this.baseImg.height / maxDimension.width;\n            oldHeightRatio = this.baseImg.width / maxDimension.height;\n        }\n        else {\n            maxDimension = this.calcMaxDimension(this.baseImg.width, this.baseImg.height);\n            oldWidthRatio = this.baseImg.width / maxDimension.width;\n            oldHeightRatio = this.baseImg.height / maxDimension.height;\n        }\n        return { width: oldWidthRatio, height: oldHeightRatio };\n    }\n    textFlipDegree(canvasDraw, startX, startY) {\n        const rows = this.activeObj.keyHistory.split('\\n');\n        const height = this.activeObj.textSettings.fontSize;\n        const lineHeight = ((height * rows.length) - (this.activeObj.textSettings.fontSize * rows.length)) / rows.length;\n        let yPoint = (this.activeObj.textSettings.fontSize * 0.85) + lineHeight;\n        for (let i = 0; i < rows.length; i++) {\n            const text = rows[i];\n            if (i > 0) {\n                if (i === 1) {\n                    yPoint -= (this.activeObj.textSettings.fontSize * 0.85);\n                }\n                yPoint += this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.15;\n            }\n            canvasDraw.fillText(text, startX + this.activeObj.textSettings.fontSize * 0.15, startY +\n                yPoint + (i > 0 ? this.activeObj.textSettings.fontSize * 0.25 : -this.activeObj.textSettings.fontSize * 0.35));\n        }\n    }\n    rotateText(canvasDraw) {\n        let startX = this.activeObj.activePoint.startX;\n        let startY = this.activeObj.activePoint.startY;\n        let degree;\n        if (this.activeObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - this.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (degree % 360 === 0 && (this.degree !== -360 || this.currFlipState === '')) {\n            startX = this.activeObj.activePoint.startX + this.activeObj.textSettings.fontSize * 0.15;\n            startY = this.activeObj.activePoint.startY + (this.activeObj.activePoint.endY - this.activeObj.activePoint.startY);\n            const rows = this.activeObj.keyHistory.split('\\n');\n            for (let i = 0; i < rows.length; i++) {\n                startY = this.activeObj.activePoint.startY + (i * this.activeObj.textSettings.fontSize +\n                    this.activeObj.textSettings.fontSize * 0.25);\n                canvasDraw.fillText(rows[i], startX, startY);\n            }\n        }\n        else if (degree % 90 === 0 && degree % 180 !== 0) {\n            canvasDraw.translate(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2);\n            canvasDraw.rotate(Math.PI / 180 * degree);\n            canvasDraw.translate(-this.lowerCanvas.height / 2, -this.lowerCanvas.width / 2);\n            if (degree % 90 === 0 && degree % 270 !== 0) {\n                startY = (this.lowerCanvas.width - this.activeObj.activePoint.endX) + this.activeObj.textSettings.fontSize * 0.4;\n                startX = this.activeObj.activePoint.startY;\n            }\n            else if (degree % 270 === 0) {\n                startX = this.lowerCanvas.height - this.activeObj.activePoint.endY;\n                startY = this.activeObj.activePoint.startX + this.activeObj.textSettings.fontSize * 0.4;\n            }\n            this.textFlipDegree(canvasDraw, startX, startY);\n            canvasDraw.translate(this.lowerCanvas.height / 2, this.lowerCanvas.width / 2);\n            canvasDraw.rotate(Math.PI / 180 * -degree);\n            canvasDraw.translate(-this.lowerCanvas.width / 2, -this.lowerCanvas.height / 2);\n        }\n        else {\n            canvasDraw.translate(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2);\n            canvasDraw.rotate(Math.PI / 180 * degree);\n            startX = this.lowerCanvas.width - this.activeObj.activePoint.endX;\n            startY = (this.lowerCanvas.height - this.activeObj.activePoint.endY) + this.activeObj.textSettings.fontSize * 0.4;\n            canvasDraw.translate(-this.lowerCanvas.width / 2, -this.lowerCanvas.height / 2);\n            this.textFlipDegree(canvasDraw, startX, startY);\n            canvasDraw.translate(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2);\n            canvasDraw.rotate(Math.PI / 180 * -degree);\n            canvasDraw.translate(-this.lowerCanvas.width / 2, -this.lowerCanvas.height / 2);\n        }\n        if (this.degree === 360 || this.degree === -360) {\n            this.degree = 0;\n        }\n    }\n    redrawSelection() {\n        const ratio = this.calcRatio();\n        this.activeObj.activePoint.startX = 0;\n        this.activeObj.activePoint.startY = 0;\n        this.activeObj.activePoint.endX = this.lowerCanvas.width;\n        this.activeObj.activePoint.endY = this.lowerCanvas.height;\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        this.updateActiveObject(ratio, this.activeObj.activePoint, this.activeObj);\n        this.drawObject('duplicate', this.activeObj);\n    }\n    redrawObj(degree) {\n        if (this.objColl.length > 0) {\n            if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical') {\n                this.updateCurrentActiveObjPoint(degree);\n            }\n            else if (degree === 90 || degree === -90) {\n                this.updateCurrentActiveObjPoint(degree);\n                for (let i = 0; i < this.objColl.length; i++) {\n                    this.apply(this.objColl[i].shape, this.objColl[i]);\n                }\n            }\n            else {\n                this.updateCurrentActiveObjPoint('zoom');\n                for (let i = 0; i < this.objColl.length; i++) {\n                    this.apply(this.objColl[i].shape, this.objColl[i]);\n                }\n            }\n        }\n        else if (this.objColl.length === 0 && (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical')) {\n            if (this.activeObj.horTopLine !== undefined && (this.activeObj.shape === undefined)) {\n                this.redrawSelection();\n            }\n            else if (this.activeObj.horTopLine !== undefined && this.activeObj.shape !== undefined) {\n                const splitWords = this.activeObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    this.select(splitWords[1]);\n                }\n            }\n        }\n        else if ((degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical')) {\n            let splitWords;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                this.select(splitWords[1]);\n            }\n            else {\n                this.redrawSelection();\n            }\n        }\n    }\n    updateCurrentActiveObjPoint(degree) {\n        const oldRatio = this.calcPrevRatio();\n        const ratio = this.calcRatio();\n        let currActObjIndex;\n        for (let index = 0; index < this.objColl.length; index++) {\n            if (this.activeObj.shape === this.objColl[index].shape &&\n                this.activeObj.activePoint.startX === this.objColl[index].activePoint.startX &&\n                this.activeObj.activePoint.startY === this.objColl[index].activePoint.startY &&\n                this.activeObj.activePoint.endX === this.objColl[index].activePoint.endX &&\n                this.activeObj.activePoint.endY === this.objColl[index].activePoint.endY &&\n                this.activeObj.currIndex === this.objColl[index].currIndex) {\n                currActObjIndex = index;\n                break;\n            }\n        }\n        if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical') {\n            if (degree === 'horizontal' || degree === 'Horizontal') {\n                for (let i = 0; i < this.objColl.length; i++) {\n                    if (this.objColl[i].activePoint.startX <= this.lowerCanvas.width / 2) {\n                        this.objColl[i].activePoint.startX = this.lowerCanvas.width / 2 + ((this.lowerCanvas.width / 2) -\n                            this.objColl[i].activePoint.endX);\n                        this.objColl[i].activePoint.endX = this.objColl[i].activePoint.startX + this.objColl[i].activePoint.width;\n                        this.updateActiveObject(ratio, this.objColl[i].activePoint, this.objColl[i]);\n                    }\n                    else if (this.objColl[i].activePoint.startX >= this.lowerCanvas.width / 2) {\n                        this.objColl[i].activePoint.startX = this.lowerCanvas.width - this.objColl[i].activePoint.endX;\n                        this.objColl[i].activePoint.endX = this.objColl[i].activePoint.startX + this.objColl[i].activePoint.width;\n                        this.updateActiveObject(ratio, this.objColl[i].activePoint, this.objColl[i]);\n                    }\n                }\n            }\n            else if (degree === 'vertical' || degree === 'Vertical') {\n                for (let i = 0; i < this.objColl.length; i++) {\n                    if (this.objColl[i].activePoint.startY <= this.lowerCanvas.height / 2) {\n                        this.objColl[i].activePoint.startY = this.lowerCanvas.height / 2 + ((this.lowerCanvas.height / 2) -\n                            this.objColl[i].activePoint.endY);\n                        this.objColl[i].activePoint.endY = this.objColl[i].activePoint.startY + this.objColl[i].activePoint.height;\n                        this.updateActiveObject(ratio, this.objColl[i].activePoint, this.objColl[i]);\n                    }\n                    else if (this.objColl[i].activePoint.startY >= this.lowerCanvas.height / 2) {\n                        this.objColl[i].activePoint.startY = this.lowerCanvas.height - this.objColl[i].activePoint.endY;\n                        this.objColl[i].activePoint.endY = this.objColl[i].activePoint.startY + this.objColl[i].activePoint.height;\n                        this.updateActiveObject(ratio, this.objColl[i].activePoint, this.objColl[i]);\n                    }\n                }\n            }\n            if (currActObjIndex !== undefined) {\n                this.activeObj = extend({}, this.objColl[currActObjIndex], {}, true);\n            }\n        }\n        else if (degree === 90 || degree === -90) {\n            for (let i = 0; i < this.objColl.length; i++) {\n                this.objColl[i].activePoint.startX /= oldRatio.width;\n                this.objColl[i].activePoint.startY /= oldRatio.height;\n                this.objColl[i].activePoint.endX /= oldRatio.width;\n                this.objColl[i].activePoint.endY /= oldRatio.height;\n                this.objColl[i].activePoint.height = this.objColl[i].activePoint.endX - this.objColl[i].activePoint.startX;\n                this.objColl[i].activePoint.width = this.objColl[i].activePoint.endY - this.objColl[i].activePoint.startY;\n                this.objColl[i].strokeSettings.strokeWidth /= (oldRatio.width / this.factor);\n                this.calcCurrPoints(degree, this.objColl[i]);\n                this.objColl[i].activePoint.endX = this.objColl[i].activePoint.startX + this.objColl[i].activePoint.width;\n                this.objColl[i].activePoint.endY = this.objColl[i].activePoint.startY + this.objColl[i].activePoint.height;\n                this.objColl[i].activePoint.width = this.objColl[i].activePoint.endX - this.objColl[i].activePoint.startX;\n                this.objColl[i].activePoint.height = this.objColl[i].activePoint.endY - this.objColl[i].activePoint.startY;\n            }\n            for (let i = 0; i < this.objColl.length; i++) {\n                this.objColl[i].activePoint.startX *= oldRatio.width;\n                this.objColl[i].activePoint.startY *= oldRatio.height;\n                this.objColl[i].activePoint.endX *= oldRatio.width;\n                this.objColl[i].activePoint.endY *= oldRatio.height;\n                this.objColl[i].activePoint.width = this.objColl[i].activePoint.endX - this.objColl[i].activePoint.startX;\n                this.objColl[i].activePoint.height = this.objColl[i].activePoint.endY - this.objColl[i].activePoint.startY;\n                this.objColl[i].strokeSettings.strokeWidth *= ratio.width;\n            }\n            for (let i = 0; i < this.objColl.length; i++) {\n                this.updateActiveObject(ratio, this.objColl[i].activePoint, this.objColl[i]);\n            }\n        }\n        else if (degree === 'zoom') {\n            for (let i = 0; i < this.objColl.length; i++) {\n                this.objColl[i].activePoint.startX /= ratio.width;\n                this.objColl[i].activePoint.startY /= ratio.height;\n                this.objColl[i].activePoint.endX /= ratio.width;\n                this.objColl[i].activePoint.endY /= ratio.height;\n                this.objColl[i].activePoint.height = this.objColl[i].activePoint.endX - this.objColl[i].activePoint.startX;\n                this.objColl[i].activePoint.width = this.objColl[i].activePoint.endY - this.objColl[i].activePoint.startY;\n                this.objColl[i].activePoint.startX *= ratio.width;\n                this.objColl[i].activePoint.startY *= ratio.height;\n                this.objColl[i].activePoint.endX *= ratio.width;\n                this.objColl[i].activePoint.endY *= ratio.height;\n                this.objColl[i].activePoint.width = this.objColl[i].activePoint.endX - this.objColl[i].activePoint.startX;\n                this.objColl[i].activePoint.height = this.objColl[i].activePoint.endY - this.objColl[i].activePoint.startY;\n            }\n        }\n    }\n    calcCurrPoints(degree, obj) {\n        const oldRatio = this.calcPrevRatio();\n        if (degree > 0) {\n            const x = obj.activePoint.startX;\n            obj.activePoint.startX = (this.lowerCanvas.width / oldRatio.width) - (obj.activePoint.startY + obj.activePoint.width);\n            obj.activePoint.startY = x;\n        }\n        else {\n            const y = obj.activePoint.startY;\n            obj.activePoint.startY = (this.lowerCanvas.height / oldRatio.height) - (obj.activePoint.startX + obj.activePoint.height);\n            obj.activePoint.startX = y;\n        }\n    }\n    redrawShape(obj) {\n        for (let i = 0; i < this.objColl.length; i++) {\n            if (JSON.stringify(obj) === JSON.stringify(this.objColl[i])) {\n                this.objColl.splice(i, 1);\n                break;\n            }\n        }\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.drawObject('duplicate', obj);\n    }\n    applyActObj() {\n        let isActObj = false;\n        if (this.activeObj.shape !== undefined && this.activeObj.shape === 'text' && this.activeObj.keyHistory === '') {\n            this.refreshActiveObj();\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        }\n        else {\n            let splitWords;\n            let isCropSelection = false;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && this.currObjType.isCustomCrop) {\n                isCropSelection = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0 && !isCropSelection) {\n                for (let i = 0; i < this.objColl.length; i++) {\n                    if (JSON.stringify(this.activeObj) === JSON.stringify(this.objColl[i])) {\n                        isActObj = true;\n                        break;\n                    }\n                }\n                if (!isActObj) {\n                    if (isNullOrUndefined(this.activeObj.currIndex)) {\n                        this.activeObj.currIndex = 'shape_' + (this.objColl.length + 1);\n                    }\n                    const splitWords = this.activeObj.currIndex.split('_');\n                    let tempObjColl = this.objColl.splice(0, parseInt(splitWords[1], 10) - 1);\n                    tempObjColl.push(extend({}, this.activeObj, {}, true));\n                    for (let i = 0; i < this.objColl.length; i++) {\n                        tempObjColl.push(this.objColl[i]);\n                    }\n                    this.objColl = tempObjColl;\n                    tempObjColl = [];\n                    this.refreshActiveObj();\n                    this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                    this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n                    for (let i = 0; i < this.objColl.length; i++) {\n                        this.apply(this.objColl[i].shape, this.objColl[i]);\n                    }\n                    this.activeObj.flippedText = false;\n                    this.currObjType.shape = '';\n                    this.refreshActiveObj();\n                }\n            }\n        }\n    }\n    apply(shape, obj, canvas) {\n        if (!this.disabled) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const proxy = this;\n            if ((this.togglePen) && !this.currObjType.isCustomCrop) {\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                this.upperCanvas.toBlob(function (blob) {\n                    showSpinner(proxy.element);\n                    proxy.element.style.opacity = '0.5';\n                    proxy.lowerContext.clearRect(0, 0, proxy.lowerCanvas.width, proxy.lowerCanvas.height);\n                    proxy.lowerContext.drawImage(proxy.inMemoryCanvas, 0, 0);\n                    proxy.baseImg.src = URL.createObjectURL(blob);\n                    proxy.upperContext.clearRect(0, 0, proxy.upperCanvas.width, proxy.upperCanvas.height);\n                    proxy.togglePen = false;\n                    proxy.upperCanvas.style.cursor = 'default';\n                    for (let i = 0, len = proxy.objColl.length; i < len; i++) {\n                        proxy.apply(proxy.objColl[i].shape, proxy.objColl[i], 'duplicate');\n                    }\n                    proxy.togglePen = true;\n                }, 'image/png');\n                this.isUndoRedo = false;\n                this.degree = 0;\n            }\n            else {\n                canvas = canvas ? canvas : 'original';\n                this.currObjType.shape = shape !== undefined ? shape : this.currObjType.shape;\n                if (this.currObjType.shape !== '') {\n                    this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                    this.drawObject(canvas, obj);\n                    this.activeObj.shape = this.currObjType.shape.toLowerCase();\n                    if (!shape && this.currObjType.shape !== '' && !this.currObjType.isCustomCrop) {\n                        this.objColl.push(extend({}, this.activeObj, {}, true));\n                    }\n                    this.keyHistory = '';\n                }\n                this.isUndoRedo = false;\n            }\n        }\n    }\n    setCenterPoints(text, width, height) {\n        let renderWidth;\n        let renderHeight;\n        if (text && width && height) {\n            renderWidth = width;\n            renderHeight = height;\n        }\n        else {\n            renderWidth = this.activeObj.activePoint.width;\n            renderHeight = this.activeObj.activePoint.height;\n        }\n        if (this.factor === 1) {\n            this.activeObj.activePoint.startX = (this.lowerCanvas.width / 2) - renderWidth / 2;\n            this.activeObj.activePoint.startY = (this.lowerCanvas.height / 2) - renderHeight / 2;\n            this.activeObj.activePoint.endX = (this.lowerCanvas.width / 2) + renderWidth / 2;\n            this.activeObj.activePoint.endY = (this.lowerCanvas.height / 2) + renderHeight / 2;\n        }\n        else {\n            const endPoint = { x: this.lowerCanvas.width - this.pannEnd.startX, y: this.lowerCanvas.height - this.pannEnd.startY };\n            const visibleWidth = endPoint.x - this.pannStart.startX;\n            const visibleHeight = endPoint.y - this.pannStart.startY;\n            const centerX = (this.dragPoint.startX = visibleWidth / 2) + this.pannStart.startX;\n            const centerY = this.dragPoint.startY = visibleHeight / 2 + this.pannStart.startY;\n            this.activeObj.activePoint.startX = centerX - (renderWidth / 2);\n            this.activeObj.activePoint.startY = centerY - (renderHeight / 2);\n            this.activeObj.activePoint.endX = centerX + (renderWidth / 2);\n            this.activeObj.activePoint.endY = centerY + (renderHeight / 2);\n        }\n        if (text && width && height) {\n            this.textStartPoints.x = this.activeObj.activePoint.startX;\n            this.textStartPoints.y = this.activeObj.activePoint.startY;\n        }\n    }\n    drawShape(type, strokeWidth, strokeColor, fillColor, start, width, height) {\n        if (!this.disabled && this.imgDataColl.length > 0) {\n            const ratio = this.calcRatio();\n            this.redrawActObj();\n            this.togglePen = false;\n            this.keyHistory = '';\n            this.upperCanvas.style.display = 'block';\n            this.refreshActiveObj();\n            this.currObjType.shape = type;\n            if (this.currObjType.shape.toLowerCase() !== 'freehanddraw' && this.currObjType.shape.toLowerCase() !== '') {\n                this.activeObj.shape = this.currObjType.shape.toLowerCase();\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n                    this.activeObj.strokeSettings = this.strokeSettings;\n                }\n                this.activeObj.strokeSettings.strokeWidth = strokeWidth ? strokeWidth : this.activeObj.strokeSettings.strokeWidth;\n                this.activeObj.strokeSettings.strokeColor = strokeColor ? strokeColor : this.activeObj.strokeSettings.strokeColor;\n                this.activeObj.strokeSettings.fillColor = fillColor ? fillColor : this.activeObj.strokeSettings.fillColor;\n                const tempWidth = 100 / this.factor;\n                const tempHeight = 100 / this.factor;\n                this.activeObj.activePoint.width = tempWidth * ratio.width;\n                this.activeObj.activePoint.height = tempHeight * ratio.height;\n                if (this.currObjType.shape.toLowerCase() === 'line') {\n                    this.activeObj.lineDraw = 'horizontal';\n                    this.activeObj.activePoint.height /= 2;\n                }\n                else if (this.currObjType.shape.toLowerCase() === 'rectangle') {\n                    this.activeObj.activePoint.width += this.activeObj.activePoint.width / 2;\n                }\n                if (this.currObjType.shape.toLowerCase() === 'ellipse' && width) {\n                    this.activeObj.activePoint.width = 2 * width;\n                    this.activeObj.activePoint.height = 2 * height;\n                }\n                if (width && height) {\n                    this.activeObj.activePoint.width = width;\n                    this.activeObj.activePoint.height = height;\n                }\n                if (start !== undefined) {\n                    this.activeObj.activePoint.startX = start.x;\n                    this.activeObj.activePoint.startY = start.y;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + this.activeObj.activePoint.height;\n                }\n                else {\n                    this.setCenterPoints();\n                }\n                this.currObjType.isDragging = this.currObjType.isCustomCrop = false;\n                this.activeObj.shapeDegree = this.degree;\n                this.activeObj.flipObjColl = [];\n                this.drawObject('duplicate');\n                this.refreshToolbar('shapes');\n            }\n        }\n    }\n    drawShapeText(text, fontFamily, fontSize, bold, italic, strokeColor, x, y) {\n        if (!this.disabled && this.imgDataColl.length > 0) {\n            if (this.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                this.upperCanvas.style.cursor = 'default';\n                this.currObjType.shape = '';\n            }\n            const ratio = this.calcRatio();\n            this.togglePen = false;\n            this.redrawActObj();\n            this.keyHistory = '';\n            this.refreshActiveObj();\n            const shapeChangingArgs = { action: 'insert', previousShapeSettings: this.activeObj, currentShapeSettings: this.activeObj };\n            this.trigger('shapeChanging', shapeChangingArgs);\n            this.currObjType.isCustomCrop = false;\n            this.currObjType.isText = this.currObjType.isInitialText = true;\n            this.upperCanvas.style.display = 'block';\n            this.currObjType.shape = this.activeObj.shape = 'text';\n            if (isNullOrUndefined(this.activeObj.textSettings)) {\n                this.activeObj.textSettings = this.textSettings;\n            }\n            if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n                this.activeObj.strokeSettings = this.strokeSettings;\n            }\n            this.activeObj.strokeSettings.strokeColor = strokeColor ? strokeColor : this.activeObj.strokeSettings.strokeColor;\n            this.activeObj.textSettings.text = text ? text : this.activeObj.textSettings.text;\n            this.activeObj.textSettings.fontFamily = fontFamily ? fontFamily : this.activeObj.textSettings.fontFamily;\n            this.activeObj.textSettings.text = text ? text : this.activeObj.textSettings.text;\n            this.activeObj.textSettings.fontFamily = fontFamily ? fontFamily : this.activeObj.textSettings.fontFamily;\n            this.activeObj.textSettings.fontSize = fontSize ? fontSize : this.activeObj.textSettings.fontSize;\n            this.activeObj.textSettings.bold = bold ? bold : this.activeObj.textSettings.bold;\n            this.activeObj.textSettings.italic = italic ? italic : this.activeObj.textSettings.italic;\n            if (isNullOrUndefined(this.activeObj.textSettings.fontSize)) {\n                if (this.lowerCanvas.width > this.lowerCanvas.height) {\n                    this.activeObj.textSettings.fontSize = Math.floor((this.lowerCanvas.width / 20));\n                }\n                else {\n                    this.activeObj.textSettings.fontSize = Math.floor((this.lowerCanvas.height / 20));\n                }\n                if (this.activeObj.textSettings.fontSize < 20 * (ratio.width + ratio.height)) {\n                    this.activeObj.textSettings.fontSize = 20 * (ratio.width + ratio.height);\n                }\n            }\n            this.activeObj.shapeDegree = this.degree;\n            this.activeObj.shapeFlip = this.currFlipState;\n            this.activeObj.flipObjColl = [];\n            this.updateFontStyles();\n            const width = this.upperContext.measureText(this.activeObj.textSettings.text).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n            const height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n            if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n                this.activeObj.activePoint.startX = x;\n                this.activeObj.activePoint.startY = y;\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + width;\n                this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + height;\n            }\n            else {\n                this.setCenterPoints(true, width, height);\n            }\n            this.addLetter(this.activeObj.textSettings.text);\n            this.refreshToolbar('text');\n        }\n    }\n    drawPen(context) {\n        const ratio = this.calcRatio();\n        context = context ? context : this.upperContext;\n        this.upperCanvas.style.display = 'block';\n        this.canvasRatio = this.calcRatio();\n        if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n            this.activeObj.strokeSettings = this.strokeSettings;\n        }\n        if (isNullOrUndefined(this.activeObj.strokeSettings.strokeWidth)) {\n            this.activeObj.strokeSettings.strokeWidth = (ratio.width + ratio.height) * 0.4;\n        }\n        context.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n        context.lineWidth = 2 * (this.activeObj.strokeSettings.strokeWidth) / this.factor;\n        context.beginPath();\n        context.moveTo(this.prevX, this.prevY);\n        context.lineTo(this.currX, this.currY);\n        context.stroke();\n        context.closePath();\n    }\n    getObjDetails(obj) {\n        const shapeDetails = {};\n        shapeDetails.id = obj.currIndex;\n        shapeDetails.type = obj.shape;\n        shapeDetails.startX = obj.activePoint.startX;\n        shapeDetails.startY = obj.activePoint.startY;\n        if (obj.shape === 'rectangle') {\n            shapeDetails.width = obj.activePoint.width;\n            shapeDetails.height = obj.activePoint.height;\n            shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n            shapeDetails.fillColor = obj.strokeSettings.fillColor;\n            shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n        }\n        else if (obj.shape === 'ellipse') {\n            shapeDetails.radius = obj.activePoint.width / 2;\n            shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n            shapeDetails.fillColor = obj.strokeSettings.fillColor;\n            shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n        }\n        else if (obj.shape === 'line') {\n            shapeDetails.length = obj.activePoint.width;\n            shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n            shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n        }\n        else if (obj.shape === 'text') {\n            shapeDetails.text = obj.keyHistory;\n            shapeDetails.fontSize = obj.textSettings.fontSize;\n            shapeDetails.color = obj.strokeSettings.strokeColor;\n            shapeDetails.fontStyle = [];\n            if (obj.textSettings.bold) {\n                shapeDetails.fontStyle.push('bold');\n            }\n            if (obj.textSettings.italic) {\n                shapeDetails.fontStyle.push('italic');\n            }\n        }\n        return shapeDetails;\n    }\n    isPointsInRange(x, y) {\n        let inRange = false;\n        if (this.factor === 1) {\n            if (x >= 0 && y >= 0 && x <= this.lowerCanvas.width && y <= this.lowerCanvas.width) {\n                inRange = true;\n            }\n        }\n        else {\n            const endPoint = { x: this.lowerCanvas.width - this.pannEnd.startX, y: this.lowerCanvas.height - this.pannEnd.startY };\n            if (x >= this.pannStart.startX && y >= this.pannStart.startY && x <= endPoint.x && y <= endPoint.y) {\n                inRange = true;\n            }\n        }\n        return inRange;\n    }\n    /**\n     * Clear a current selection.\n     *\n     * @returns {void}.\n     */\n    clearSelection() {\n        if (!this.disabled && this.imgDataColl.length > 0) {\n            this.togglePen = false;\n            this.refreshActiveObj();\n            this.dragElement = '';\n            this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n            this.currObjType.shape = '';\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.currObjType.isActiveObj = true;\n            this.currObjType.isCustomCrop = false;\n            this.upperCanvas.style.cursor = 'default';\n        }\n    }\n    /**\n     * Crops an image based on the selection.\n     * The selection can be done through programmatically using the select method or through UI interactions.\n     *\n     * @returns {boolean}.\n     */\n    crop() {\n        let isCrop = false;\n        let splitWords;\n        const transitionArgs = { startPoint: { x: this.activeObj.activePoint.startX, y: this.activeObj.activePoint.startY }, endPoint: { x: this.activeObj.activePoint.endX, y: this.activeObj.activePoint.endY } };\n        this.trigger('cropping', transitionArgs);\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (!this.disabled && this.activeObj.horTopLine !== undefined && (this.currObjType.isCustomCrop || splitWords[0] === 'crop')) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const proxy = this;\n            isCrop = true;\n            this.upperCanvas.style.display = 'none';\n            let widthRatio;\n            let heightRatio;\n            let imgData;\n            let zoomedRotate = false;\n            if (this.factor === 1) {\n                imgData = this.lowerContext.getImageData(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                widthRatio = this.lowerCanvas.width / parseInt(this.lowerCanvas.style.maxWidth, 10);\n                heightRatio = this.lowerCanvas.height / parseInt(this.lowerCanvas.style.maxHeight, 10);\n            }\n            else {\n                this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n                this.upperContext.setTransform(1, 0, 0, 1, 0, 0);\n                imgData = this.imgDataColl[0].value;\n                widthRatio = this.lowerCanvas.width / parseInt(this.lowerCanvas.style.maxWidth, 10);\n                heightRatio = this.lowerCanvas.height / parseInt(this.lowerCanvas.style.maxHeight, 10);\n                if (this.degree !== 0 && this.flipState !== '') {\n                    this.degree = 0;\n                }\n                if (this.degree !== 0) {\n                    zoomedRotate = true;\n                    this.lowerCanvas.width = this.upperCanvas.width = this.baseImg.width;\n                    this.lowerCanvas.height = this.upperCanvas.height = this.baseImg.height;\n                    const tempObj = extend({}, this.activeObj, {}, true);\n                    this.factor = 1;\n                    this.lowerContext.clearRect(0, 0, this.inMemoryCanvas.height, this.inMemoryCanvas.width);\n                    this.lowerContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n                    if (this.degree === 180) {\n                        this.updateInMemoryContext(imgData);\n                    }\n                    const maxDimension = this.calcMaxDimension(tempObj.activePoint.width, tempObj.activePoint.height);\n                    this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = maxDimension.width + 'px';\n                    this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = maxDimension.height + 'px';\n                    this.lowerCanvas.width = this.upperCanvas.width = maxDimension.width * widthRatio;\n                    this.lowerCanvas.height = this.upperCanvas.height = maxDimension.height * heightRatio;\n                    if (this.degree !== 180) {\n                        this.updateInMemoryContext(imgData);\n                    }\n                    this.degree = 0;\n                    this.lowerContext.drawImage(this.inMemoryCanvas, tempObj.activePoint.startX, tempObj.activePoint.startY, tempObj.activePoint.width, tempObj.activePoint.height, 0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                }\n                if (this.flipState !== '') {\n                    zoomedRotate = true;\n                    const tempObj = extend({}, this.activeObj, {}, true);\n                    this.flipState = '';\n                    this.lowerContext.clearRect(0, 0, this.inMemoryCanvas.height, this.inMemoryCanvas.width);\n                    this.lowerContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n                    this.updateInMemoryContext(imgData);\n                    const maxDimension = this.calcMaxDimension(tempObj.activePoint.width, tempObj.activePoint.height);\n                    this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = maxDimension.width + 'px';\n                    this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = maxDimension.height + 'px';\n                    this.lowerCanvas.width = this.upperCanvas.width = maxDimension.width * widthRatio;\n                    this.lowerCanvas.height = this.upperCanvas.height = maxDimension.height * heightRatio;\n                    this.lowerContext.drawImage(this.inMemoryCanvas, tempObj.activePoint.startX, tempObj.activePoint.startY, tempObj.activePoint.width, tempObj.activePoint.height, 0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                }\n            }\n            if (!zoomedRotate) {\n                this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n                this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                this.inMemoryCanvas.width = imgData.width;\n                this.inMemoryCanvas.height = imgData.height;\n                this.inMemoryContext.putImageData(imgData, 0, 0);\n                this.updateInMemoryContext(imgData);\n                const maxDimension = this.calcMaxDimension(this.activeObj.activePoint.width, this.activeObj.activePoint.height);\n                this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = maxDimension.width + 'px';\n                this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = maxDimension.height + 'px';\n                this.lowerCanvas.width = this.upperCanvas.width = maxDimension.width * widthRatio;\n                this.lowerCanvas.height = this.upperCanvas.height = maxDimension.height * heightRatio;\n                const cssObj = window.getComputedStyle(this.lowerCanvas);\n                this.lowerCanvas.style.left = this.upperCanvas.style.left =\n                    ((this.element.clientWidth - parseInt(cssObj.width, 10) - 18) / 2) + 1 + 'px';\n                this.lowerCanvas.style.top = this.upperCanvas.style.top = ((this.element.clientHeight - this.toolbarHeight\n                    - parseInt(cssObj.height, 10)) / 2) + 1 + 'px';\n                this.lowerContext.drawImage(this.inMemoryCanvas, this.activeObj.activePoint.startX, this.activeObj.activePoint.startY, this.activeObj.activePoint.width, this.activeObj.activePoint.height, 0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            }\n            if (this.activeObj.shape === 'crop-circle') {\n                const imgData = this.lowerContext.getImageData(0, 0, this.baseImg.width, this.baseImg.height);\n                this.inMemoryCanvas.width = imgData.width;\n                this.inMemoryCanvas.height = imgData.height;\n                this.inMemoryContext.putImageData(imgData, 0, 0);\n                this.lowerContext.save();\n                this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0, this.baseImg.width, this.baseImg.height);\n                this.lowerContext.globalCompositeOperation = 'destination-in';\n                this.lowerContext.beginPath();\n                this.lowerContext.arc(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2, this.lowerCanvas.width / 2, 0, Math.PI * 2);\n                this.lowerContext.closePath();\n                this.lowerContext.fill();\n                this.lowerContext.restore();\n                this.currObjType.isActiveObj = true;\n            }\n            showSpinner(this.element);\n            this.element.style.opacity = '0.5';\n            let blobUrl;\n            let data;\n            // eslint-disable-next-line @typescript-eslint/tslint/config\n            this.lowerCanvas.toBlob(function (blob) {\n                blobUrl = URL.createObjectURL(blob);\n                proxy.isUndoRedo = false;\n                proxy.baseImg.src = blobUrl;\n                data = proxy.lowerContext.getImageData(0, 0, proxy.lowerCanvas.width, proxy.lowerCanvas.height);\n                proxy.imgDataColl = [];\n                if (!proxy.isUndoRedo) {\n                    proxy.updateUndoRedoColl('crop', data, proxy.objColl);\n                }\n                proxy.isUndoRedo = false;\n            }, 'image/png');\n            this.objColl = [];\n            this.refreshActiveObj();\n            this.degree = 0;\n            this.flipState = '';\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.lowerContext.globalAlpha = 0;\n            this.lowerContext.fillRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n            this.upperContext.setTransform(1, 0, 0, 1, 0, 0);\n            this.factor = 1;\n        }\n        return isCrop;\n    }\n    updateInMemoryContext(imgData) {\n        this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n        const temp = extend({}, this.activeObj, {}, true);\n        for (let i = 0; i < this.objColl.length; i++) {\n            this.apply(this.objColl[i].shape, this.objColl[i]);\n        }\n        this.activeObj = temp;\n        imgData = this.lowerContext.getImageData(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.inMemoryCanvas.width = imgData.width;\n        this.inMemoryCanvas.height = imgData.height;\n        this.inMemoryContext.putImageData(imgData, 0, 0);\n    }\n    /**\n     * Flips an image by horizontally or vertically.\n     *\n     * @param {Direction } direction - Specifies the direction to flip the image.\n     * @returns {void}.\n     */\n    flip(direction) {\n        if (!this.disabled && this.imgDataColl.length > 0) {\n            if (this.factor !== 1) {\n                this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n                this.upperContext.setTransform(1, 0, 0, 1, 0, 0);\n                this.factor = 1;\n                this.refreshToolbar('main');\n            }\n            const transitionArgs = { direction: direction };\n            this.trigger('flipping', transitionArgs);\n            this.lastAction = 'flip';\n            this.flipMethod = true;\n            let splitWords = [];\n            let activeObjShape;\n            if (!isNullOrUndefined(this.activeObj.activePoint)) {\n                if (this.activeObj.shape !== undefined) {\n                    splitWords = this.activeObj.shape.split('-');\n                }\n                if (this.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                    activeObjShape = this.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                }\n            }\n            this.redrawActObj();\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            if (direction.toLowerCase() === 'horizontal') {\n                this.lowerContext.translate(this.lowerContext.canvas.width, 0);\n                this.lowerContext.scale(-1, 1);\n                this.upperContext.translate(this.upperContext.canvas.width, 0);\n                this.upperContext.scale(-1, 1);\n                this.flipDirection = 'horizontal';\n                if (this.flipState === '' || this.flipState.toLowerCase() === 'vertical') {\n                    this.flipState = 'horizontal';\n                }\n                if (this.currFlipState.toLowerCase() === 'horizontal') {\n                    this.currFlipState = '';\n                }\n                else {\n                    this.currFlipState = 'horizontal';\n                }\n            }\n            else {\n                this.lowerContext.translate(0, this.lowerContext.canvas.height);\n                this.lowerContext.scale(1, -1);\n                this.upperContext.translate(0, this.upperContext.canvas.height);\n                this.upperContext.scale(1, -1);\n                this.flipDirection = 'vertical';\n                if (this.flipState.toLowerCase() === '' || this.flipState.toLowerCase() === 'horizontal') {\n                    this.flipState = 'vertical';\n                }\n                if (this.currFlipState.toLowerCase() === 'vertical') {\n                    this.currFlipState = '';\n                }\n                else {\n                    this.currFlipState = 'vertical';\n                }\n            }\n            this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n            this.currImgData = this.lowerContext.getImageData(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.inMemoryCanvas.width = this.currImgData.width;\n            this.inMemoryCanvas.height = this.currImgData.height;\n            this.inMemoryContext.putImageData(this.currImgData, 0, 0);\n            if (this.flipState.toLowerCase() === 'horizontal') {\n                for (let i = 0, len = this.objColl.length; i < len; i++) {\n                    this.objColl[i].flippedText = false;\n                    if (this.objColl[i].shapeFlip !== '' && this.objColl[i].shapeFlip === this.currFlipState) {\n                        this.apply(this.objColl[i].shape, this.objColl[i]);\n                    }\n                    else {\n                        this.apply(this.objColl[i].shape, this.objColl[i]);\n                    }\n                }\n                this.lowerContext.translate(this.lowerContext.canvas.width, 0);\n                this.lowerContext.scale(-1, 1);\n                this.upperContext.translate(this.upperContext.canvas.width, 0);\n                this.upperContext.scale(-1, 1);\n                this.flipDirection = '';\n            }\n            else if (this.flipState.toLowerCase() === 'vertical') {\n                for (let i = 0, len = this.objColl.length; i < len; i++) {\n                    this.objColl[i].flippedText = false;\n                    if (this.objColl[i].shapeFlip !== '' && this.objColl[i].shapeFlip === this.currFlipState) {\n                        this.apply(this.objColl[i].shape, this.objColl[i]);\n                    }\n                    else {\n                        this.apply(this.objColl[i].shape, this.objColl[i]);\n                    }\n                }\n                this.lowerContext.translate(0, this.lowerContext.canvas.height);\n                this.lowerContext.scale(1, -1);\n                this.upperContext.translate(0, this.upperContext.canvas.height);\n                this.upperContext.scale(1, -1);\n                this.flipDirection = '';\n            }\n            for (let i = 0, len = this.objColl.length; i < len; i++) {\n                if (this.objColl[i].flipObjColl.length === 0) {\n                    this.objColl[i].flipObjColl.push(direction);\n                }\n                else if (this.objColl[i].flipObjColl[this.objColl[i].flipObjColl.length - 1] === direction) {\n                    this.objColl[i].flipObjColl.pop();\n                }\n                else {\n                    this.objColl[i].flipObjColl.push(direction);\n                }\n            }\n            this.redrawObj(direction.toLowerCase());\n            if (this.flipState === '') {\n                for (let i = 0, len = this.objColl.length; i < len; i++) {\n                    this.apply(this.objColl[i].shape, this.objColl[i]);\n                }\n            }\n            this.refreshActiveObj();\n            if (!this.isUndoRedo) {\n                this.updateUndoRedoColl('flip', direction, this.objColl);\n            }\n            this.isUndoRedo = this.flipMethod = false;\n            if (!isNullOrUndefined(activeObjShape)) {\n                if (activeObjShape === 'custom') {\n                    this.activeObj.activePoint = { startX: 0, startY: 0, endX: this.lowerCanvas.width,\n                        endY: this.lowerCanvas.height, width: this.lowerCanvas.width, height: this.lowerCanvas.height };\n                    this.updateActiveObject(this.calcRatio(), this.activeObj.activePoint, this.activeObj);\n                    this.drawObject('duplicate', this.activeObj);\n                }\n                else {\n                    this.select(activeObjShape);\n                }\n            }\n        }\n    }\n    /**\n     * Return an image as ImageData.\n     *\n     * @returns {ImageData}.\n     */\n    getImageData() {\n        const data = this.lowerContext.getImageData(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        return data;\n    }\n    /**\n     *  Load/opens an image for editing within an image editor.\n     *\n     * @param {string | ImageData } data - Specifies url of the Image or image data.\n     *\n     * @returns {void}.\n     */\n    open(data) {\n        if (!this.disabled) {\n            showSpinner(this.element);\n            this.element.style.opacity = '0.5';\n            const toolbar = document.querySelector('#' + this.element.id + '_currPos');\n            if (toolbar) {\n                toolbar.style.display = 'none';\n            }\n            if (this.defToolbarItems.length === 0 &&\n                (isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                this.toolbarHeight = 0;\n            }\n            this.update();\n            const type = typeof (data);\n            if (type === 'string') {\n                this.imageOnLoad(data);\n            }\n            else {\n                this.lowerCanvas = document.querySelector('#' + this.element.id + '_lowerCanvas');\n                this.upperCanvas = document.querySelector('#' + this.element.id + '_upperCanvas');\n                this.lowerContext = this.lowerCanvas.getContext('2d');\n                this.upperContext = this.upperCanvas.getContext('2d');\n                this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n                this.inMemoryCanvas.width = this.baseImg.width = data.width;\n                this.inMemoryCanvas.height = this.baseImg.height = data.height;\n                this.inMemoryContext.putImageData(data, 0, 0);\n                this.imgDataColl.push({ operation: 'open', value: data });\n                this.lowerCanvas.width = this.upperCanvas.width = data.width;\n                this.lowerCanvas.height = this.upperCanvas.height = data.height;\n                this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                this.updateCanvas();\n                hideSpinner(this.element);\n                this.element.style.opacity = '1';\n            }\n        }\n    }\n    /**\n     * Reset all the changesand revert to original image.\n     *\n     * @returns {void}.\n     */\n    reset() {\n        if (!this.disabled) {\n            this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n            this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.height, this.inMemoryCanvas.width);\n            this.lowerContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n            this.lowerContext.clearRect(0, 0, this.inMemoryCanvas.height, this.inMemoryCanvas.width);\n            this.upperContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n            this.upperContext.clearRect(0, 0, this.inMemoryCanvas.height, this.inMemoryCanvas.width);\n            showSpinner(this.element);\n            this.element.style.opacity = '0.5';\n            if (this.imgDataColl.length > 0) {\n                if (this.imgDataColl[0].operation === 'freehanddraw') {\n                    this.imgDataColl.splice(0, 1);\n                    this.imgDataColl.splice(1, 1);\n                }\n                this.inMemoryCanvas.width = this.imgDataColl[0].value.width;\n                this.inMemoryCanvas.height = this.imgDataColl[0].value.height;\n                this.inMemoryContext.putImageData(this.imgDataColl[0].value, 0, 0);\n                this.redrawImg();\n            }\n            this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n            this.upperContext.setTransform(1, 0, 0, 1, 0, 0);\n            this.baseImg.src = this.baseImgSrc;\n            this.factor = 1;\n            this.refreshToolbar('main');\n            if (Browser.isDevice && document.getElementById(this.element.id + '_bottomToolbar')) {\n                getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n            }\n            this.objColl = [];\n            this.imgDataColl = [];\n            this.degree = 0;\n            this.flipState = this.keyHistory = this.currFlipState = this.flipDirection = '';\n            this.upperCanvas.style.display = 'none';\n            this.upperCanvas.style.cursor = this.lowerCanvas.style.cursor = 'default';\n            this.undoRedoColl = [];\n            this.dragCanvas = this.dragged = this.isUndoRedo = this.activeObj.flippedText = this.flipMethod = false;\n            this.currImgData = {};\n            this.pannStart = { startX: 0, startY: 0, width: 0, height: 0 };\n            this.pannEnd = { startX: 0, startY: 0, width: 0, height: 0 };\n            this.lowerContext.lineWidth = this.upperContext.lineWidth = undefined;\n            this.togglePan = this.togglePen = this.rotateMethod = false;\n            this.lastX = this.lastY = 0;\n            this.dragStart = { x: 0, y: 0 };\n            this.touchEndPoint = {};\n            this.prevX = this.currX = this.prevY = this.currY = 0;\n            this.lastAction = this.tempKeyHistory = '';\n            this.isBoldbtn = this.isItalicbtn = false;\n            this.currentToolbar = 'main';\n            this.textStartPoints = { x: 0, y: 0 };\n            this.fontSizeColl = this.penDrawColl = [];\n            this.textBox.value = this.textBox.textContent = '';\n            this.textBox.style.display = 'none';\n            this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n            this.textSettings =\n                { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, bold: false, italic: false, underline: false };\n            this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n            this.penStrokeWidth = undefined;\n            this.tempTextSettings =\n                { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, bold: false, italic: false, underline: false };\n            this.refreshActiveObj();\n            this.timer = undefined;\n            this.isScreenOriented = false;\n            this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false,\n                isInitialLine: false, isCustomCrop: false, isZoomed: false };\n        }\n    }\n    /**\n     * Rotate an image to clockwise and anti-clockwise.\n     *\n     * @param {number} degree - Specifies a degree to rotate an image.\n     * positive integer value for clockwise and negative integer value for anti-clockwise rotation.\n     *\n     * @returns {boolean}.\n     */\n    rotate(degree) {\n        let isRotate = false;\n        if (!this.disabled && this.imgDataColl.length > 0 && (degree % 90 === 0)) {\n            isRotate = true;\n            const transitionArgs = { degree: degree };\n            this.trigger('rotating', transitionArgs);\n            this.rotateMethod = true;\n            this.lastAction = 'rotate';\n            let splitWords = [];\n            let activeObjShape;\n            if (!isNullOrUndefined(this.activeObj.activePoint)) {\n                if (this.activeObj.shape !== undefined) {\n                    splitWords = this.activeObj.shape.split('-');\n                }\n                if (this.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                    activeObjShape = this.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                }\n            }\n            this.redrawActObj();\n            if (this.factor !== 1) {\n                this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n                this.upperContext.setTransform(1, 0, 0, 1, 0, 0);\n                this.factor = 1;\n                this.refreshToolbar('main');\n            }\n            this.degree += degree;\n            if (this.degree === 360) {\n                this.degree = 0;\n            }\n            this.lowerContext.save();\n            this.setMaximumDimension(this.degree);\n            this.lowerContext.translate(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2);\n            this.lowerContext.rotate(Math.PI / 180 * degree);\n            this.lowerCanvas.style.left = this.upperCanvas.style.left = (this.element.clientWidth - parseInt(this.lowerCanvas.style.maxWidth, 10) - 18) / 2 + 1 + 'px';\n            this.lowerCanvas.style.top = this.upperCanvas.style.top = (this.element.clientHeight - this.toolbarHeight - parseInt(this.lowerCanvas.style.maxHeight, 10)) / 2 + 1 + 'px';\n            this.lowerContext.drawImage(this.inMemoryCanvas, -this.lowerCanvas.height / 2, -this.lowerCanvas.width / 2);\n            this.lowerContext.rotate(Math.PI / 180 * -degree);\n            this.lowerContext.translate(-this.lowerCanvas.width / 2, -this.lowerCanvas.height / 2);\n            this.lowerContext.restore();\n            this.currImgData = this.lowerContext.getImageData(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.inMemoryCanvas.width = this.currImgData.width;\n            this.inMemoryCanvas.height = this.currImgData.height;\n            this.inMemoryContext.putImageData(this.currImgData, 0, 0);\n            this.redrawObj(degree);\n            if (!isNullOrUndefined(activeObjShape)) {\n                if (activeObjShape === 'custom') {\n                    const endPoint = { x: this.lowerCanvas.width - this.pannEnd.startX, y: this.lowerCanvas.height - this.pannEnd.startY };\n                    this.activeObj.activePoint = { startX: this.pannStart.startX, startY: this.pannStart.startY, endX: endPoint.x,\n                        endY: endPoint.y, width: endPoint.x - this.pannStart.startX, height: endPoint.y - this.pannStart.startY };\n                    this.updateActiveObject(this.calcRatio(), this.activeObj.activePoint, this.activeObj);\n                    this.drawObject('duplicate', this.activeObj);\n                }\n                else {\n                    this.select(activeObjShape);\n                }\n                this.refreshToolbar('main', true, true);\n            }\n            this.factor = 1;\n            if (!this.isUndoRedo) {\n                this.updateUndoRedoColl('rotate', degree, this.objColl);\n            }\n            this.isUndoRedo = false;\n        }\n        this.rotateMethod = false;\n        return isRotate;\n    }\n    /**\n     * Export an image using the specified file name and the extension.\n     *\n     * @param {string} type - Specifies a format of image to be saved.\n     * @param {string} fileName  Specifies a file name to be saved\n     *\n     * @returns {void}.\n     */\n    export(type, fileName) {\n        if (!this.disabled && this.imgDataColl.length > 0) {\n            if (this.togglePen) {\n                this.currObjType.isZoomed = true;\n                this.applyPenDraw();\n            }\n            this.applyActObj();\n            if (this.factor !== 1) {\n                this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n                this.upperContext.setTransform(1, 0, 0, 1, 0, 0);\n                this.factor = 1;\n                this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n                for (let i = 0; i < this.objColl.length; i++) {\n                    this.apply(this.objColl[i].shape, this.objColl[i]);\n                    this.refreshActiveObj();\n                }\n            }\n            type = type ? type : 'Png';\n            this.redrawActObj();\n            const beforeSave = { cancel: false, fileName: 'ImageEditor', fileType: type };\n            const saved = { fileName: 'ImageEditor', fileType: type };\n            this.trigger('beforeSave', beforeSave, (observableSaveArgs) => {\n                if (!observableSaveArgs.cancel) {\n                    fileName = observableSaveArgs.fileName ? observableSaveArgs.fileName : fileName;\n                    if (type.toLowerCase() === 'svg') {\n                        fileName = fileName || 'ImageEditor';\n                        this.toSVGImg(fileName);\n                    }\n                    else if (type.toLowerCase() === 'jpeg') {\n                        fileName = fileName || 'ImageEditor';\n                        this.toBlobFn(fileName, type.toLowerCase());\n                    }\n                    else {\n                        fileName = fileName || 'ImageEditor';\n                        this.toBlobFn(fileName, type.toLowerCase());\n                    }\n                    this.trigger('saved', saved);\n                    this.refreshToolbar('main');\n                }\n            });\n        }\n    }\n    /**\n     * Perform selection in an image editor. The selection helps to crop an image.\n     *\n     * @param {string} type - Specifies the shape - circle / square / custom selection / pre-defined ratios.\n     * @param {number} startX  Specifies the start x-coordinate point of the selection.\n     * @param {number} startY  Specifies the start y-coordinate point of the selection.\n     * @param {number} width - Specifies the width of the selection area.\n     * @param {number} height - Specifies the height of the selection area.\n     * @returns {void}.\n     *   ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     *   created : () => {\n     *     imageObj.select('16:9', 10, 10);\n     *  }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    select(type, startX, startY, width, height) {\n        if (!this.disabled && this.imgDataColl.length > 0) {\n            const ratio = this.calcRatio();\n            let points;\n            this.redrawActObj();\n            this.refreshActiveObj();\n            this.keyHistory = '';\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.upperCanvas.style.display = 'block';\n            const cropShape = 'crop-' + type;\n            if (cropShape.toLowerCase() === 'crop-custom') {\n                if (this.currObjType.shape === '') {\n                    this.currObjType.isCustomCrop = true;\n                    this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.5)';\n                    this.upperContext.fillRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                    this.upperCanvas.style.cursor = 'crosshair';\n                    if (Browser.isDevice) {\n                        const arcRadius = (7.5 * (ratio.width > ratio.height ? ratio.width : ratio.height)) / this.factor;\n                        const endPoint = { x: this.lowerCanvas.width - this.pannEnd.startX, y: this.lowerCanvas.height - this.pannEnd.startY };\n                        this.activeObj.activePoint = { startX: this.pannStart.startX + arcRadius, startY: this.pannStart.startY + arcRadius,\n                            endX: endPoint.x - arcRadius, endY: endPoint.y - arcRadius };\n                        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n                        this.updateActiveObject(this.calcRatio(), this.activeObj.activePoint, this.activeObj);\n                        this.drawObject('duplicate', this.activeObj);\n                        this.upperCanvas.style.cursor = 'default';\n                    }\n                }\n                if (startX && startY) {\n                    this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                    this.currObjType.shape = this.activeObj.shape = cropShape.toLowerCase();\n                    this.activeObj.activePoint.startX = startX + ratio.width;\n                    this.activeObj.activePoint.startY = startY + ratio.height;\n                    this.activeObj.activePoint.endX = this.baseImg.width - (2 * ratio.width);\n                    this.activeObj.activePoint.endY = this.baseImg.height - (2 * ratio.height);\n                    this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n                    this.drawObject('duplicate');\n                }\n            }\n            else if (cropShape.toLowerCase() === 'crop-canvas') {\n                this.upperCanvas.style.display = 'none';\n                this.dragCanvas = true;\n            }\n            else {\n                this.currObjType.isCustomCrop = false;\n                this.currObjType.shape = cropShape.toLowerCase();\n                if (width && height) {\n                    points = { startX: startX, startY: startY, endX: startX + width, endY: startY + height,\n                        width: width, height: height };\n                }\n                else if (width && cropShape === 'crop-circle') {\n                    points = { startX: startX, startY: startY, endX: startX + width, endY: startY + width,\n                        width: width, height: width };\n                }\n                this.activeObj.shape = cropShape.toLowerCase();\n                this.drawObject('duplicate', null, null, true, points);\n            }\n        }\n    }\n    /**\n     * Enable or disable a freehand drawing in an Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether enable or disable freehand drawing.\n     *\n     *  @returns {void}.\n     */\n    freeHandDraw(value) {\n        if (value) {\n            this.togglePen = true;\n            this.upperCanvas.style.cursor = 'cross-hair';\n            this.drawPen();\n        }\n        else {\n            this.upperCanvas.style.cursor = 'default';\n            this.applyPenDraw();\n        }\n        this.refreshToolbar('pen');\n    }\n    /**\n     * Enable or disable a panning on the Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether enable or disable panning.\n     *\n     * @returns {void}.\n     */\n    pan(value) {\n        if (!this.disabled && this.imgDataColl.length > 0) {\n            if (value) {\n                this.togglePan = true;\n                this.redrawActObj();\n                this.dragCanvas = true;\n                this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'grab';\n            }\n            else {\n                this.dragCanvas = this.togglePan = false;\n                this.refreshActiveObj();\n                this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'default';\n            }\n        }\n    }\n    /**\n     * Increase / Decrease the magnification of an image.\n     *\n     * @param {boolean} value - Specifies a value to be zoomed on the image.\n     * @returns {void}.\n     */\n    zoom(value) {\n        if (!this.disabled && this.imgDataColl.length > 0) {\n            if ((this.factor === 1 && value < 0) || (this.factor > 8 && value > 0)) {\n                return;\n            }\n            let splitWords = [];\n            let activeObjShape;\n            if (!isNullOrUndefined(this.activeObj.activePoint)) {\n                if (this.activeObj.shape !== undefined) {\n                    splitWords = this.activeObj.shape.split('-');\n                }\n                if (this.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                    activeObjShape = this.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                }\n            }\n            this.redrawActObj();\n            this.refreshActiveObj();\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.upperCanvas.style.cursor = 'default';\n            let zoomState;\n            if (value === 3.75 || value === 1) {\n                zoomState = 0.1;\n            }\n            else if (value === -3.75) {\n                zoomState = -0.1;\n            }\n            else {\n                zoomState = value;\n            }\n            if (this.degree !== 0) {\n                this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n                this.inMemoryCanvas.width = this.currImgData.width;\n                this.inMemoryCanvas.height = this.currImgData.height;\n                this.inMemoryContext.putImageData(this.currImgData, 0, 0);\n            }\n            if (value === 0.1 || value === -0.1) {\n                this.lastX = this.lowerCanvas.width / 2;\n                this.lastY = this.lowerCanvas.height / 2;\n            }\n            if (value > 0) {\n                this.zoomImg(3.75);\n            }\n            else {\n                this.zoomImg(-3.75);\n            }\n            this.refreshActiveObj();\n            if (!isNullOrUndefined(activeObjShape)) {\n                if (activeObjShape === 'custom') {\n                    const endPoint = { x: this.lowerCanvas.width - this.pannEnd.startX, y: this.lowerCanvas.height - this.pannEnd.startY };\n                    this.activeObj.activePoint = { startX: this.pannStart.startX, startY: this.pannStart.startY, endX: endPoint.x,\n                        endY: endPoint.y, width: endPoint.x - this.pannStart.startX, height: endPoint.y - this.pannStart.startY };\n                    this.updateActiveObject(this.calcRatio(), this.activeObj.activePoint, this.activeObj);\n                    this.drawObject('duplicate', this.activeObj);\n                }\n                else {\n                    this.select(activeObjShape);\n                }\n                this.refreshToolbar('main', true, true);\n            }\n            if (!this.isUndoRedo) {\n                this.updateUndoRedoColl('zoom', zoomState, this.objColl);\n            }\n            this.isUndoRedo = false;\n            const zoomOut = document.querySelector('#' + this.element.id + '_zoomOut');\n            if (!isNullOrUndefined(zoomOut) && this.factor === 1) {\n                zoomOut.classList.add('e-disabled');\n            }\n            else if (!isNullOrUndefined(zoomOut)) {\n                zoomOut.classList.remove('e-disabled');\n            }\n        }\n    }\n    /**\n     * Draw ellipse on an image.\n     *\n     * @param {number} x - Specifies x-coordinate of ellipse.\n     * @param {number} y - Specifies y-coordinate of ellipse.\n     * @param {number} radiusX - the radius x point for the ellipse.\n     * @param {number} radiusY - the radius y point for the ellipse.\n     * @param {number} strokeWidth - the stroke width of ellipse.\n     * @param {string} strokeColor - the stroke color of ellipse.\n     * @param {string} fillColor - the fill color of the ellipse.\n     * @returns {boolean}.\n     *\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * * var imageObj = new ImageEditor({\n     * created: () => {\n     * imageObj.drawEllipse(10, 10, 40, 60);\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    drawEllipse(x, y, radiusX, radiusY, strokeWidth, strokeColor, fillColor) {\n        let isEllipse = false;\n        const inRange = this.isPointsInRange(x, y);\n        if (!this.disabled && this.imgDataColl.length > 0 && inRange) {\n            isEllipse = true;\n            const shapeChangingArgs = { action: 'insert', previousShapeSettings: this.activeObj, currentShapeSettings: this.activeObj };\n            this.trigger('shapeChanging', shapeChangingArgs);\n            if (this.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                this.upperCanvas.style.cursor = 'default';\n                this.currObjType.shape = '';\n            }\n            this.currObjType.isCustomCrop = false;\n            const start = { x: x, y: y };\n            this.drawShape('circle', strokeWidth, strokeColor, fillColor, start, radiusX, radiusY);\n        }\n        return isEllipse;\n    }\n    /**\n     * Draw line on an image.\n     *\n     * @param {number} startX  Specifies start point x-coordinate of line.\n     * @param {number} startY  Specifies start point y-coordinate of line.\n     * @param {number} endX - Specifies end point x-coordinates of line.\n     * @param {number} endY - Specifies end point y-coordinates of the line.\n     * @param {number} strokeWidth - Specifies the stroke width of line.\n     * @param {string} strokeColor - Specifies the stroke color of line.\n     * @returns {boolean}.\n     */\n    drawLine(startX, startY, endX, endY, strokeWidth, strokeColor) {\n        let isLine = false;\n        const inRange = this.isPointsInRange(startX, startY);\n        if (!this.disabled && this.imgDataColl.length > 0 && inRange) {\n            isLine = true;\n            const shapeChangingArgs = { action: 'insert', previousShapeSettings: this.activeObj, currentShapeSettings: this.activeObj };\n            this.trigger('shapeChanging', shapeChangingArgs);\n            if (this.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                this.upperCanvas.style.cursor = 'default';\n                this.currObjType.shape = '';\n            }\n            this.currObjType.isCustomCrop = false;\n            const start = { x: startX, y: startY };\n            const width = endX - startX;\n            const height = endY - startY;\n            this.drawShape('line', strokeWidth, strokeColor, null, start, width, height);\n        }\n        return isLine;\n    }\n    /**\n     * Draw a rectangle on an image.\n     *\n     * @param {number} x - Specifies x-coordinate of rectangle.\n     * @param {number} y - Specifies y-coordinate of rectangle.\n     * @param {number} width - Specifies the width of the rectangle.\n     * @param {number} height - Specifies the height of the rectangle.\n     * @param {number} strokeWidth - Specifies the stroke width of rectangle.\n     * @param {string} strokeColor - Specifies the stroke color of rectangle.\n     * @param {string} fillColor - the fill color of the rectangle.\n     * @returns {boolean}.\n     */\n    drawRectangle(x, y, width, height, strokeWidth, strokeColor, fillColor) {\n        let isRectangle = false;\n        const inRange = this.isPointsInRange(x, y);\n        if (!this.disabled && this.imgDataColl.length > 0 && inRange) {\n            isRectangle = true;\n            const shapeChangingArgs = { action: 'insert', previousShapeSettings: this.activeObj,\n                currentShapeSettings: this.activeObj };\n            this.trigger('shapeChanging', shapeChangingArgs);\n            if (this.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                this.upperCanvas.style.cursor = 'default';\n                this.currObjType.shape = '';\n            }\n            this.currObjType.isCustomCrop = false;\n            const start = { x: x, y: y };\n            this.drawShape('rectangle', strokeWidth, strokeColor, fillColor, start, width, height);\n        }\n        return isRectangle;\n    }\n    /**\n     * Draw a text on an image.\n     *\n     * @param {number} x - Specifies x-coordinate of text.\n     * @param {number} y - Specifies y-coordinate of text.\n     * @param {string} text - Specifies the text to add on an image.\n     * @param {string} fontFamily - Specifies the font family of the text.\n     * @param {number} fontSize - Specifies the font size of the text.\n     * @param {boolean} bold - Specifies whether the text is bold or not.\n     * @param {boolean} italic - Specifies whether the text is italic or not.\n     * @param {string} color - Specifies font color of the text.\n     * @returns {boolean}.\n     *\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     * created: () => {\n     *  imageObj.drawText(10, 10, 'Syncfusion', 'Arial', 12, true, true, '#000');\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     *\n     * </script>\n     * ```\n     */\n    drawText(x, y, text, fontFamily, fontSize, bold, italic, color) {\n        let isText = false;\n        const inRange = this.isPointsInRange(x, y);\n        if (!this.disabled && this.imgDataColl.length > 0 && inRange) {\n            isText = true;\n            this.drawShapeText(text, fontFamily, fontSize, bold, italic, color, x, y);\n        }\n        return isText;\n    }\n    /**\n     * Selects a shape based on the given shape id. The id can be got from the public method getShapeSettings.\n     *\n     * @param {string} id - Specifies the shape id to select a shape on an image.\n     * @returns {boolean}.\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     * created: () => {\n     *  imageObj.selectShape('shape_1');\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    selectShape(id) {\n        this.applyActObj();\n        let obj;\n        let isSelected;\n        for (let i = 0; i < this.objColl.length; i++) {\n            if (this.objColl[i].currIndex === id) {\n                obj = extend({}, this.objColl[i], {}, true);\n                break;\n            }\n        }\n        if (isNullOrUndefined(obj)) {\n            isSelected = false;\n        }\n        else {\n            isSelected = true;\n            this.activeObj = obj;\n            this.redrawShape(this.activeObj);\n            this.refreshToolbar('shapes');\n            this.updateToolbarItems(this.calcRatio());\n        }\n        return isSelected;\n    }\n    /**\n     * Deletes a shape based on the given shape id.The id can be got from the public method getShapeSettings.\n     *\n     * @param {string} id - Specifies the shape id to delete the shape on an image.\n     * @returns {void}.\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     * created: () => {\n     *  imageObj.deleteShape('shape_1');\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    deleteShape(id) {\n        this.applyActObj();\n        for (let i = 0; i < this.objColl.length; i++) {\n            if (this.objColl[i].currIndex === id) {\n                this.objColl.splice(i, 1);\n                break;\n            }\n        }\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.lowerContext.drawImage(this.inMemoryCanvas, 0, 0);\n        for (let i = 0; i < this.objColl.length; i++) {\n            this.apply(this.objColl[i].shape, this.objColl[i]);\n            this.refreshActiveObj();\n        }\n        this.refreshToolbar('main');\n    }\n    /**\n     * Get particular shapes details based on id of the shape which is drawn on an image editor.\n     *\n     * @param {string} id - Specifies the shape id on an image.\n     * @returns {ShapeSettings}.\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     * created: () => {\n     *  imageObj.getShapeSetting('shape_1');\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    getShapeSetting(id) {\n        this.applyActObj();\n        let obj;\n        for (let i = 0; i < this.objColl.length; i++) {\n            if (this.objColl[i].currIndex === id) {\n                obj = extend({}, this.objColl[i], {}, true);\n                break;\n            }\n        }\n        const shapeDetails = this.getObjDetails(obj);\n        return shapeDetails;\n    }\n    /**\n     * Get all the shapes details which is drawn on an image editor.\n     *\n     * @returns {ShapeSettings[]}.\n     */\n    getShapeSettings() {\n        this.applyActObj();\n        const shapeDetailsColl = [];\n        for (let i = 0; i < this.objColl.length; i++) {\n            const shapeDetails = this.getObjDetails(this.objColl[i]);\n            shapeDetailsColl.push(shapeDetails);\n        }\n        return shapeDetailsColl;\n    }\n    /**\n     * To refresh the Canvas Wrapper.\n     *\n     * @returns {void}.\n     */\n    update() {\n        const canvasWrapper = document.querySelector('#' + this.element.id + '_canvasWrapper');\n        canvasWrapper.style.width = this.element.offsetWidth + 'px';\n        this.lowerCanvas.width = this.upperCanvas.width = this.element.offsetWidth;\n        if (Browser.isDevice) {\n            canvasWrapper.style.height = this.element.offsetHeight - (2 * this.toolbarHeight) - 3 + 'px';\n            this.lowerCanvas.height = this.upperCanvas.height = this.element.offsetHeight - (2 * this.toolbarHeight) - 3;\n        }\n        else {\n            canvasWrapper.style.height = this.element.offsetHeight - this.toolbarHeight - 1 + 'px';\n            this.lowerCanvas.height = this.upperCanvas.height = this.element.offsetHeight - this.toolbarHeight - 1;\n        }\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n    }\n};\n__decorate([\n    Property('')\n], ImageEditor.prototype, \"cssClass\", void 0);\n__decorate([\n    Property(false)\n], ImageEditor.prototype, \"disabled\", void 0);\n__decorate([\n    Property('100%')\n], ImageEditor.prototype, \"height\", void 0);\n__decorate([\n    Property('Bootstrap5')\n], ImageEditor.prototype, \"theme\", void 0);\n__decorate([\n    Property()\n], ImageEditor.prototype, \"toolbar\", void 0);\n__decorate([\n    Property()\n], ImageEditor.prototype, \"toolbarTemplate\", void 0);\n__decorate([\n    Property('100%')\n], ImageEditor.prototype, \"width\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"beforeSave\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"created\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"destroyed\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"zooming\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"panning\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"cropping\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"rotating\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"flipping\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"shapeChanging\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"fileOpened\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"saved\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"toolbarCreated\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"toolbarUpdating\", void 0);\n__decorate([\n    Event()\n], ImageEditor.prototype, \"toolbarItemClicked\", void 0);\nImageEditor = ImageEditor_1 = __decorate([\n    NotifyPropertyChanges\n], ImageEditor);\nexport { ImageEditor };\n","/**\n * Image Editor Modules\n */\nexport * from './image-editor';\n","/**\n * ImageEditor all modules\n */\nexport * from './image-editor/index';\n"],"names":["this","templateCompiler"],"mappings":"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"}